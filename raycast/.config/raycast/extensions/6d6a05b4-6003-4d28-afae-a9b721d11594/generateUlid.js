"use strict";var D=Object.create;var g=Object.defineProperty;var M=Object.getOwnPropertyDescriptor;var x=Object.getOwnPropertyNames;var A=Object.getPrototypeOf,O=Object.prototype.hasOwnProperty;var R=(t,e)=>{for(var n in e)g(t,n,{get:e[n],enumerable:!0})},y=(t,e,n,o)=>{if(e&&typeof e=="object"||typeof e=="function")for(let r of x(e))!O.call(t,r)&&r!==n&&g(t,r,{get:()=>e[r],enumerable:!(o=M(e,r))||o.enumerable});return t};var U=(t,e,n)=>(n=t!=null?D(A(t)):{},y(e||!t||!t.__esModule?g(n,"default",{value:t,enumerable:!0}):n,t)),L=t=>y(g({},"__esModule",{value:!0}),t);var W={};R(W,{default:()=>V});module.exports=L(W);var c=require("@raycast/api");var d=U(require("node:crypto"),1);function p(t){if(!u(t))throw new Error("Parameter was not an error")}function u(t){return $(t)==="[object Error]"||t instanceof Error}function $(t){return Object.prototype.toString.call(t)}function b(t){let e,n="";if(t.length===0)e={};else if(u(t[0]))e={cause:t[0]},n=t.slice(1).join(" ")||"";else if(t[0]&&typeof t[0]=="object")e=Object.assign({},t[0]),n=t.slice(1).join(" ")||"";else if(typeof t[0]=="string")e={},n=n=t.join(" ")||"";else throw new Error("Invalid arguments passed to Layerr");return{options:e,shortMessage:n}}var i=class extends Error{constructor(e,n){let o=[...arguments],{options:r,shortMessage:s}=b(o),a=s;if(r.cause&&(a=`${a}: ${r.cause.message}`),super(a),this.message=a,r.name&&typeof r.name=="string"?this.name=r.name:this.name="Layerr",r.cause&&Object.defineProperty(this,"_cause",{value:r.cause}),Object.defineProperty(this,"_info",{value:{}}),r.info&&typeof r.info=="object"&&Object.assign(this._info,r.info),Error.captureStackTrace){let m=r.constructorOpt||this.constructor;Error.captureStackTrace(this,m)}}static cause(e){return p(e),e._cause&&u(e._cause)?e._cause:null}static fullStack(e){p(e);let n=i.cause(e);return n?`${e.stack}
caused by: ${i.fullStack(n)}`:e.stack}static info(e){p(e);let n={},o=i.cause(e);return o&&Object.assign(n,i.info(o)),e._info&&Object.assign(n,e._info),n}cause(){return i.cause(this)}toString(){let e=this.name||this.constructor.name||this.constructor.prototype.name;return this.message&&(e=`${e}: ${this.message}`),e}};var h="0123456789ABCDEFGHJKMNPQRSTVWXYZ",l=32,I=0xffffffffffff,N=10,j=16,f=Object.freeze({source:"ulid"});function P(t){let e=t||G(),n=e&&(e.crypto||e.msCrypto)||(typeof d.default<"u"?d.default:null);if(typeof n?.getRandomValues=="function")return()=>{let o=new Uint8Array(1);return n.getRandomValues(o),o[0]/255};if(typeof n?.randomBytes=="function")return()=>n.randomBytes(1).readUInt8()/255;if(d.default?.randomBytes)return()=>d.default.randomBytes(1).readUInt8()/255;throw new i({info:{code:"PRNG_DETECT",...f}},"Failed to find a reliable PRNG")}function G(){return k()?self:typeof window<"u"?window:typeof global<"u"?global:typeof globalThis<"u"?globalThis:null}function S(t,e){let n="";for(;t>0;t--)n=v(e)+n;return n}function w(t,e){if(isNaN(t))throw new i({info:{code:"ENC_TIME_NAN",...f}},`Time must be a number: ${t}`);if(t>I)throw new i({info:{code:"ENC_TIME_SIZE_EXCEED",...f}},`Cannot encode a time larger than ${I}: ${t}`);if(t<0)throw new i({info:{code:"ENC_TIME_NEG",...f}},`Time must be positive: ${t}`);if(Number.isInteger(t)===!1)throw new i({info:{code:"ENC_TIME_TYPE",...f}},`Time must be an integer: ${t}`);let n,o="";for(let r=e;r>0;r--)n=t%l,o=h.charAt(n)+o,t=(t-n)/l;return o}function B(t){let e,n=t.length,o,r,s=t,a=l-1;for(;!e&&n-->=0;){if(o=s[n],r=h.indexOf(o),r===-1)throw new i({info:{code:"B32_INC_ENC",...f}},"Incorrectly encoded string");if(r===a){s=_(s,n,h[0]);continue}e=_(s,n,h[r+1])}if(typeof e=="string")return e;throw new i({info:{code:"B32_INC_INVALID",...f}},"Failed incrementing string")}function k(){return typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope}function T(t){let e=t||P(),n=0,o;return function(s){let a=isNaN(s)?Date.now():s;if(a<=n){let E=o=B(o);return w(n,N)+E}n=a;let m=o=S(j,e);return w(a,N)+m}}function v(t){let e=Math.floor(t()*l);return e===l&&(e=l-1),h.charAt(e)}function _(t,e,n){return e>t.length-1?t:t.substr(0,e)+n+t.substr(e+1)}var F=T(),C=1e4,V=async t=>{let{numberOfULIDsToGenerate:e}=t.arguments,{upperCaseLetters:n,defaultAction:o}=(0,c.getPreferenceValues)();e||(e="1");try{let r=parseInt(e,10);if(isNaN(r))throw new Error("INVALID_NUMBER");if(r<=C){let s=Array.from(Array(r)).map(()=>F(15e4));n&&(s=s.map(E=>E.toUpperCase())),o==="copy"?await c.Clipboard.copy(s.join(`\r
`)):o==="paste"&&await c.Clipboard.paste(s.join(`\r
`));let a=o==="copy"?"Copied":"Pasted",m=s.length>1?`${a} ${s.length} new ULIDs.`:`${a} new ULID: ${s}`;await(0,c.showHUD)(`\u2705 ${m}`)}else await(0,c.showToast)({style:c.Toast.Style.Failure,title:"Too many ULIDs requested.",message:`${r} exceeds maximum ULIDs of ${C}. Try a lower number.`})}catch{await(0,c.showToast)({style:c.Toast.Style.Failure,title:"Invalid number.",message:"An invalid number has been provided. Try an actual number."})}};
