"use strict";var ps=Object.create;var jr=Object.defineProperty;var bs=Object.getOwnPropertyDescriptor;var ys=Object.getOwnPropertyNames;var gs=Object.getPrototypeOf,Ss=Object.prototype.hasOwnProperty;var Nt=(o,r)=>()=>(o&&(r=o(o=0)),r);var Yt=(o,r)=>()=>(r||o((r={exports:{}}).exports,r),r.exports),ri=(o,r)=>{for(var i in r)jr(o,i,{get:r[i],enumerable:!0})},ni=(o,r,i,s)=>{if(r&&typeof r=="object"||typeof r=="function")for(let u of ys(r))!Ss.call(o,u)&&u!==i&&jr(o,u,{get:()=>r[u],enumerable:!(s=bs(r,u))||s.enumerable});return o};var fe=(o,r,i)=>(i=o!=null?ps(gs(o)):{},ni(r||!o||!o.__esModule?jr(i,"default",{value:o,enumerable:!0}):i,o)),_s=o=>ni(jr({},"__esModule",{value:!0}),o);var wt=Yt((Cn,Pn)=>{(function(o,r){typeof Cn=="object"&&typeof Pn<"u"?Pn.exports=r():typeof define=="function"&&define.amd?define(r):(o=typeof globalThis<"u"?globalThis:o||self).dayjs=r()})(Cn,function(){"use strict";var o=1e3,r=6e4,i=36e5,s="millisecond",u="second",c="minute",d="hour",R="day",b="week",m="month",F="quarter",p="year",y="date",g="Invalid Date",_=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,q=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,z={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_")},M=function(k,P,T){var W=String(k);return!W||W.length>=P?k:""+Array(P+1-W.length).join(T)+k},B={s:M,z:function(k){var P=-k.utcOffset(),T=Math.abs(P),W=Math.floor(T/60),C=T%60;return(P<=0?"+":"-")+M(W,2,"0")+":"+M(C,2,"0")},m:function k(P,T){if(P.date()<T.date())return-k(T,P);var W=12*(T.year()-P.year())+(T.month()-P.month()),C=P.clone().add(W,m),j=T-C<0,I=P.clone().add(W+(j?-1:1),m);return+(-(W+(T-C)/(j?C-I:I-C))||0)},a:function(k){return k<0?Math.ceil(k)||0:Math.floor(k)},p:function(k){return{M:m,y:p,w:b,d:R,D:y,h:d,m:c,s:u,ms:s,Q:F}[k]||String(k||"").toLowerCase().replace(/s$/,"")},u:function(k){return k===void 0}},$="en",S={};S[$]=z;var w=function(k){return k instanceof te},v=function k(P,T,W){var C;if(!P)return $;if(typeof P=="string"){var j=P.toLowerCase();S[j]&&(C=j),T&&(S[j]=T,C=j);var I=P.split("-");if(!C&&I.length>1)return k(I[0])}else{var V=P.name;S[V]=P,C=V}return!W&&C&&($=C),C||!W&&$},O=function(k,P){if(w(k))return k.clone();var T=typeof P=="object"?P:{};return T.date=k,T.args=arguments,new te(T)},E=B;E.l=v,E.i=w,E.w=function(k,P){return O(k,{locale:P.$L,utc:P.$u,x:P.$x,$offset:P.$offset})};var te=function(){function k(T){this.$L=v(T.locale,null,!0),this.parse(T)}var P=k.prototype;return P.parse=function(T){this.$d=function(W){var C=W.date,j=W.utc;if(C===null)return new Date(NaN);if(E.u(C))return new Date;if(C instanceof Date)return new Date(C);if(typeof C=="string"&&!/Z$/i.test(C)){var I=C.match(_);if(I){var V=I[2]-1||0,ee=(I[7]||"0").substring(0,3);return j?new Date(Date.UTC(I[1],V,I[3]||1,I[4]||0,I[5]||0,I[6]||0,ee)):new Date(I[1],V,I[3]||1,I[4]||0,I[5]||0,I[6]||0,ee)}}return new Date(C)}(T),this.$x=T.x||{},this.init()},P.init=function(){var T=this.$d;this.$y=T.getFullYear(),this.$M=T.getMonth(),this.$D=T.getDate(),this.$W=T.getDay(),this.$H=T.getHours(),this.$m=T.getMinutes(),this.$s=T.getSeconds(),this.$ms=T.getMilliseconds()},P.$utils=function(){return E},P.isValid=function(){return this.$d.toString()!==g},P.isSame=function(T,W){var C=O(T);return this.startOf(W)<=C&&C<=this.endOf(W)},P.isAfter=function(T,W){return O(T)<this.startOf(W)},P.isBefore=function(T,W){return this.endOf(W)<O(T)},P.$g=function(T,W,C){return E.u(T)?this[W]:this.set(C,T)},P.unix=function(){return Math.floor(this.valueOf()/1e3)},P.valueOf=function(){return this.$d.getTime()},P.startOf=function(T,W){var C=this,j=!!E.u(W)||W,I=E.p(T),V=function(ue,G){var $e=E.w(C.$u?Date.UTC(C.$y,G,ue):new Date(C.$y,G,ue),C);return j?$e:$e.endOf(R)},ee=function(ue,G){return E.w(C.toDate()[ue].apply(C.toDate("s"),(j?[0,0,0,0]:[23,59,59,999]).slice(G)),C)},K=this.$W,oe=this.$M,we=this.$D,Re="set"+(this.$u?"UTC":"");switch(I){case p:return j?V(1,0):V(31,11);case m:return j?V(1,oe):V(0,oe+1);case b:var Je=this.$locale().weekStart||0,Ke=(K<Je?K+7:K)-Je;return V(j?we-Ke:we+(6-Ke),oe);case R:case y:return ee(Re+"Hours",0);case d:return ee(Re+"Minutes",1);case c:return ee(Re+"Seconds",2);case u:return ee(Re+"Milliseconds",3);default:return this.clone()}},P.endOf=function(T){return this.startOf(T,!1)},P.$set=function(T,W){var C,j=E.p(T),I="set"+(this.$u?"UTC":""),V=(C={},C[R]=I+"Date",C[y]=I+"Date",C[m]=I+"Month",C[p]=I+"FullYear",C[d]=I+"Hours",C[c]=I+"Minutes",C[u]=I+"Seconds",C[s]=I+"Milliseconds",C)[j],ee=j===R?this.$D+(W-this.$W):W;if(j===m||j===p){var K=this.clone().set(y,1);K.$d[V](ee),K.init(),this.$d=K.set(y,Math.min(this.$D,K.daysInMonth())).$d}else V&&this.$d[V](ee);return this.init(),this},P.set=function(T,W){return this.clone().$set(T,W)},P.get=function(T){return this[E.p(T)]()},P.add=function(T,W){var C,j=this;T=Number(T);var I=E.p(W),V=function(oe){var we=O(j);return E.w(we.date(we.date()+Math.round(oe*T)),j)};if(I===m)return this.set(m,this.$M+T);if(I===p)return this.set(p,this.$y+T);if(I===R)return V(1);if(I===b)return V(7);var ee=(C={},C[c]=r,C[d]=i,C[u]=o,C)[I]||1,K=this.$d.getTime()+T*ee;return E.w(K,this)},P.subtract=function(T,W){return this.add(-1*T,W)},P.format=function(T){var W=this,C=this.$locale();if(!this.isValid())return C.invalidDate||g;var j=T||"YYYY-MM-DDTHH:mm:ssZ",I=E.z(this),V=this.$H,ee=this.$m,K=this.$M,oe=C.weekdays,we=C.months,Re=function(G,$e,lt,de){return G&&(G[$e]||G(W,j))||lt[$e].slice(0,de)},Je=function(G){return E.s(V%12||12,G,"0")},Ke=C.meridiem||function(G,$e,lt){var de=G<12?"AM":"PM";return lt?de.toLowerCase():de},ue={YY:String(this.$y).slice(-2),YYYY:this.$y,M:K+1,MM:E.s(K+1,2,"0"),MMM:Re(C.monthsShort,K,we,3),MMMM:Re(we,K),D:this.$D,DD:E.s(this.$D,2,"0"),d:String(this.$W),dd:Re(C.weekdaysMin,this.$W,oe,2),ddd:Re(C.weekdaysShort,this.$W,oe,3),dddd:oe[this.$W],H:String(V),HH:E.s(V,2,"0"),h:Je(1),hh:Je(2),a:Ke(V,ee,!0),A:Ke(V,ee,!1),m:String(ee),mm:E.s(ee,2,"0"),s:String(this.$s),ss:E.s(this.$s,2,"0"),SSS:E.s(this.$ms,3,"0"),Z:I};return j.replace(q,function(G,$e){return $e||ue[G]||I.replace(":","")})},P.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},P.diff=function(T,W,C){var j,I=E.p(W),V=O(T),ee=(V.utcOffset()-this.utcOffset())*r,K=this-V,oe=E.m(this,V);return oe=(j={},j[p]=oe/12,j[m]=oe,j[F]=oe/3,j[b]=(K-ee)/6048e5,j[R]=(K-ee)/864e5,j[d]=K/i,j[c]=K/r,j[u]=K/o,j)[I]||K,C?oe:E.a(oe)},P.daysInMonth=function(){return this.endOf(m).$D},P.$locale=function(){return S[this.$L]},P.locale=function(T,W){if(!T)return this.$L;var C=this.clone(),j=v(T,W,!0);return j&&(C.$L=j),C},P.clone=function(){return E.w(this.$d,this)},P.toDate=function(){return new Date(this.valueOf())},P.toJSON=function(){return this.isValid()?this.toISOString():null},P.toISOString=function(){return this.$d.toISOString()},P.toString=function(){return this.$d.toUTCString()},k}(),ne=te.prototype;return O.prototype=ne,[["$ms",s],["$s",u],["$m",c],["$H",d],["$W",R],["$M",m],["$y",p],["$D",y]].forEach(function(k){ne[k[1]]=function(P){return this.$g(P,k[0],k[1])}}),O.extend=function(k,P){return k.$i||(k(P,te,O),k.$i=!0),O},O.locale=v,O.isDayjs=w,O.unix=function(k){return O(1e3*k)},O.en=S[$],O.Ls=S,O.p={},O})});var oi=Yt((En,An)=>{(function(o,r){typeof En=="object"&&typeof An<"u"?An.exports=r():typeof define=="function"&&define.amd?define(r):(o=typeof globalThis<"u"?globalThis:o||self).dayjs_plugin_duration=r()})(En,function(){"use strict";var o,r,i=1e3,s=6e4,u=36e5,c=864e5,d=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,R=31536e6,b=2592e6,m=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/,F={years:R,months:b,days:c,hours:u,minutes:s,seconds:i,milliseconds:1,weeks:6048e5},p=function($){return $ instanceof B},y=function($,S,w){return new B($,w,S.$l)},g=function($){return r.p($)+"s"},_=function($){return $<0},q=function($){return _($)?Math.ceil($):Math.floor($)},z=function($){return Math.abs($)},M=function($,S){return $?_($)?{negative:!0,format:""+z($)+S}:{negative:!1,format:""+$+S}:{negative:!1,format:""}},B=function(){function $(w,v,O){var E=this;if(this.$d={},this.$l=O,w===void 0&&(this.$ms=0,this.parseFromMilliseconds()),v)return y(w*F[g(v)],this);if(typeof w=="number")return this.$ms=w,this.parseFromMilliseconds(),this;if(typeof w=="object")return Object.keys(w).forEach(function(k){E.$d[g(k)]=w[k]}),this.calMilliseconds(),this;if(typeof w=="string"){var te=w.match(m);if(te){var ne=te.slice(2).map(function(k){return k!=null?Number(k):0});return this.$d.years=ne[0],this.$d.months=ne[1],this.$d.weeks=ne[2],this.$d.days=ne[3],this.$d.hours=ne[4],this.$d.minutes=ne[5],this.$d.seconds=ne[6],this.calMilliseconds(),this}}return this}var S=$.prototype;return S.calMilliseconds=function(){var w=this;this.$ms=Object.keys(this.$d).reduce(function(v,O){return v+(w.$d[O]||0)*F[O]},0)},S.parseFromMilliseconds=function(){var w=this.$ms;this.$d.years=q(w/R),w%=R,this.$d.months=q(w/b),w%=b,this.$d.days=q(w/c),w%=c,this.$d.hours=q(w/u),w%=u,this.$d.minutes=q(w/s),w%=s,this.$d.seconds=q(w/i),w%=i,this.$d.milliseconds=w},S.toISOString=function(){var w=M(this.$d.years,"Y"),v=M(this.$d.months,"M"),O=+this.$d.days||0;this.$d.weeks&&(O+=7*this.$d.weeks);var E=M(O,"D"),te=M(this.$d.hours,"H"),ne=M(this.$d.minutes,"M"),k=this.$d.seconds||0;this.$d.milliseconds&&(k+=this.$d.milliseconds/1e3);var P=M(k,"S"),T=w.negative||v.negative||E.negative||te.negative||ne.negative||P.negative,W=te.format||ne.format||P.format?"T":"",C=(T?"-":"")+"P"+w.format+v.format+E.format+W+te.format+ne.format+P.format;return C==="P"||C==="-P"?"P0D":C},S.toJSON=function(){return this.toISOString()},S.format=function(w){var v=w||"YYYY-MM-DDTHH:mm:ss",O={Y:this.$d.years,YY:r.s(this.$d.years,2,"0"),YYYY:r.s(this.$d.years,4,"0"),M:this.$d.months,MM:r.s(this.$d.months,2,"0"),D:this.$d.days,DD:r.s(this.$d.days,2,"0"),H:this.$d.hours,HH:r.s(this.$d.hours,2,"0"),m:this.$d.minutes,mm:r.s(this.$d.minutes,2,"0"),s:this.$d.seconds,ss:r.s(this.$d.seconds,2,"0"),SSS:r.s(this.$d.milliseconds,3,"0")};return v.replace(d,function(E,te){return te||String(O[E])})},S.as=function(w){return this.$ms/F[g(w)]},S.get=function(w){var v=this.$ms,O=g(w);return O==="milliseconds"?v%=1e3:v=O==="weeks"?q(v/F[O]):this.$d[O],v===0?0:v},S.add=function(w,v,O){var E;return E=v?w*F[g(v)]:p(w)?w.$ms:y(w,this).$ms,y(this.$ms+E*(O?-1:1),this)},S.subtract=function(w,v){return this.add(w,v,!0)},S.locale=function(w){var v=this.clone();return v.$l=w,v},S.clone=function(){return y(this.$ms,this)},S.humanize=function(w){return o().add(this.$ms,"ms").locale(this.$l).fromNow(!w)},S.milliseconds=function(){return this.get("milliseconds")},S.asMilliseconds=function(){return this.as("milliseconds")},S.seconds=function(){return this.get("seconds")},S.asSeconds=function(){return this.as("seconds")},S.minutes=function(){return this.get("minutes")},S.asMinutes=function(){return this.as("minutes")},S.hours=function(){return this.get("hours")},S.asHours=function(){return this.as("hours")},S.days=function(){return this.get("days")},S.asDays=function(){return this.as("days")},S.weeks=function(){return this.get("weeks")},S.asWeeks=function(){return this.as("weeks")},S.months=function(){return this.get("months")},S.asMonths=function(){return this.as("months")},S.years=function(){return this.get("years")},S.asYears=function(){return this.as("years")},$}();return function($,S,w){o=w,r=w().$utils(),w.duration=function(E,te){var ne=w.locale();return y(E,{$l:ne},te)},w.isDuration=p;var v=S.prototype.add,O=S.prototype.subtract;S.prototype.add=function(E,te){return p(E)&&(E=E.asMilliseconds()),v.bind(this)(E,te)},S.prototype.subtract=function(E,te){return p(E)&&(E=E.asMilliseconds()),O.bind(this)(E,te)}}})});var si=Yt((Ir,ai)=>{(function(o,r){typeof Ir=="object"&&typeof ai<"u"?r(Ir):typeof define=="function"&&define.amd?define(["exports"],r):(o=typeof globalThis<"u"?globalThis:o||self,r(o.WebStreamsPolyfill={}))})(Ir,function(o){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function i(){}function s(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let u=s();function c(e){return typeof e=="object"&&e!==null||typeof e=="function"}let d=i,R=Promise,b=Promise.prototype.then,m=Promise.resolve.bind(R),F=Promise.reject.bind(R);function p(e){return new R(e)}function y(e){return m(e)}function g(e){return F(e)}function _(e,t,n){return b.call(e,t,n)}function q(e,t,n){_(_(e,t,n),void 0,d)}function z(e,t){q(e,t)}function M(e,t){q(e,void 0,t)}function B(e,t,n){return _(e,t,n)}function $(e){_(e,void 0,d)}let S=(()=>{let e=u&&u.queueMicrotask;if(typeof e=="function")return e;let t=y(void 0);return n=>_(t,n)})();function w(e,t,n){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,n)}function v(e,t,n){try{return y(w(e,t,n))}catch(a){return g(a)}}let O=16384;class E{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){let n=this._back,a=n;n._elements.length===O-1&&(a={_elements:[],_next:void 0}),n._elements.push(t),a!==n&&(this._back=a,n._next=a),++this._size}shift(){let t=this._front,n=t,a=this._cursor,l=a+1,f=t._elements,h=f[a];return l===O&&(n=t._next,l=0),--this._size,this._cursor=l,t!==n&&(this._front=n),f[a]=void 0,h}forEach(t){let n=this._cursor,a=this._front,l=a._elements;for(;(n!==l.length||a._next!==void 0)&&!(n===l.length&&(a=a._next,l=a._elements,n=0,l.length===0));)t(l[n]),++n}peek(){let t=this._front,n=this._cursor;return t._elements[n]}}function te(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?T(e):t._state==="closed"?C(e):W(e,t._storedError)}function ne(e,t){let n=e._ownerReadableStream;return Ae(n,t)}function k(e){e._ownerReadableStream._state==="readable"?j(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):I(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function P(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function T(e){e._closedPromise=p((t,n)=>{e._closedPromise_resolve=t,e._closedPromise_reject=n})}function W(e,t){T(e),j(e,t)}function C(e){T(e),V(e)}function j(e,t){e._closedPromise_reject!==void 0&&($(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function I(e,t){W(e,t)}function V(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let ee=r("[[AbortSteps]]"),K=r("[[ErrorSteps]]"),oe=r("[[CancelSteps]]"),we=r("[[PullSteps]]"),Re=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Je=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function Ke(e){return typeof e=="object"||typeof e=="function"}function ue(e,t){if(e!==void 0&&!Ke(e))throw new TypeError(`${t} is not an object.`)}function G(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function $e(e){return typeof e=="object"&&e!==null||typeof e=="function"}function lt(e,t){if(!$e(e))throw new TypeError(`${t} is not an object.`)}function de(e,t,n){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${n}'.`)}function Zr(e,t,n){if(e===void 0)throw new TypeError(`${t} is required in '${n}'.`)}function Jr(e){return Number(e)}function Vn(e){return e===0?0:e}function Gi(e){return Vn(Je(e))}function Qn(e,t){let a=Number.MAX_SAFE_INTEGER,l=Number(e);if(l=Vn(l),!Re(l))throw new TypeError(`${t} is not a finite number`);if(l=Gi(l),l<0||l>a)throw new TypeError(`${t} is outside the accepted range of 0 to ${a}, inclusive`);return!Re(l)||l===0?0:l}function Kr(e,t){if(!Ye(e))throw new TypeError(`${t} is not a ReadableStream.`)}function ct(e){return new $t(e)}function Gn(e,t){e._reader._readRequests.push(t)}function Xr(e,t,n){let l=e._reader._readRequests.shift();n?l._closeSteps():l._chunkSteps(t)}function ir(e){return e._reader._readRequests.length}function Zn(e){let t=e._reader;return!(t===void 0||!xe(t))}class $t{constructor(t){if(de(t,1,"ReadableStreamDefaultReader"),Kr(t,"First parameter"),Ve(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");te(this,t),this._readRequests=new E}get closed(){return xe(this)?this._closedPromise:g(ar("closed"))}cancel(t=void 0){return xe(this)?this._ownerReadableStream===void 0?g(P("cancel")):ne(this,t):g(ar("cancel"))}read(){if(!xe(this))return g(ar("read"));if(this._ownerReadableStream===void 0)return g(P("read from"));let t,n,a=p((f,h)=>{t=f,n=h});return Dt(this,{_chunkSteps:f=>t({value:f,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:f=>n(f)}),a}releaseLock(){if(!xe(this))throw ar("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");k(this)}}}Object.defineProperties($t.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty($t.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function xe(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof $t}function Dt(e,t){let n=e._ownerReadableStream;n._disturbed=!0,n._state==="closed"?t._closeSteps():n._state==="errored"?t._errorSteps(n._storedError):n._readableStreamController[we](t)}function ar(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let Jn=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Kn{constructor(t,n){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=n}next(){let t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?B(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){let n=()=>this._returnSteps(t);return this._ongoingPromise?B(this._ongoingPromise,n,n):n()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let t=this._reader;if(t._ownerReadableStream===void 0)return g(P("iterate"));let n,a,l=p((h,A)=>{n=h,a=A});return Dt(t,{_chunkSteps:h=>{this._ongoingPromise=void 0,S(()=>n({value:h,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,k(t),n({value:void 0,done:!0})},_errorSteps:h=>{this._ongoingPromise=void 0,this._isFinished=!0,k(t),a(h)}}),l}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;let n=this._reader;if(n._ownerReadableStream===void 0)return g(P("finish iterating"));if(!this._preventCancel){let a=ne(n,t);return k(n),B(a,()=>({value:t,done:!0}))}return k(n),y({value:t,done:!0})}}let Xn={next(){return eo(this)?this._asyncIteratorImpl.next():g(to("next"))},return(e){return eo(this)?this._asyncIteratorImpl.return(e):g(to("return"))}};Jn!==void 0&&Object.setPrototypeOf(Xn,Jn);function Zi(e,t){let n=ct(e),a=new Kn(n,t),l=Object.create(Xn);return l._asyncIteratorImpl=a,l}function eo(e){if(!c(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Kn}catch{return!1}}function to(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let ro=Number.isNaN||function(e){return e!==e};function Bt(e){return e.slice()}function no(e,t,n,a,l){new Uint8Array(e).set(new Uint8Array(n,a,l),t)}function Ks(e){return e}function sr(e){return!1}function oo(e,t,n){if(e.slice)return e.slice(t,n);let a=n-t,l=new ArrayBuffer(a);return no(l,0,e,t,a),l}function Ji(e){return!(typeof e!="number"||ro(e)||e<0)}function io(e){let t=oo(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function en(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function tn(e,t,n){if(!Ji(n)||n===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:n}),e._queueTotalSize+=n}function Ki(e){return e._queue.peek().value}function Ue(e){e._queue=new E,e._queueTotalSize=0}class Wt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!rn(this))throw sn("view");return this._view}respond(t){if(!rn(this))throw sn("respond");if(de(t,1,"respond"),t=Qn(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");sr(this._view.buffer),dr(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!rn(this))throw sn("respondWithNewView");if(de(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");sr(t.buffer),hr(this._associatedReadableByteStreamController,t)}}Object.defineProperties(Wt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Wt.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class ft{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Xe(this))throw Ft("byobRequest");return an(this)}get desiredSize(){if(!Xe(this))throw Ft("desiredSize");return mo(this)}close(){if(!Xe(this))throw Ft("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);Ot(this)}enqueue(t){if(!Xe(this))throw Ft("enqueue");if(de(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be enqueued to`);fr(this,t)}error(t=void 0){if(!Xe(this))throw Ft("error");Ee(this,t)}[oe](t){ao(this),Ue(this);let n=this._cancelAlgorithm(t);return cr(this),n}[we](t){let n=this._controlledReadableByteStream;if(this._queueTotalSize>0){let l=this._queue.shift();this._queueTotalSize-=l.byteLength,co(this);let f=new Uint8Array(l.buffer,l.byteOffset,l.byteLength);t._chunkSteps(f);return}let a=this._autoAllocateChunkSize;if(a!==void 0){let l;try{l=new ArrayBuffer(a)}catch(h){t._errorSteps(h);return}let f={buffer:l,bufferByteLength:a,byteOffset:0,byteLength:a,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(f)}Gn(n,t),et(this)}}Object.defineProperties(ft.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(ft.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Xe(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof ft}function rn(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof Wt}function et(e){if(!ra(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let n=e._pullAlgorithm();q(n,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,et(e))},a=>{Ee(e,a)})}function ao(e){on(e),e._pendingPullIntos=new E}function nn(e,t){let n=!1;e._state==="closed"&&(n=!0);let a=so(t);t.readerType==="default"?Xr(e,a,n):ia(e,a,n)}function so(e){let t=e.bytesFilled,n=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/n)}function ur(e,t,n,a){e._queue.push({buffer:t,byteOffset:n,byteLength:a}),e._queueTotalSize+=a}function uo(e,t){let n=t.elementSize,a=t.bytesFilled-t.bytesFilled%n,l=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),f=t.bytesFilled+l,h=f-f%n,A=l,L=!1;h>a&&(A=h-t.bytesFilled,L=!0);let U=e._queue;for(;A>0;){let N=U.peek(),Y=Math.min(A,N.byteLength),ie=t.byteOffset+t.bytesFilled;no(t.buffer,ie,N.buffer,N.byteOffset,Y),N.byteLength===Y?U.shift():(N.byteOffset+=Y,N.byteLength-=Y),e._queueTotalSize-=Y,lo(e,Y,t),A-=Y}return L}function lo(e,t,n){n.bytesFilled+=t}function co(e){e._queueTotalSize===0&&e._closeRequested?(cr(e),Ut(e._controlledReadableByteStream)):et(e)}function on(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function fo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let t=e._pendingPullIntos.peek();uo(e,t)&&(lr(e),nn(e._controlledReadableByteStream,t))}}function Xi(e,t,n){let a=e._controlledReadableByteStream,l=1;t.constructor!==DataView&&(l=t.constructor.BYTES_PER_ELEMENT);let f=t.constructor,h=t.buffer,A={buffer:h,bufferByteLength:h.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:l,viewConstructor:f,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(A),yo(a,n);return}if(a._state==="closed"){let L=new f(A.buffer,A.byteOffset,0);n._closeSteps(L);return}if(e._queueTotalSize>0){if(uo(e,A)){let L=so(A);co(e),n._chunkSteps(L);return}if(e._closeRequested){let L=new TypeError("Insufficient bytes to fill elements in the given buffer");Ee(e,L),n._errorSteps(L);return}}e._pendingPullIntos.push(A),yo(a,n),et(e)}function ea(e,t){let n=e._controlledReadableByteStream;if(un(n))for(;go(n)>0;){let a=lr(e);nn(n,a)}}function ta(e,t,n){if(lo(e,t,n),n.bytesFilled<n.elementSize)return;lr(e);let a=n.bytesFilled%n.elementSize;if(a>0){let l=n.byteOffset+n.bytesFilled,f=oo(n.buffer,l-a,l);ur(e,f,0,f.byteLength)}n.bytesFilled-=a,nn(e._controlledReadableByteStream,n),fo(e)}function ho(e,t){let n=e._pendingPullIntos.peek();on(e),e._controlledReadableByteStream._state==="closed"?ea(e):ta(e,t,n),et(e)}function lr(e){return e._pendingPullIntos.shift()}function ra(e){let t=e._controlledReadableByteStream;return t._state!=="readable"||e._closeRequested||!e._started?!1:!!(Zn(t)&&ir(t)>0||un(t)&&go(t)>0||mo(e)>0)}function cr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function Ot(e){let t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let a=new TypeError("Insufficient bytes to fill elements in the given buffer");throw Ee(e,a),a}cr(e),Ut(t)}}function fr(e,t){let n=e._controlledReadableByteStream;if(e._closeRequested||n._state!=="readable")return;let a=t.buffer,l=t.byteOffset,f=t.byteLength,h=a;if(e._pendingPullIntos.length>0){let A=e._pendingPullIntos.peek();sr(A.buffer),A.buffer=A.buffer}if(on(e),Zn(n))if(ir(n)===0)ur(e,h,l,f);else{e._pendingPullIntos.length>0&&lr(e);let A=new Uint8Array(h,l,f);Xr(n,A,!1)}else un(n)?(ur(e,h,l,f),fo(e)):ur(e,h,l,f);et(e)}function Ee(e,t){let n=e._controlledReadableByteStream;n._state==="readable"&&(ao(e),Ue(e),cr(e),xo(n,t))}function an(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),n=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),a=Object.create(Wt.prototype);oa(a,e,n),e._byobRequest=a}return e._byobRequest}function mo(e){let t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function dr(e,t){let n=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(n.bytesFilled+t>n.byteLength)throw new RangeError("bytesWritten out of range")}n.buffer=n.buffer,ho(e,t)}function hr(e,t){let n=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(n.byteOffset+n.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(n.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(n.bytesFilled+t.byteLength>n.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let l=t.byteLength;n.buffer=t.buffer,ho(e,l)}function po(e,t,n,a,l,f,h){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Ue(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=f,t._pullAlgorithm=a,t._cancelAlgorithm=l,t._autoAllocateChunkSize=h,t._pendingPullIntos=new E,e._readableStreamController=t;let A=n();q(y(A),()=>{t._started=!0,et(t)},L=>{Ee(t,L)})}function na(e,t,n){let a=Object.create(ft.prototype),l=()=>{},f=()=>y(void 0),h=()=>y(void 0);t.start!==void 0&&(l=()=>t.start(a)),t.pull!==void 0&&(f=()=>t.pull(a)),t.cancel!==void 0&&(h=L=>t.cancel(L));let A=t.autoAllocateChunkSize;if(A===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");po(e,a,l,f,h,n,A)}function oa(e,t,n){e._associatedReadableByteStreamController=t,e._view=n}function sn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function Ft(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function bo(e){return new Mt(e)}function yo(e,t){e._reader._readIntoRequests.push(t)}function ia(e,t,n){let l=e._reader._readIntoRequests.shift();n?l._closeSteps(t):l._chunkSteps(t)}function go(e){return e._reader._readIntoRequests.length}function un(e){let t=e._reader;return!(t===void 0||!tt(t))}class Mt{constructor(t){if(de(t,1,"ReadableStreamBYOBReader"),Kr(t,"First parameter"),Ve(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Xe(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");te(this,t),this._readIntoRequests=new E}get closed(){return tt(this)?this._closedPromise:g(mr("closed"))}cancel(t=void 0){return tt(this)?this._ownerReadableStream===void 0?g(P("cancel")):ne(this,t):g(mr("cancel"))}read(t){if(!tt(this))return g(mr("read"));if(!ArrayBuffer.isView(t))return g(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return g(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return g(new TypeError("view's buffer must have non-zero byteLength"));if(sr(t.buffer),this._ownerReadableStream===void 0)return g(P("read from"));let n,a,l=p((h,A)=>{n=h,a=A});return So(this,t,{_chunkSteps:h=>n({value:h,done:!1}),_closeSteps:h=>n({value:h,done:!0}),_errorSteps:h=>a(h)}),l}releaseLock(){if(!tt(this))throw mr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");k(this)}}}Object.defineProperties(Mt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Mt.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function tt(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Mt}function So(e,t,n){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="errored"?n._errorSteps(a._storedError):Xi(a._readableStreamController,t,n)}function mr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function jt(e,t){let{highWaterMark:n}=e;if(n===void 0)return t;if(ro(n)||n<0)throw new RangeError("Invalid highWaterMark");return n}function pr(e){let{size:t}=e;return t||(()=>1)}function br(e,t){ue(e,t);let n=e?.highWaterMark,a=e?.size;return{highWaterMark:n===void 0?void 0:Jr(n),size:a===void 0?void 0:aa(a,`${t} has member 'size' that`)}}function aa(e,t){return G(e,t),n=>Jr(e(n))}function sa(e,t){ue(e,t);let n=e?.abort,a=e?.close,l=e?.start,f=e?.type,h=e?.write;return{abort:n===void 0?void 0:ua(n,e,`${t} has member 'abort' that`),close:a===void 0?void 0:la(a,e,`${t} has member 'close' that`),start:l===void 0?void 0:ca(l,e,`${t} has member 'start' that`),write:h===void 0?void 0:fa(h,e,`${t} has member 'write' that`),type:f}}function ua(e,t,n){return G(e,n),a=>v(e,t,[a])}function la(e,t,n){return G(e,n),()=>v(e,t,[])}function ca(e,t,n){return G(e,n),a=>w(e,t,[a])}function fa(e,t,n){return G(e,n),(a,l)=>v(e,t,[a,l])}function _o(e,t){if(!dt(e))throw new TypeError(`${t} is not a WritableStream.`)}function da(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let ha=typeof AbortController=="function";function ma(){if(ha)return new AbortController}class It{constructor(t={},n={}){t===void 0?t=null:lt(t,"First parameter");let a=br(n,"Second parameter"),l=sa(t,"First parameter");if(Ro(this),l.type!==void 0)throw new RangeError("Invalid type is specified");let h=pr(a),A=jt(a,1);va(this,l,A,h)}get locked(){if(!dt(this))throw wr("locked");return ht(this)}abort(t=void 0){return dt(this)?ht(this)?g(new TypeError("Cannot abort a stream that already has a writer")):yr(this,t):g(wr("abort"))}close(){return dt(this)?ht(this)?g(new TypeError("Cannot close a stream that already has a writer")):De(this)?g(new TypeError("Cannot close an already-closing stream")):To(this):g(wr("close"))}getWriter(){if(!dt(this))throw wr("getWriter");return wo(this)}}Object.defineProperties(It.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(It.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function wo(e){return new Lt(e)}function pa(e,t,n,a,l=1,f=()=>1){let h=Object.create(It.prototype);Ro(h);let A=Object.create(mt.prototype);return ko(h,A,e,t,n,a,l,f),h}function Ro(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new E,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function dt(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof It}function ht(e){return e._writer!==void 0}function yr(e,t){var n;if(e._state==="closed"||e._state==="errored")return y(void 0);e._writableStreamController._abortReason=t,(n=e._writableStreamController._abortController)===null||n===void 0||n.abort();let a=e._state;if(a==="closed"||a==="errored")return y(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let l=!1;a==="erroring"&&(l=!0,t=void 0);let f=p((h,A)=>{e._pendingAbortRequest={_promise:void 0,_resolve:h,_reject:A,_reason:t,_wasAlreadyErroring:l}});return e._pendingAbortRequest._promise=f,l||cn(e,t),f}function To(e){let t=e._state;if(t==="closed"||t==="errored")return g(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));let n=p((l,f)=>{let h={_resolve:l,_reject:f};e._closeRequest=h}),a=e._writer;return a!==void 0&&e._backpressure&&t==="writable"&&Sn(a),ka(e._writableStreamController),n}function ba(e){return p((n,a)=>{let l={_resolve:n,_reject:a};e._writeRequests.push(l)})}function ln(e,t){if(e._state==="writable"){cn(e,t);return}fn(e)}function cn(e,t){let n=e._writableStreamController;e._state="erroring",e._storedError=t;let a=e._writer;a!==void 0&&Po(a,t),!wa(e)&&n._started&&fn(e)}function fn(e){e._state="errored",e._writableStreamController[K]();let t=e._storedError;if(e._writeRequests.forEach(l=>{l._reject(t)}),e._writeRequests=new E,e._pendingAbortRequest===void 0){gr(e);return}let n=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,n._wasAlreadyErroring){n._reject(t),gr(e);return}let a=e._writableStreamController[ee](n._reason);q(a,()=>{n._resolve(),gr(e)},l=>{n._reject(l),gr(e)})}function ya(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function ga(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,ln(e,t)}function Sa(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let n=e._writer;n!==void 0&&Wo(n)}function _a(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),ln(e,t)}function De(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function wa(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ra(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Ta(e){e._inFlightWriteRequest=e._writeRequests.shift()}function gr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;t!==void 0&&yn(t,e._storedError)}function dn(e,t){let n=e._writer;n!==void 0&&t!==e._backpressure&&(t?Ma(n):Sn(n)),e._backpressure=t}class Lt{constructor(t){if(de(t,1,"WritableStreamDefaultWriter"),_o(t,"First parameter"),ht(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;let n=t._state;if(n==="writable")!De(t)&&t._backpressure?Tr(this):Oo(this),Rr(this);else if(n==="erroring")gn(this,t._storedError),Rr(this);else if(n==="closed")Oo(this),Oa(this);else{let a=t._storedError;gn(this,a),Bo(this,a)}}get closed(){return rt(this)?this._closedPromise:g(nt("closed"))}get desiredSize(){if(!rt(this))throw nt("desiredSize");if(this._ownerWritableStream===void 0)throw qt("desiredSize");return Aa(this)}get ready(){return rt(this)?this._readyPromise:g(nt("ready"))}abort(t=void 0){return rt(this)?this._ownerWritableStream===void 0?g(qt("abort")):Ca(this,t):g(nt("abort"))}close(){if(!rt(this))return g(nt("close"));let t=this._ownerWritableStream;return t===void 0?g(qt("close")):De(t)?g(new TypeError("Cannot close an already-closing stream")):Co(this)}releaseLock(){if(!rt(this))throw nt("releaseLock");this._ownerWritableStream!==void 0&&Eo(this)}write(t=void 0){return rt(this)?this._ownerWritableStream===void 0?g(qt("write to")):Ao(this,t):g(nt("write"))}}Object.defineProperties(Lt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Lt.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function rt(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Lt}function Ca(e,t){let n=e._ownerWritableStream;return yr(n,t)}function Co(e){let t=e._ownerWritableStream;return To(t)}function Pa(e){let t=e._ownerWritableStream,n=t._state;return De(t)||n==="closed"?y(void 0):n==="errored"?g(t._storedError):Co(e)}function Ea(e,t){e._closedPromiseState==="pending"?yn(e,t):Fa(e,t)}function Po(e,t){e._readyPromiseState==="pending"?Fo(e,t):ja(e,t)}function Aa(e){let t=e._ownerWritableStream,n=t._state;return n==="errored"||n==="erroring"?null:n==="closed"?0:$o(t._writableStreamController)}function Eo(e){let t=e._ownerWritableStream,n=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Po(e,n),Ea(e,n),t._writer=void 0,e._ownerWritableStream=void 0}function Ao(e,t){let n=e._ownerWritableStream,a=n._writableStreamController,l=$a(a,t);if(n!==e._ownerWritableStream)return g(qt("write to"));let f=n._state;if(f==="errored")return g(n._storedError);if(De(n)||f==="closed")return g(new TypeError("The stream is closing or closed and cannot be written to"));if(f==="erroring")return g(n._storedError);let h=ba(n);return Da(a,t,l),h}let vo={};class mt{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!hn(this))throw bn("abortReason");return this._abortReason}get signal(){if(!hn(this))throw bn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t=void 0){if(!hn(this))throw bn("error");this._controlledWritableStream._state==="writable"&&Do(this,t)}[ee](t){let n=this._abortAlgorithm(t);return Sr(this),n}[K](){Ue(this)}}Object.defineProperties(mt.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(mt.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function hn(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof mt}function ko(e,t,n,a,l,f,h,A){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Ue(t),t._abortReason=void 0,t._abortController=ma(),t._started=!1,t._strategySizeAlgorithm=A,t._strategyHWM=h,t._writeAlgorithm=a,t._closeAlgorithm=l,t._abortAlgorithm=f;let L=pn(t);dn(e,L);let U=n(),N=y(U);q(N,()=>{t._started=!0,_r(t)},Y=>{t._started=!0,ln(e,Y)})}function va(e,t,n,a){let l=Object.create(mt.prototype),f=()=>{},h=()=>y(void 0),A=()=>y(void 0),L=()=>y(void 0);t.start!==void 0&&(f=()=>t.start(l)),t.write!==void 0&&(h=U=>t.write(U,l)),t.close!==void 0&&(A=()=>t.close()),t.abort!==void 0&&(L=U=>t.abort(U)),ko(e,l,f,h,A,L,n,a)}function Sr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ka(e){tn(e,vo,0),_r(e)}function $a(e,t){try{return e._strategySizeAlgorithm(t)}catch(n){return mn(e,n),1}}function $o(e){return e._strategyHWM-e._queueTotalSize}function Da(e,t,n){try{tn(e,t,n)}catch(l){mn(e,l);return}let a=e._controlledWritableStream;if(!De(a)&&a._state==="writable"){let l=pn(e);dn(a,l)}_r(e)}function _r(e){let t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring"){fn(t);return}if(e._queue.length===0)return;let a=Ki(e);a===vo?Ba(e):Wa(e,a)}function mn(e,t){e._controlledWritableStream._state==="writable"&&Do(e,t)}function Ba(e){let t=e._controlledWritableStream;Ra(t),en(e);let n=e._closeAlgorithm();Sr(e),q(n,()=>{Sa(t)},a=>{_a(t,a)})}function Wa(e,t){let n=e._controlledWritableStream;Ta(n);let a=e._writeAlgorithm(t);q(a,()=>{ya(n);let l=n._state;if(en(e),!De(n)&&l==="writable"){let f=pn(e);dn(n,f)}_r(e)},l=>{n._state==="writable"&&Sr(e),ga(n,l)})}function pn(e){return $o(e)<=0}function Do(e,t){let n=e._controlledWritableStream;Sr(e),cn(n,t)}function wr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function bn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function nt(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function qt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Rr(e){e._closedPromise=p((t,n)=>{e._closedPromise_resolve=t,e._closedPromise_reject=n,e._closedPromiseState="pending"})}function Bo(e,t){Rr(e),yn(e,t)}function Oa(e){Rr(e),Wo(e)}function yn(e,t){e._closedPromise_reject!==void 0&&($(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Fa(e,t){Bo(e,t)}function Wo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function Tr(e){e._readyPromise=p((t,n)=>{e._readyPromise_resolve=t,e._readyPromise_reject=n}),e._readyPromiseState="pending"}function gn(e,t){Tr(e),Fo(e,t)}function Oo(e){Tr(e),Sn(e)}function Fo(e,t){e._readyPromise_reject!==void 0&&($(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Ma(e){Tr(e)}function ja(e,t){gn(e,t)}function Sn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let Mo=typeof DOMException<"u"?DOMException:void 0;function Ia(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function La(){let e=function(n,a){this.message=n||"",this.name=a||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let qa=Ia(Mo)?Mo:La();function jo(e,t,n,a,l,f){let h=ct(e),A=wo(t);e._disturbed=!0;let L=!1,U=y(void 0);return p((N,Y)=>{let ie;if(f!==void 0){if(ie=()=>{let D=new qa("Aborted","AbortError"),x=[];a||x.push(()=>t._state==="writable"?yr(t,D):y(void 0)),l||x.push(()=>e._state==="readable"?Ae(e,D):y(void 0)),he(()=>Promise.all(x.map(Z=>Z())),!0,D)},f.aborted){ie();return}f.addEventListener("abort",ie)}function ve(){return p((D,x)=>{function Z(ge){ge?D():_(yt(),Z,x)}Z(!1)})}function yt(){return L?y(!0):_(A._readyPromise,()=>p((D,x)=>{Dt(h,{_chunkSteps:Z=>{U=_(Ao(A,Z),void 0,i),D(!1)},_closeSteps:()=>D(!0),_errorSteps:x})}))}if(Fe(e,h._closedPromise,D=>{a?Te(!0,D):he(()=>yr(t,D),!0,D)}),Fe(t,A._closedPromise,D=>{l?Te(!0,D):he(()=>Ae(e,D),!0,D)}),ce(e,h._closedPromise,()=>{n?Te():he(()=>Pa(A))}),De(t)||t._state==="closed"){let D=new TypeError("the destination writable stream closed before all data could be piped to it");l?Te(!0,D):he(()=>Ae(e,D),!0,D)}$(ve());function Qe(){let D=U;return _(U,()=>D!==U?Qe():void 0)}function Fe(D,x,Z){D._state==="errored"?Z(D._storedError):M(x,Z)}function ce(D,x,Z){D._state==="closed"?Z():z(x,Z)}function he(D,x,Z){if(L)return;L=!0,t._state==="writable"&&!De(t)?z(Qe(),ge):ge();function ge(){q(D(),()=>Me(x,Z),gt=>Me(!0,gt))}}function Te(D,x){L||(L=!0,t._state==="writable"&&!De(t)?z(Qe(),()=>Me(D,x)):Me(D,x))}function Me(D,x){Eo(A),k(h),f!==void 0&&f.removeEventListener("abort",ie),D?Y(x):N(void 0)}})}class pt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Cr(this))throw Ar("desiredSize");return _n(this)}close(){if(!Cr(this))throw Ar("close");if(!bt(this))throw new TypeError("The stream is not in a state that permits close");xt(this)}enqueue(t=void 0){if(!Cr(this))throw Ar("enqueue");if(!bt(this))throw new TypeError("The stream is not in a state that permits enqueue");return Er(this,t)}error(t=void 0){if(!Cr(this))throw Ar("error");He(this,t)}[oe](t){Ue(this);let n=this._cancelAlgorithm(t);return Pr(this),n}[we](t){let n=this._controlledReadableStream;if(this._queue.length>0){let a=en(this);this._closeRequested&&this._queue.length===0?(Pr(this),Ut(n)):zt(this),t._chunkSteps(a)}else Gn(n,t),zt(this)}}Object.defineProperties(pt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(pt.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function Cr(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof pt}function zt(e){if(!Io(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let n=e._pullAlgorithm();q(n,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,zt(e))},a=>{He(e,a)})}function Io(e){let t=e._controlledReadableStream;return!bt(e)||!e._started?!1:!!(Ve(t)&&ir(t)>0||_n(e)>0)}function Pr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function xt(e){if(!bt(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Pr(e),Ut(t))}function Er(e,t){if(!bt(e))return;let n=e._controlledReadableStream;if(Ve(n)&&ir(n)>0)Xr(n,t,!1);else{let a;try{a=e._strategySizeAlgorithm(t)}catch(l){throw He(e,l),l}try{tn(e,t,a)}catch(l){throw He(e,l),l}}zt(e)}function He(e,t){let n=e._controlledReadableStream;n._state==="readable"&&(Ue(e),Pr(e),xo(n,t))}function _n(e){let t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function za(e){return!Io(e)}function bt(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function Lo(e,t,n,a,l,f,h){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Ue(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=h,t._strategyHWM=f,t._pullAlgorithm=a,t._cancelAlgorithm=l,e._readableStreamController=t;let A=n();q(y(A),()=>{t._started=!0,zt(t)},L=>{He(t,L)})}function xa(e,t,n,a){let l=Object.create(pt.prototype),f=()=>{},h=()=>y(void 0),A=()=>y(void 0);t.start!==void 0&&(f=()=>t.start(l)),t.pull!==void 0&&(h=()=>t.pull(l)),t.cancel!==void 0&&(A=L=>t.cancel(L)),Lo(e,l,f,h,A,n,a)}function Ar(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Ua(e,t){return Xe(e._readableStreamController)?Na(e):Ha(e)}function Ha(e,t){let n=ct(e),a=!1,l=!1,f=!1,h=!1,A,L,U,N,Y,ie=p(ce=>{Y=ce});function ve(){return a?(l=!0,y(void 0)):(a=!0,Dt(n,{_chunkSteps:he=>{S(()=>{l=!1;let Te=he,Me=he;f||Er(U._readableStreamController,Te),h||Er(N._readableStreamController,Me),a=!1,l&&ve()})},_closeSteps:()=>{a=!1,f||xt(U._readableStreamController),h||xt(N._readableStreamController),(!f||!h)&&Y(void 0)},_errorSteps:()=>{a=!1}}),y(void 0))}function yt(ce){if(f=!0,A=ce,h){let he=Bt([A,L]),Te=Ae(e,he);Y(Te)}return ie}function Qe(ce){if(h=!0,L=ce,f){let he=Bt([A,L]),Te=Ae(e,he);Y(Te)}return ie}function Fe(){}return U=wn(Fe,ve,yt),N=wn(Fe,ve,Qe),M(n._closedPromise,ce=>{He(U._readableStreamController,ce),He(N._readableStreamController,ce),(!f||!h)&&Y(void 0)}),[U,N]}function Na(e){let t=ct(e),n=!1,a=!1,l=!1,f=!1,h=!1,A,L,U,N,Y,ie=p(D=>{Y=D});function ve(D){M(D._closedPromise,x=>{D===t&&(Ee(U._readableStreamController,x),Ee(N._readableStreamController,x),(!f||!h)&&Y(void 0))})}function yt(){tt(t)&&(k(t),t=ct(e),ve(t)),Dt(t,{_chunkSteps:x=>{S(()=>{a=!1,l=!1;let Z=x,ge=x;if(!f&&!h)try{ge=io(x)}catch(gt){Ee(U._readableStreamController,gt),Ee(N._readableStreamController,gt),Y(Ae(e,gt));return}f||fr(U._readableStreamController,Z),h||fr(N._readableStreamController,ge),n=!1,a?Fe():l&&ce()})},_closeSteps:()=>{n=!1,f||Ot(U._readableStreamController),h||Ot(N._readableStreamController),U._readableStreamController._pendingPullIntos.length>0&&dr(U._readableStreamController,0),N._readableStreamController._pendingPullIntos.length>0&&dr(N._readableStreamController,0),(!f||!h)&&Y(void 0)},_errorSteps:()=>{n=!1}})}function Qe(D,x){xe(t)&&(k(t),t=bo(e),ve(t));let Z=x?N:U,ge=x?U:N;So(t,D,{_chunkSteps:St=>{S(()=>{a=!1,l=!1;let _t=x?h:f;if(x?f:h)_t||hr(Z._readableStreamController,St);else{let ti;try{ti=io(St)}catch(Tn){Ee(Z._readableStreamController,Tn),Ee(ge._readableStreamController,Tn),Y(Ae(e,Tn));return}_t||hr(Z._readableStreamController,St),fr(ge._readableStreamController,ti)}n=!1,a?Fe():l&&ce()})},_closeSteps:St=>{n=!1;let _t=x?h:f,Mr=x?f:h;_t||Ot(Z._readableStreamController),Mr||Ot(ge._readableStreamController),St!==void 0&&(_t||hr(Z._readableStreamController,St),!Mr&&ge._readableStreamController._pendingPullIntos.length>0&&dr(ge._readableStreamController,0)),(!_t||!Mr)&&Y(void 0)},_errorSteps:()=>{n=!1}})}function Fe(){if(n)return a=!0,y(void 0);n=!0;let D=an(U._readableStreamController);return D===null?yt():Qe(D._view,!1),y(void 0)}function ce(){if(n)return l=!0,y(void 0);n=!0;let D=an(N._readableStreamController);return D===null?yt():Qe(D._view,!0),y(void 0)}function he(D){if(f=!0,A=D,h){let x=Bt([A,L]),Z=Ae(e,x);Y(Z)}return ie}function Te(D){if(h=!0,L=D,f){let x=Bt([A,L]),Z=Ae(e,x);Y(Z)}return ie}function Me(){}return U=zo(Me,Fe,he),N=zo(Me,ce,Te),ve(t),[U,N]}function Ya(e,t){ue(e,t);let n=e,a=n?.autoAllocateChunkSize,l=n?.cancel,f=n?.pull,h=n?.start,A=n?.type;return{autoAllocateChunkSize:a===void 0?void 0:Qn(a,`${t} has member 'autoAllocateChunkSize' that`),cancel:l===void 0?void 0:Va(l,n,`${t} has member 'cancel' that`),pull:f===void 0?void 0:Qa(f,n,`${t} has member 'pull' that`),start:h===void 0?void 0:Ga(h,n,`${t} has member 'start' that`),type:A===void 0?void 0:Za(A,`${t} has member 'type' that`)}}function Va(e,t,n){return G(e,n),a=>v(e,t,[a])}function Qa(e,t,n){return G(e,n),a=>v(e,t,[a])}function Ga(e,t,n){return G(e,n),a=>w(e,t,[a])}function Za(e,t){if(e=`${e}`,e!=="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Ja(e,t){ue(e,t);let n=e?.mode;return{mode:n===void 0?void 0:Ka(n,`${t} has member 'mode' that`)}}function Ka(e,t){if(e=`${e}`,e!=="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Xa(e,t){return ue(e,t),{preventCancel:!!e?.preventCancel}}function qo(e,t){ue(e,t);let n=e?.preventAbort,a=e?.preventCancel,l=e?.preventClose,f=e?.signal;return f!==void 0&&es(f,`${t} has member 'signal' that`),{preventAbort:!!n,preventCancel:!!a,preventClose:!!l,signal:f}}function es(e,t){if(!da(e))throw new TypeError(`${t} is not an AbortSignal.`)}function ts(e,t){ue(e,t);let n=e?.readable;Zr(n,"readable","ReadableWritablePair"),Kr(n,`${t} has member 'readable' that`);let a=e?.writable;return Zr(a,"writable","ReadableWritablePair"),_o(a,`${t} has member 'writable' that`),{readable:n,writable:a}}class Ne{constructor(t={},n={}){t===void 0?t=null:lt(t,"First parameter");let a=br(n,"Second parameter"),l=Ya(t,"First parameter");if(Rn(this),l.type==="bytes"){if(a.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let f=jt(a,0);na(this,l,f)}else{let f=pr(a),h=jt(a,1);xa(this,l,h,f)}}get locked(){if(!Ye(this))throw ot("locked");return Ve(this)}cancel(t=void 0){return Ye(this)?Ve(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):Ae(this,t):g(ot("cancel"))}getReader(t=void 0){if(!Ye(this))throw ot("getReader");return Ja(t,"First parameter").mode===void 0?ct(this):bo(this)}pipeThrough(t,n={}){if(!Ye(this))throw ot("pipeThrough");de(t,1,"pipeThrough");let a=ts(t,"First parameter"),l=qo(n,"Second parameter");if(Ve(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(ht(a.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let f=jo(this,a.writable,l.preventClose,l.preventAbort,l.preventCancel,l.signal);return $(f),a.readable}pipeTo(t,n={}){if(!Ye(this))return g(ot("pipeTo"));if(t===void 0)return g("Parameter 1 is required in 'pipeTo'.");if(!dt(t))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let a;try{a=qo(n,"Second parameter")}catch(l){return g(l)}return Ve(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ht(t)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):jo(this,t,a.preventClose,a.preventAbort,a.preventCancel,a.signal)}tee(){if(!Ye(this))throw ot("tee");let t=Ua(this);return Bt(t)}values(t=void 0){if(!Ye(this))throw ot("values");let n=Xa(t,"First parameter");return Zi(this,n.preventCancel)}}Object.defineProperties(Ne.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ne.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(Ne.prototype,r.asyncIterator,{value:Ne.prototype.values,writable:!0,configurable:!0});function wn(e,t,n,a=1,l=()=>1){let f=Object.create(Ne.prototype);Rn(f);let h=Object.create(pt.prototype);return Lo(f,h,e,t,n,a,l),f}function zo(e,t,n){let a=Object.create(Ne.prototype);Rn(a);let l=Object.create(ft.prototype);return po(a,l,e,t,n,0,void 0),a}function Rn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function Ye(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Ne}function Ve(e){return e._reader!==void 0}function Ae(e,t){if(e._disturbed=!0,e._state==="closed")return y(void 0);if(e._state==="errored")return g(e._storedError);Ut(e);let n=e._reader;n!==void 0&&tt(n)&&(n._readIntoRequests.forEach(l=>{l._closeSteps(void 0)}),n._readIntoRequests=new E);let a=e._readableStreamController[oe](t);return B(a,i)}function Ut(e){e._state="closed";let t=e._reader;t!==void 0&&(V(t),xe(t)&&(t._readRequests.forEach(n=>{n._closeSteps()}),t._readRequests=new E))}function xo(e,t){e._state="errored",e._storedError=t;let n=e._reader;n!==void 0&&(j(n,t),xe(n)?(n._readRequests.forEach(a=>{a._errorSteps(t)}),n._readRequests=new E):(n._readIntoRequests.forEach(a=>{a._errorSteps(t)}),n._readIntoRequests=new E))}function ot(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function Uo(e,t){ue(e,t);let n=e?.highWaterMark;return Zr(n,"highWaterMark","QueuingStrategyInit"),{highWaterMark:Jr(n)}}let Ho=e=>e.byteLength;try{Object.defineProperty(Ho,"name",{value:"size",configurable:!0})}catch{}class vr{constructor(t){de(t,1,"ByteLengthQueuingStrategy"),t=Uo(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!Yo(this))throw No("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Yo(this))throw No("size");return Ho}}Object.defineProperties(vr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(vr.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function No(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Yo(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof vr}let Vo=()=>1;try{Object.defineProperty(Vo,"name",{value:"size",configurable:!0})}catch{}class kr{constructor(t){de(t,1,"CountQueuingStrategy"),t=Uo(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!Go(this))throw Qo("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Go(this))throw Qo("size");return Vo}}Object.defineProperties(kr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(kr.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Qo(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Go(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof kr}function rs(e,t){ue(e,t);let n=e?.flush,a=e?.readableType,l=e?.start,f=e?.transform,h=e?.writableType;return{flush:n===void 0?void 0:ns(n,e,`${t} has member 'flush' that`),readableType:a,start:l===void 0?void 0:os(l,e,`${t} has member 'start' that`),transform:f===void 0?void 0:is(f,e,`${t} has member 'transform' that`),writableType:h}}function ns(e,t,n){return G(e,n),a=>v(e,t,[a])}function os(e,t,n){return G(e,n),a=>w(e,t,[a])}function is(e,t,n){return G(e,n),(a,l)=>v(e,t,[a,l])}class $r{constructor(t={},n={},a={}){t===void 0&&(t=null);let l=br(n,"Second parameter"),f=br(a,"Third parameter"),h=rs(t,"First parameter");if(h.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(h.writableType!==void 0)throw new RangeError("Invalid writableType specified");let A=jt(f,0),L=pr(f),U=jt(l,1),N=pr(l),Y,ie=p(ve=>{Y=ve});as(this,ie,U,N,A,L),us(this,h),h.start!==void 0?Y(h.start(this._transformStreamController)):Y(void 0)}get readable(){if(!Zo(this))throw ei("readable");return this._readable}get writable(){if(!Zo(this))throw ei("writable");return this._writable}}Object.defineProperties($r.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty($r.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function as(e,t,n,a,l,f){function h(){return t}function A(ie){return fs(e,ie)}function L(ie){return ds(e,ie)}function U(){return hs(e)}e._writable=pa(h,A,U,L,n,a);function N(){return ms(e)}function Y(ie){return Br(e,ie),y(void 0)}e._readable=wn(h,N,Y,l,f),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Wr(e,!0),e._transformStreamController=void 0}function Zo(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof $r}function Dr(e,t){He(e._readable._readableStreamController,t),Br(e,t)}function Br(e,t){Jo(e._transformStreamController),mn(e._writable._writableStreamController,t),e._backpressure&&Wr(e,!1)}function Wr(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=p(n=>{e._backpressureChangePromise_resolve=n}),e._backpressure=t}class Ht{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!Or(this))throw Fr("desiredSize");let t=this._controlledTransformStream._readable._readableStreamController;return _n(t)}enqueue(t=void 0){if(!Or(this))throw Fr("enqueue");Ko(this,t)}error(t=void 0){if(!Or(this))throw Fr("error");ls(this,t)}terminate(){if(!Or(this))throw Fr("terminate");cs(this)}}Object.defineProperties(Ht.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ht.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function Or(e){return!c(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Ht}function ss(e,t,n,a){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=n,t._flushAlgorithm=a}function us(e,t){let n=Object.create(Ht.prototype),a=f=>{try{return Ko(n,f),y(void 0)}catch(h){return g(h)}},l=()=>y(void 0);t.transform!==void 0&&(a=f=>t.transform(f,n)),t.flush!==void 0&&(l=()=>t.flush(n)),ss(e,n,a,l)}function Jo(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Ko(e,t){let n=e._controlledTransformStream,a=n._readable._readableStreamController;if(!bt(a))throw new TypeError("Readable side is not in a state that permits enqueue");try{Er(a,t)}catch(f){throw Br(n,f),n._readable._storedError}za(a)!==n._backpressure&&Wr(n,!0)}function ls(e,t){Dr(e._controlledTransformStream,t)}function Xo(e,t){let n=e._transformAlgorithm(t);return B(n,void 0,a=>{throw Dr(e._controlledTransformStream,a),a})}function cs(e){let t=e._controlledTransformStream,n=t._readable._readableStreamController;xt(n);let a=new TypeError("TransformStream terminated");Br(t,a)}function fs(e,t){let n=e._transformStreamController;if(e._backpressure){let a=e._backpressureChangePromise;return B(a,()=>{let l=e._writable;if(l._state==="erroring")throw l._storedError;return Xo(n,t)})}return Xo(n,t)}function ds(e,t){return Dr(e,t),y(void 0)}function hs(e){let t=e._readable,n=e._transformStreamController,a=n._flushAlgorithm();return Jo(n),B(a,()=>{if(t._state==="errored")throw t._storedError;xt(t._readableStreamController)},l=>{throw Dr(e,l),t._storedError})}function ms(e){return Wr(e,!1),e._backpressureChangePromise}function Fr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function ei(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}o.ByteLengthQueuingStrategy=vr,o.CountQueuingStrategy=kr,o.ReadableByteStreamController=ft,o.ReadableStream=Ne,o.ReadableStreamBYOBReader=Mt,o.ReadableStreamBYOBRequest=Wt,o.ReadableStreamDefaultController=pt,o.ReadableStreamDefaultReader=$t,o.TransformStream=$r,o.TransformStreamDefaultController=Ht,o.WritableStream=It,o.WritableStreamDefaultController=mt,o.WritableStreamDefaultWriter=Lt,Object.defineProperty(o,"__esModule",{value:!0})})});var ui=Yt(()=>{if(!globalThis.ReadableStream)try{let o=require("node:process"),{emitWarning:r}=o;try{o.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),o.emitWarning=r}catch(i){throw o.emitWarning=r,i}}catch{Object.assign(globalThis,si())}try{let{Blob:o}=require("buffer");o&&!o.prototype.stream&&(o.prototype.stream=function(i){let s=0,u=this;return new ReadableStream({type:"bytes",async pull(c){let R=await u.slice(s,Math.min(u.size,s+65536)).arrayBuffer();s+=R.byteLength,c.enqueue(new Uint8Array(R)),s===u.size&&c.close()}})})}catch{}});async function*vn(o,r=!0){for(let i of o)if("stream"in i)yield*i.stream();else if(ArrayBuffer.isView(i))if(r){let s=i.byteOffset,u=i.byteOffset+i.byteLength;for(;s!==u;){let c=Math.min(u-s,li),d=i.buffer.slice(s,s+c);s+=d.byteLength,yield new Uint8Array(d)}}else yield i;else{let s=0,u=i;for(;s!==u.size;){let d=await u.slice(s,Math.min(u.size,s+li)).arrayBuffer();s+=d.byteLength,yield new Uint8Array(d)}}}var nu,li,ci,Rs,je,Vt=Nt(()=>{nu=fe(ui(),1);li=65536;ci=class kn{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],i={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof i!="object"&&typeof i!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");i===null&&(i={});let s=new TextEncoder;for(let c of r){let d;ArrayBuffer.isView(c)?d=new Uint8Array(c.buffer.slice(c.byteOffset,c.byteOffset+c.byteLength)):c instanceof ArrayBuffer?d=new Uint8Array(c.slice(0)):c instanceof kn?d=c:d=s.encode(`${c}`),this.#r+=ArrayBuffer.isView(d)?d.byteLength:d.size,this.#e.push(d)}this.#n=`${i.endings===void 0?"transparent":i.endings}`;let u=i.type===void 0?"":String(i.type);this.#t=/^[\x20-\x7E]*$/.test(u)?u:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,i="";for await(let s of vn(this.#e,!1))i+=r.decode(s,{stream:!0});return i+=r.decode(),i}async arrayBuffer(){let r=new Uint8Array(this.size),i=0;for await(let s of vn(this.#e,!1))r.set(s,i),i+=s.length;return r.buffer}stream(){let r=vn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(i){let s=await r.next();s.done?i.close():i.enqueue(s.value)},async cancel(){await r.return()}})}slice(r=0,i=this.size,s=""){let{size:u}=this,c=r<0?Math.max(u+r,0):Math.min(r,u),d=i<0?Math.max(u+i,0):Math.min(i,u),R=Math.max(d-c,0),b=this.#e,m=[],F=0;for(let y of b){if(F>=R)break;let g=ArrayBuffer.isView(y)?y.byteLength:y.size;if(c&&g<=c)c-=g,d-=g;else{let _;ArrayBuffer.isView(y)?(_=y.subarray(c,Math.min(g,d)),F+=_.byteLength):(_=y.slice(c,Math.min(g,d)),F+=_.size),d-=g,m.push(_),c=0}}let p=new kn([],{type:String(s).toLowerCase()});return p.#r=R,p.#e=m,p}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(ci.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Rs=ci,je=Rs});var Ts,Cs,Rt,$n=Nt(()=>{Vt();Ts=class extends je{#e=0;#t="";constructor(r,i,s={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,s),s===null&&(s={});let u=s.lastModified===void 0?Date.now():Number(s.lastModified);Number.isNaN(u)||(this.#e=u),this.#t=String(i)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof je&&/^(File)$/.test(r[Symbol.toStringTag])}},Cs=Ts,Rt=Cs});function hi(o,r=je){var i=`${fi()}${fi()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),s=[],u=`--${i}\r
Content-Disposition: form-data; name="`;return o.forEach((c,d)=>typeof c=="string"?s.push(u+Dn(d)+`"\r
\r
${c.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):s.push(u+Dn(d)+`"; filename="${Dn(c.name,1)}"\r
Content-Type: ${c.type||"application/octet-stream"}\r
\r
`,c,`\r
`)),s.push(`--${i}--`),new r(s,{type:"multipart/form-data; boundary="+i})}var Qt,Ps,Es,fi,As,di,Dn,it,at,Lr=Nt(()=>{Vt();$n();({toStringTag:Qt,iterator:Ps,hasInstance:Es}=Symbol),fi=Math.random,As="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),di=(o,r,i)=>(o+="",/^(Blob|File)$/.test(r&&r[Qt])?[(i=i!==void 0?i+"":r[Qt]=="File"?r.name:"blob",o),r.name!==i||r[Qt]=="blob"?new Rt([r],i,r):r]:[o,r+""]),Dn=(o,r)=>(r?o:o.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),it=(o,r,i)=>{if(r.length<i)throw new TypeError(`Failed to execute '${o}' on 'FormData': ${i} arguments required, but only ${r.length} present.`)},at=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Qt](){return"FormData"}[Ps](){return this.entries()}static[Es](r){return r&&typeof r=="object"&&r[Qt]==="FormData"&&!As.some(i=>typeof r[i]!="function")}append(...r){it("append",arguments,2),this.#e.push(di(...r))}delete(r){it("delete",arguments,1),r+="",this.#e=this.#e.filter(([i])=>i!==r)}get(r){it("get",arguments,1),r+="";for(var i=this.#e,s=i.length,u=0;u<s;u++)if(i[u][0]===r)return i[u][1];return null}getAll(r,i){return it("getAll",arguments,1),i=[],r+="",this.#e.forEach(s=>s[0]===r&&i.push(s[1])),i}has(r){return it("has",arguments,1),r+="",this.#e.some(i=>i[0]===r)}forEach(r,i){it("forEach",arguments,1);for(var[s,u]of this)r.call(i,u,s,this)}set(...r){it("set",arguments,2);var i=[],s=!0;r=di(...r),this.#e.forEach(u=>{u[0]===r[0]?s&&(s=!i.push(r)):i.push(u)}),s&&i.push(r),this.#e=i}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var gi=Yt((bu,yi)=>{if(!globalThis.DOMException)try{let{MessageChannel:o}=require("worker_threads"),r=new o().port1,i=new ArrayBuffer;r.postMessage(i,[i,i])}catch(o){o.constructor.name==="DOMException"&&(globalThis.DOMException=o.constructor)}yi.exports=globalThis.DOMException});var Zt,Si,vs,zr,Wn=Nt(()=>{Zt=require("node:fs"),Si=fe(gi(),1);$n();Vt();({stat:vs}=Zt.promises),zr=class{#e;#t;constructor(r){this.#e=r.path,this.#t=r.start,this.size=r.size,this.lastModified=r.lastModified}slice(r,i){return new zr({path:this.#e,lastModified:this.lastModified,size:i-r,start:this.#t+r})}async*stream(){let{mtimeMs:r}=await vs(this.#e);if(r>this.lastModified)throw new Si.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Zt.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var wi={};ri(wi,{toFormData:()=>Fs});function Os(o){let r=o.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let i=r[2]||r[3]||"",s=i.slice(i.lastIndexOf("\\")+1);return s=s.replace(/%22/g,'"'),s=s.replace(/&#(\d{4});/g,(u,c)=>String.fromCharCode(c)),s}async function Fs(o,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let i=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!i)throw new TypeError("no or bad content-type header, no multipart boundary");let s=new On(i[1]||i[2]),u,c,d,R,b,m,F=[],p=new at,y=M=>{d+=z.decode(M,{stream:!0})},g=M=>{F.push(M)},_=()=>{let M=new Rt(F,m,{type:b});p.append(R,M)},q=()=>{p.append(R,d)},z=new TextDecoder("utf-8");z.decode(),s.onPartBegin=function(){s.onPartData=y,s.onPartEnd=q,u="",c="",d="",R="",b="",m=null,F.length=0},s.onHeaderField=function(M){u+=z.decode(M,{stream:!0})},s.onHeaderValue=function(M){c+=z.decode(M,{stream:!0})},s.onHeaderEnd=function(){if(c+=z.decode(),u=u.toLowerCase(),u==="content-disposition"){let M=c.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);M&&(R=M[2]||M[3]||""),m=Os(c),m&&(s.onPartData=g,s.onPartEnd=_)}else u==="content-type"&&(b=c);c="",u=""};for await(let M of o)s.write(M);return s.end(),p}var Be,J,_i,Ge,xr,Ur,ks,Jt,$s,Ds,Bs,Ws,st,On,Ri=Nt(()=>{Wn();Lr();Be=0,J={START_BOUNDARY:Be++,HEADER_FIELD_START:Be++,HEADER_FIELD:Be++,HEADER_VALUE_START:Be++,HEADER_VALUE:Be++,HEADER_VALUE_ALMOST_DONE:Be++,HEADERS_ALMOST_DONE:Be++,PART_DATA_START:Be++,PART_DATA:Be++,END:Be++},_i=1,Ge={PART_BOUNDARY:_i,LAST_BOUNDARY:_i*=2},xr=10,Ur=13,ks=32,Jt=45,$s=58,Ds=97,Bs=122,Ws=o=>o|32,st=()=>{},On=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=st,this.onHeaderField=st,this.onHeadersEnd=st,this.onHeaderValue=st,this.onPartBegin=st,this.onPartData=st,this.onPartEnd=st,this.boundaryChars={},r=`\r
--`+r;let i=new Uint8Array(r.length);for(let s=0;s<r.length;s++)i[s]=r.charCodeAt(s),this.boundaryChars[i[s]]=!0;this.boundary=i,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=J.START_BOUNDARY}write(r){let i=0,s=r.length,u=this.index,{lookbehind:c,boundary:d,boundaryChars:R,index:b,state:m,flags:F}=this,p=this.boundary.length,y=p-1,g=r.length,_,q,z=S=>{this[S+"Mark"]=i},M=S=>{delete this[S+"Mark"]},B=(S,w,v,O)=>{(w===void 0||w!==v)&&this[S](O&&O.subarray(w,v))},$=(S,w)=>{let v=S+"Mark";v in this&&(w?(B(S,this[v],i,r),delete this[v]):(B(S,this[v],r.length,r),this[v]=0))};for(i=0;i<s;i++)switch(_=r[i],m){case J.START_BOUNDARY:if(b===d.length-2){if(_===Jt)F|=Ge.LAST_BOUNDARY;else if(_!==Ur)return;b++;break}else if(b-1===d.length-2){if(F&Ge.LAST_BOUNDARY&&_===Jt)m=J.END,F=0;else if(!(F&Ge.LAST_BOUNDARY)&&_===xr)b=0,B("onPartBegin"),m=J.HEADER_FIELD_START;else return;break}_!==d[b+2]&&(b=-2),_===d[b+2]&&b++;break;case J.HEADER_FIELD_START:m=J.HEADER_FIELD,z("onHeaderField"),b=0;case J.HEADER_FIELD:if(_===Ur){M("onHeaderField"),m=J.HEADERS_ALMOST_DONE;break}if(b++,_===Jt)break;if(_===$s){if(b===1)return;$("onHeaderField",!0),m=J.HEADER_VALUE_START;break}if(q=Ws(_),q<Ds||q>Bs)return;break;case J.HEADER_VALUE_START:if(_===ks)break;z("onHeaderValue"),m=J.HEADER_VALUE;case J.HEADER_VALUE:_===Ur&&($("onHeaderValue",!0),B("onHeaderEnd"),m=J.HEADER_VALUE_ALMOST_DONE);break;case J.HEADER_VALUE_ALMOST_DONE:if(_!==xr)return;m=J.HEADER_FIELD_START;break;case J.HEADERS_ALMOST_DONE:if(_!==xr)return;B("onHeadersEnd"),m=J.PART_DATA_START;break;case J.PART_DATA_START:m=J.PART_DATA,z("onPartData");case J.PART_DATA:if(u=b,b===0){for(i+=y;i<g&&!(r[i]in R);)i+=p;i-=y,_=r[i]}if(b<d.length)d[b]===_?(b===0&&$("onPartData",!0),b++):b=0;else if(b===d.length)b++,_===Ur?F|=Ge.PART_BOUNDARY:_===Jt?F|=Ge.LAST_BOUNDARY:b=0;else if(b-1===d.length)if(F&Ge.PART_BOUNDARY){if(b=0,_===xr){F&=~Ge.PART_BOUNDARY,B("onPartEnd"),B("onPartBegin"),m=J.HEADER_FIELD_START;break}}else F&Ge.LAST_BOUNDARY&&_===Jt?(B("onPartEnd"),m=J.END,F=0):b=0;if(b>0)c[b-1]=_;else if(u>0){let S=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);B("onPartData",0,u,S),u=0,z("onPartData"),i--}break;case J.END:break;default:throw new Error(`Unexpected state entered: ${m}`)}$("onHeaderField"),$("onHeaderValue"),$("onPartData"),this.index=b,this.state=m,this.flags=F}end(){if(this.state===J.HEADER_FIELD_START&&this.index===0||this.state===J.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==J.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var Js={};ri(Js,{default:()=>Qi});module.exports=_s(Js);var or=fe(wt()),Vi=fe(oi());var Oe=fe(require("react"));var xn=fe(wt());var qi=require("@raycast/api");var ji=fe(require("node:http"),1),Ii=fe(require("node:https"),1),ut=fe(require("node:zlib"),1),_e=fe(require("node:stream"),1),er=require("node:buffer");function ws(o){if(!/^data:/i.test(o))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');o=o.replace(/\r?\n/g,"");let r=o.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let i=o.substring(5,r).split(";"),s="",u=!1,c=i[0]||"text/plain",d=c;for(let F=1;F<i.length;F++)i[F]==="base64"?u=!0:(d+=`;${i[F]}`,i[F].indexOf("charset=")===0&&(s=i[F].substring(8)));!i[0]&&!s.length&&(d+=";charset=US-ASCII",s="US-ASCII");let R=u?"base64":"ascii",b=unescape(o.substring(r+1)),m=Buffer.from(b,R);return m.type=c,m.typeFull=d,m.charset=s,m}var ii=ws;var Ce=fe(require("node:stream"),1),Le=require("node:util"),Se=require("node:buffer");Vt();Lr();var Ie=class extends Error{constructor(r,i){super(r),Error.captureStackTrace(this,this.constructor),this.type=i}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var me=class extends Ie{constructor(r,i,s){super(r,i),s&&(this.code=this.errno=s.code,this.erroredSysCall=s.syscall)}};var qr=Symbol.toStringTag,Bn=o=>typeof o=="object"&&typeof o.append=="function"&&typeof o.delete=="function"&&typeof o.get=="function"&&typeof o.getAll=="function"&&typeof o.has=="function"&&typeof o.set=="function"&&typeof o.sort=="function"&&o[qr]==="URLSearchParams",Gt=o=>o&&typeof o=="object"&&typeof o.arrayBuffer=="function"&&typeof o.type=="string"&&typeof o.stream=="function"&&typeof o.constructor=="function"&&/^(Blob|File)$/.test(o[qr]),mi=o=>typeof o=="object"&&(o[qr]==="AbortSignal"||o[qr]==="EventTarget"),pi=(o,r)=>{let i=new URL(r).hostname,s=new URL(o).hostname;return i===s||i.endsWith(`.${s}`)},bi=(o,r)=>{let i=new URL(r).protocol,s=new URL(o).protocol;return i===s};var Ms=(0,Le.promisify)(Ce.default.pipeline),pe=Symbol("Body internals"),We=class{constructor(r,{size:i=0}={}){let s=null;r===null?r=null:Bn(r)?r=Se.Buffer.from(r.toString()):Gt(r)||Se.Buffer.isBuffer(r)||(Le.types.isAnyArrayBuffer(r)?r=Se.Buffer.from(r):ArrayBuffer.isView(r)?r=Se.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof Ce.default||(r instanceof at?(r=hi(r),s=r.type.split("=")[1]):r=Se.Buffer.from(String(r))));let u=r;Se.Buffer.isBuffer(r)?u=Ce.default.Readable.from(r):Gt(r)&&(u=Ce.default.Readable.from(r.stream())),this[pe]={body:r,stream:u,boundary:s,disturbed:!1,error:null},this.size=i,r instanceof Ce.default&&r.on("error",c=>{let d=c instanceof Ie?c:new me(`Invalid response body while trying to fetch ${this.url}: ${c.message}`,"system",c);this[pe].error=d})}get body(){return this[pe].stream}get bodyUsed(){return this[pe].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:i,byteLength:s}=await Fn(this);return r.slice(i,i+s)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let s=new at,u=new URLSearchParams(await this.text());for(let[c,d]of u)s.append(c,d);return s}let{toFormData:i}=await Promise.resolve().then(()=>(Ri(),wi));return i(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[pe].body&&this[pe].body.type||"",i=await this.arrayBuffer();return new je([i],{type:r})}async json(){let r=await this.text();return JSON.parse(r)}async text(){let r=await Fn(this);return new TextDecoder().decode(r)}buffer(){return Fn(this)}};We.prototype.buffer=(0,Le.deprecate)(We.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(We.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Le.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Fn(o){if(o[pe].disturbed)throw new TypeError(`body used already for: ${o.url}`);if(o[pe].disturbed=!0,o[pe].error)throw o[pe].error;let{body:r}=o;if(r===null)return Se.Buffer.alloc(0);if(!(r instanceof Ce.default))return Se.Buffer.alloc(0);let i=[],s=0;try{for await(let u of r){if(o.size>0&&s+u.length>o.size){let c=new me(`content size at ${o.url} over limit: ${o.size}`,"max-size");throw r.destroy(c),c}s+=u.length,i.push(u)}}catch(u){throw u instanceof Ie?u:new me(`Invalid response body while trying to fetch ${o.url}: ${u.message}`,"system",u)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return i.every(u=>typeof u=="string")?Se.Buffer.from(i.join("")):Se.Buffer.concat(i,s)}catch(u){throw new me(`Could not create Buffer from response body for ${o.url}: ${u.message}`,"system",u)}else throw new me(`Premature close of server response while trying to fetch ${o.url}`)}var Tt=(o,r)=>{let i,s,{body:u}=o[pe];if(o.bodyUsed)throw new Error("cannot clone body after it is used");return u instanceof Ce.default&&typeof u.getBoundary!="function"&&(i=new Ce.PassThrough({highWaterMark:r}),s=new Ce.PassThrough({highWaterMark:r}),u.pipe(i),u.pipe(s),o[pe].stream=i,u=s),u},js=(0,Le.deprecate)(o=>o.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Hr=(o,r)=>o===null?null:typeof o=="string"?"text/plain;charset=UTF-8":Bn(o)?"application/x-www-form-urlencoded;charset=UTF-8":Gt(o)?o.type||null:Se.Buffer.isBuffer(o)||Le.types.isAnyArrayBuffer(o)||ArrayBuffer.isView(o)?null:o instanceof at?`multipart/form-data; boundary=${r[pe].boundary}`:o&&typeof o.getBoundary=="function"?`multipart/form-data;boundary=${js(o)}`:o instanceof Ce.default?null:"text/plain;charset=UTF-8",Ti=o=>{let{body:r}=o[pe];return r===null?0:Gt(r)?r.size:Se.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},Ci=async(o,{body:r})=>{r===null?o.end():await Ms(r,o)};var Mn=require("node:util"),Kt=fe(require("node:http"),1),Nr=typeof Kt.default.validateHeaderName=="function"?Kt.default.validateHeaderName:o=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(o)){let r=new TypeError(`Header name must be a valid HTTP token [${o}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},jn=typeof Kt.default.validateHeaderValue=="function"?Kt.default.validateHeaderValue:(o,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let i=new TypeError(`Invalid character in header content ["${o}"]`);throw Object.defineProperty(i,"code",{value:"ERR_INVALID_CHAR"}),i}},be=class extends URLSearchParams{constructor(r){let i=[];if(r instanceof be){let s=r.raw();for(let[u,c]of Object.entries(s))i.push(...c.map(d=>[u,d]))}else if(r!=null)if(typeof r=="object"&&!Mn.types.isBoxedPrimitive(r)){let s=r[Symbol.iterator];if(s==null)i.push(...Object.entries(r));else{if(typeof s!="function")throw new TypeError("Header pairs must be iterable");i=[...r].map(u=>{if(typeof u!="object"||Mn.types.isBoxedPrimitive(u))throw new TypeError("Each header pair must be an iterable object");return[...u]}).map(u=>{if(u.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...u]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return i=i.length>0?i.map(([s,u])=>(Nr(s),jn(s,String(u)),[String(s).toLowerCase(),String(u)])):void 0,super(i),new Proxy(this,{get(s,u,c){switch(u){case"append":case"set":return(d,R)=>(Nr(d),jn(d,String(R)),URLSearchParams.prototype[u].call(s,String(d).toLowerCase(),String(R)));case"delete":case"has":case"getAll":return d=>(Nr(d),URLSearchParams.prototype[u].call(s,String(d).toLowerCase()));case"keys":return()=>(s.sort(),new Set(URLSearchParams.prototype.keys.call(s)).keys());default:return Reflect.get(s,u,c)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let i=this.getAll(r);if(i.length===0)return null;let s=i.join(", ");return/^content-encoding$/i.test(r)&&(s=s.toLowerCase()),s}forEach(r,i=void 0){for(let s of this.keys())Reflect.apply(r,i,[this.get(s),s,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,i)=>(r[i]=this.getAll(i),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,i)=>{let s=this.getAll(i);return i==="host"?r[i]=s[0]:r[i]=s.length>1?s:s[0],r},{})}};Object.defineProperties(be.prototype,["get","entries","forEach","values"].reduce((o,r)=>(o[r]={enumerable:!0},o),{}));function Pi(o=[]){return new be(o.reduce((r,i,s,u)=>(s%2===0&&r.push(u.slice(s,s+2)),r),[]).filter(([r,i])=>{try{return Nr(r),jn(r,String(i)),!0}catch{return!1}}))}var Is=new Set([301,302,303,307,308]),Yr=o=>Is.has(o);var ke=Symbol("Response internals"),le=class extends We{constructor(r=null,i={}){super(r,i);let s=i.status!=null?i.status:200,u=new be(i.headers);if(r!==null&&!u.has("Content-Type")){let c=Hr(r,this);c&&u.append("Content-Type",c)}this[ke]={type:"default",url:i.url,status:s,statusText:i.statusText||"",headers:u,counter:i.counter,highWaterMark:i.highWaterMark}}get type(){return this[ke].type}get url(){return this[ke].url||""}get status(){return this[ke].status}get ok(){return this[ke].status>=200&&this[ke].status<300}get redirected(){return this[ke].counter>0}get statusText(){return this[ke].statusText}get headers(){return this[ke].headers}get highWaterMark(){return this[ke].highWaterMark}clone(){return new le(Tt(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,i=302){if(!Yr(i))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new le(null,{headers:{location:new URL(r).toString()},status:i})}static error(){let r=new le(null,{status:0,statusText:""});return r[ke].type="error",r}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(le.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Oi=require("node:url"),Fi=require("node:util");var Ei=o=>{if(o.search)return o.search;let r=o.href.length-1,i=o.hash||(o.href[r]==="#"?"#":"");return o.href[r-i.length]==="?"?"?":""};var vi=require("node:net");function Ai(o,r=!1){return o==null||(o=new URL(o),/^(about|blob|data):$/.test(o.protocol))?"no-referrer":(o.username="",o.password="",o.hash="",r&&(o.pathname="",o.search=""),o)}var ki=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),$i="strict-origin-when-cross-origin";function Di(o){if(!ki.has(o))throw new TypeError(`Invalid referrerPolicy: ${o}`);return o}function Ls(o){if(/^(http|ws)s:$/.test(o.protocol))return!0;let r=o.host.replace(/(^\[)|(]$)/g,""),i=(0,vi.isIP)(r);return i===4&&/^127\./.test(r)||i===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:o.host==="localhost"||o.host.endsWith(".localhost")?!1:o.protocol==="file:"}function Ct(o){return/^about:(blank|srcdoc)$/.test(o)||o.protocol==="data:"||/^(blob|filesystem):$/.test(o.protocol)?!0:Ls(o)}function Bi(o,{referrerURLCallback:r,referrerOriginCallback:i}={}){if(o.referrer==="no-referrer"||o.referrerPolicy==="")return null;let s=o.referrerPolicy;if(o.referrer==="about:client")return"no-referrer";let u=o.referrer,c=Ai(u),d=Ai(u,!0);c.toString().length>4096&&(c=d),r&&(c=r(c)),i&&(d=i(d));let R=new URL(o.url);switch(s){case"no-referrer":return"no-referrer";case"origin":return d;case"unsafe-url":return c;case"strict-origin":return Ct(c)&&!Ct(R)?"no-referrer":d.toString();case"strict-origin-when-cross-origin":return c.origin===R.origin?c:Ct(c)&&!Ct(R)?"no-referrer":d;case"same-origin":return c.origin===R.origin?c:"no-referrer";case"origin-when-cross-origin":return c.origin===R.origin?c:d;case"no-referrer-when-downgrade":return Ct(c)&&!Ct(R)?"no-referrer":c;default:throw new TypeError(`Invalid referrerPolicy: ${s}`)}}function Wi(o){let r=(o.get("referrer-policy")||"").split(/[,\s]+/),i="";for(let s of r)s&&ki.has(s)&&(i=s);return i}var se=Symbol("Request internals"),Xt=o=>typeof o=="object"&&typeof o[se]=="object",qs=(0,Fi.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),qe=class extends We{constructor(r,i={}){let s;if(Xt(r)?s=new URL(r.url):(s=new URL(r),r={}),s.username!==""||s.password!=="")throw new TypeError(`${s} is an url with embedded credentials.`);let u=i.method||r.method||"GET";if(/^(delete|get|head|options|post|put)$/i.test(u)&&(u=u.toUpperCase()),!Xt(i)&&"data"in i&&qs(),(i.body!=null||Xt(r)&&r.body!==null)&&(u==="GET"||u==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let c=i.body?i.body:Xt(r)&&r.body!==null?Tt(r):null;super(c,{size:i.size||r.size||0});let d=new be(i.headers||r.headers||{});if(c!==null&&!d.has("Content-Type")){let m=Hr(c,this);m&&d.set("Content-Type",m)}let R=Xt(r)?r.signal:null;if("signal"in i&&(R=i.signal),R!=null&&!mi(R))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let b=i.referrer==null?r.referrer:i.referrer;if(b==="")b="no-referrer";else if(b){let m=new URL(b);b=/^about:(\/\/)?client$/.test(m)?"client":m}else b=void 0;this[se]={method:u,redirect:i.redirect||r.redirect||"follow",headers:d,parsedURL:s,signal:R,referrer:b},this.follow=i.follow===void 0?r.follow===void 0?20:r.follow:i.follow,this.compress=i.compress===void 0?r.compress===void 0?!0:r.compress:i.compress,this.counter=i.counter||r.counter||0,this.agent=i.agent||r.agent,this.highWaterMark=i.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=i.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=i.referrerPolicy||r.referrerPolicy||""}get method(){return this[se].method}get url(){return(0,Oi.format)(this[se].parsedURL)}get headers(){return this[se].headers}get redirect(){return this[se].redirect}get signal(){return this[se].signal}get referrer(){if(this[se].referrer==="no-referrer")return"";if(this[se].referrer==="client")return"about:client";if(this[se].referrer)return this[se].referrer.toString()}get referrerPolicy(){return this[se].referrerPolicy}set referrerPolicy(r){this[se].referrerPolicy=Di(r)}clone(){return new qe(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(qe.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var Mi=o=>{let{parsedURL:r}=o[se],i=new be(o[se].headers);i.has("Accept")||i.set("Accept","*/*");let s=null;if(o.body===null&&/^(post|put)$/i.test(o.method)&&(s="0"),o.body!==null){let R=Ti(o);typeof R=="number"&&!Number.isNaN(R)&&(s=String(R))}s&&i.set("Content-Length",s),o.referrerPolicy===""&&(o.referrerPolicy=$i),o.referrer&&o.referrer!=="no-referrer"?o[se].referrer=Bi(o):o[se].referrer="no-referrer",o[se].referrer instanceof URL&&i.set("Referer",o.referrer),i.has("User-Agent")||i.set("User-Agent","node-fetch"),o.compress&&!i.has("Accept-Encoding")&&i.set("Accept-Encoding","gzip, deflate, br");let{agent:u}=o;typeof u=="function"&&(u=u(r)),!i.has("Connection")&&!u&&i.set("Connection","close");let c=Ei(r),d={path:r.pathname+c,method:o.method,headers:i[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:o.insecureHTTPParser,agent:u};return{parsedURL:r,options:d}};var Vr=class extends Ie{constructor(r,i="aborted"){super(r,i)}};Lr();Wn();var zs=new Set(["data:","http:","https:"]);async function Pt(o,r){return new Promise((i,s)=>{let u=new qe(o,r),{parsedURL:c,options:d}=Mi(u);if(!zs.has(c.protocol))throw new TypeError(`node-fetch cannot load ${o}. URL scheme "${c.protocol.replace(/:$/,"")}" is not supported.`);if(c.protocol==="data:"){let _=ii(u.url),q=new le(_,{headers:{"Content-Type":_.typeFull}});i(q);return}let R=(c.protocol==="https:"?Ii.default:ji.default).request,{signal:b}=u,m=null,F=()=>{let _=new Vr("The operation was aborted.");s(_),u.body&&u.body instanceof _e.default.Readable&&u.body.destroy(_),!(!m||!m.body)&&m.body.emit("error",_)};if(b&&b.aborted){F();return}let p=()=>{F(),g()},y=R(c.toString(),d);b&&b.addEventListener("abort",p);let g=()=>{y.abort(),b&&b.removeEventListener("abort",p)};y.on("error",_=>{s(new me(`request to ${u.url} failed, reason: ${_.message}`,"system",_)),g()}),xs(y,_=>{m&&m.body&&m.body.destroy(_)}),process.version<"v14"&&y.on("socket",_=>{let q;_.prependListener("end",()=>{q=_._eventsCount}),_.prependListener("close",z=>{if(m&&q<_._eventsCount&&!z){let M=new Error("Premature close");M.code="ERR_STREAM_PREMATURE_CLOSE",m.body.emit("error",M)}})}),y.on("response",_=>{y.setTimeout(0);let q=Pi(_.rawHeaders);if(Yr(_.statusCode)){let S=q.get("Location"),w=null;try{w=S===null?null:new URL(S,u.url)}catch{if(u.redirect!=="manual"){s(new me(`uri requested responds with an invalid redirect URL: ${S}`,"invalid-redirect")),g();return}}switch(u.redirect){case"error":s(new me(`uri requested responds with a redirect, redirect mode is set to error: ${u.url}`,"no-redirect")),g();return;case"manual":break;case"follow":{if(w===null)break;if(u.counter>=u.follow){s(new me(`maximum redirect reached at: ${u.url}`,"max-redirect")),g();return}let v={headers:new be(u.headers),follow:u.follow,counter:u.counter+1,agent:u.agent,compress:u.compress,method:u.method,body:Tt(u),signal:u.signal,size:u.size,referrer:u.referrer,referrerPolicy:u.referrerPolicy};if(!pi(u.url,w)||!bi(u.url,w))for(let E of["authorization","www-authenticate","cookie","cookie2"])v.headers.delete(E);if(_.statusCode!==303&&u.body&&r.body instanceof _e.default.Readable){s(new me("Cannot follow redirect with body being a readable stream","unsupported-redirect")),g();return}(_.statusCode===303||(_.statusCode===301||_.statusCode===302)&&u.method==="POST")&&(v.method="GET",v.body=void 0,v.headers.delete("content-length"));let O=Wi(q);O&&(v.referrerPolicy=O),i(Pt(new qe(w,v))),g();return}default:return s(new TypeError(`Redirect option '${u.redirect}' is not a valid value of RequestRedirect`))}}b&&_.once("end",()=>{b.removeEventListener("abort",p)});let z=(0,_e.pipeline)(_,new _e.PassThrough,S=>{S&&s(S)});process.version<"v12.10"&&_.on("aborted",p);let M={url:u.url,status:_.statusCode,statusText:_.statusMessage,headers:q,size:u.size,counter:u.counter,highWaterMark:u.highWaterMark},B=q.get("Content-Encoding");if(!u.compress||u.method==="HEAD"||B===null||_.statusCode===204||_.statusCode===304){m=new le(z,M),i(m);return}let $={flush:ut.default.Z_SYNC_FLUSH,finishFlush:ut.default.Z_SYNC_FLUSH};if(B==="gzip"||B==="x-gzip"){z=(0,_e.pipeline)(z,ut.default.createGunzip($),S=>{S&&s(S)}),m=new le(z,M),i(m);return}if(B==="deflate"||B==="x-deflate"){let S=(0,_e.pipeline)(_,new _e.PassThrough,w=>{w&&s(w)});S.once("data",w=>{(w[0]&15)===8?z=(0,_e.pipeline)(z,ut.default.createInflate(),v=>{v&&s(v)}):z=(0,_e.pipeline)(z,ut.default.createInflateRaw(),v=>{v&&s(v)}),m=new le(z,M),i(m)}),S.once("end",()=>{m||(m=new le(z,M),i(m))});return}if(B==="br"){z=(0,_e.pipeline)(z,ut.default.createBrotliDecompress(),S=>{S&&s(S)}),m=new le(z,M),i(m);return}m=new le(z,M),i(m)}),Ci(y,u).catch(s)})}function xs(o,r){let i=er.Buffer.from(`0\r
\r
`),s=!1,u=!1,c;o.on("response",d=>{let{headers:R}=d;s=R["transfer-encoding"]==="chunked"&&!R["content-length"]}),o.on("socket",d=>{let R=()=>{if(s&&!u){let m=new Error("Premature close");m.code="ERR_STREAM_PREMATURE_CLOSE",r(m)}},b=m=>{u=er.Buffer.compare(m.slice(-5),i)===0,!u&&c&&(u=er.Buffer.compare(c.slice(-3),i.slice(0,3))===0&&er.Buffer.compare(m.slice(-2),i.slice(3))===0),c=m};d.prependListener("close",R),d.on("data",b),o.on("close",()=>{d.removeListener("close",R),d.removeListener("data",b)})})}var Us=o=>Buffer.from(o).toString("base64"),In=o=>({Authorization:`Basic ${Us(`${o}:api_token`)}`}),Li=(o,r)=>({get:async i=>{let s=await Pt(r+i,{headers:In(o)});if(!s.ok)throw new Error(`${s.status} ${s.statusText}`);return await s.json()},post:async(i,s)=>{let u=await Pt(r+i,{method:"POST",headers:{...In(o),"Content-Type":"application/json"},body:JSON.stringify(s)});if(!u.ok)throw new Error(`${u.status} ${u.statusText}, ${await u.text()}`);return await u.json()},patch:async(i,s)=>{let u=await Pt(r+i,{method:"PATCH",headers:{...In(o),"Content-Type":"application/json"},body:JSON.stringify(s)});if(!u.ok)throw new Error(`${u.status} ${u.statusText}, ${await u.text()}`);return await u.json()}});var Hs=function({togglApiToken:o,hideArchivedProjects:r}){let s=Li(o,"https://api.track.toggl.com/api/v9");return{getMe:()=>s.get("/me"),getWorkspaces:()=>s.get("/workspaces"),getWorkspaceProjects:async u=>{let c=await s.get(`/workspaces/${u}/projects?per_page=500`)||[];return c.push({id:-1,workspace_id:u,client_id:-1,name:"No project",billable:!1,color:"",active:!0}),r?c.filter(d=>d.active):c},createTimeEntry:({projectId:u,workspaceId:c,description:d,tags:R,billable:b})=>{let m=new Date;return s.post(`/workspaces/${c}/time_entries`,{billable:b,created_with:"raycast-toggl-track",description:d,duration:Math.floor(-1*m.getTime()/1e3),project_id:u!==-1?u:void 0,start:m.toISOString(),tags:R,workspace_id:c})},getRunningTimeEntry:async()=>s.get("/me/time_entries/current"),getWorkspaceClients:u=>s.get(`/workspaces/${u}/clients`),getWorkspaceTags:u=>s.get(`/workspaces/${u}/tags`),stopTimeEntry:({id:u,workspaceId:c})=>s.patch(`/workspaces/${c}/time_entries/${u}/stop`,{}),getTimeEntries:({startDate:u,endDate:c})=>s.get(`/me/time_entries?start_date=${u.toISOString()}&end_date=${c.toISOString()}`)}},Ns=(0,qi.getPreferenceValues)(),Ys=Hs(Ns),ye=Ys;var Ln=require("@raycast/api"),qn=fe(wt());function Vs({key:o,fetch:r,expirySeconds:i}){let s=null,u=null,c=async()=>{if(s)return s;u=(0,qn.default)().toISOString(),s=(async()=>{let b=await r();return await Ln.LocalStorage.setItem(o,JSON.stringify({lastRefresh:u,data:b})),b})(),await s;let R=s;return s=null,R};return{get:async()=>{let d=await Ln.LocalStorage.getItem(o);if(d){let{lastRefresh:R,data:b}=JSON.parse(d);if(R&&(0,qn.default)().diff(R,"second")<i)return Promise.resolve(b)}return c()},refresh:c,lastRefresh:u}}var Ze=Vs;function zn(o){return async()=>{let r=await re.workspaces.get();return(await Promise.all(r.map(async s=>await o(s.id)||[]))).flat()}}var re={me:Ze({key:"me",fetch:ye.getMe,expirySeconds:3600}),projects:Ze({key:"projects",fetch:zn(ye.getWorkspaceProjects),expirySeconds:60}),workspaces:Ze({key:"workspaces",fetch:ye.getWorkspaces,expirySeconds:3600}),clients:Ze({key:"clients",fetch:zn(ye.getWorkspaceClients),expirySeconds:60}),runningTimeEntry:Ze({key:"runningTimeEntry",fetch:ye.getRunningTimeEntry,expirySeconds:10}),tags:Ze({key:"tags",fetch:zn(ye.getWorkspaceTags),expirySeconds:60*5}),timeEntries:Ze({key:"timeEntries",fetch:()=>ye.getTimeEntries({startDate:(0,xn.default)().subtract(1,"week").toDate(),endDate:(0,xn.default)().toDate()}),expirySeconds:60*5})};async function zi(){return{me:await re.me.get(),projects:await re.projects.get(),workspaces:await re.workspaces.get(),clients:await re.clients.get(),tags:await re.tags.get(),runningTimeEntry:await re.runningTimeEntry.get(),timeEntries:await re.timeEntries.get()}}async function Un(){await Promise.all([re.me.refresh(),re.projects.refresh(),re.workspaces.refresh(),re.clients.refresh(),re.tags.refresh(),re.runningTimeEntry.refresh(),re.timeEntries.refresh()])}var Hn=fe(wt()),Qr=require("react");function tr(){let[o,r]=(0,Qr.useState)((0,Hn.default)());return(0,Qr.useEffect)(()=>{let i=setInterval(()=>{r((0,Hn.default)())},1e3);return()=>{clearInterval(i)}},[]),o}function xi(o,r,i){let s=o.reduce((u,c)=>{let d=i.find(m=>m.id===c.client_id),R=r.find(m=>m.id===c.workspace_id);if(!R)return u;let b=R.name+(d?` (${d.name})`:"");return u[b]||(u[b]={key:b,client:d,workspace:R,projects:[]}),u[b].projects.push(c),u},{});return Object.values(s).sort((u,c)=>u.key.localeCompare(c.key))}var Et=require("@raycast/api"),Ni=require("react/jsx-runtime"),Ui=Object.freeze({me:null,clients:[],projects:[],tags:[],workspaces:[],timeEntries:[],runningTimeEntry:null}),Hi=Oe.default.createContext({...Ui,projectGroups:[],isLoading:!0,isValidToken:!0}),rr=({children:o})=>{let[r,i]=(0,Oe.useState)(!0),[s,u]=(0,Oe.useState)(Ui),[c,d]=(0,Oe.useState)([]),[R,b]=(0,Oe.useState)(!0),m=tr();return(0,Oe.useEffect)(()=>{(async()=>{try{let p=await zi();u(p);let y=xi(p.projects,p.workspaces,p.clients);d(y)}catch(p){p.message.includes("403")&&(Et.LocalStorage.clear(),b(!1)),(0,Et.showToast)(Et.Toast.Style.Failure,"Failed to load data from Toggl. Please try again.")}i(!1)})()},[m]),(0,Ni.jsx)(Hi.Provider,{value:{isLoading:r,...s,projectGroups:c,isValidToken:R},children:o})},At=()=>Oe.default.useContext(Hi);var ae=require("@raycast/api"),Nn=fe(wt());var nr=require("react/jsx-runtime");function Qs({runningTimeEntry:o}){let r=tr(),{projects:i}=At(),s=c=>i.find(d=>d.id===c),u=async()=>{await(0,ae.showToast)(ae.Toast.Style.Animated,"Stopping time entry...");try{await ye.stopTimeEntry({id:o.id,workspaceId:o.workspace_id}),await re.runningTimeEntry.refresh(),await re.timeEntries.refresh(),await(0,ae.showToast)(ae.Toast.Style.Success,"Stopped time entry")}catch{await(0,ae.showToast)(ae.Toast.Style.Failure,"Failed to stop time entry")}};return(0,nr.jsx)(ae.List.Section,{title:"Running time entry",children:(0,nr.jsx)(ae.List.Item,{title:o.description||"No description",subtitle:(o.billable?"$  ":"")+Nn.default.duration((0,Nn.default)(r).diff(o.start),"milliseconds").format("HH:mm:ss"),accessoryTitle:s(o?.project_id)?.name,accessoryIcon:{source:ae.Icon.Dot,tintColor:s(o?.project_id)?.color},icon:{source:ae.Icon.Clock,tintColor:s(o?.project_id)?.color},actions:(0,nr.jsx)(ae.ActionPanel,{children:(0,nr.jsx)(ae.Action.SubmitForm,{icon:{source:ae.Icon.Clock},onSubmit:u,title:"Stop Time Entry"})})})},"running-time-entry")}var Yi=Qs;var H=require("@raycast/api");var ze=require("@raycast/api");var Q=require("@raycast/api");var vt=require("react"),Pe=require("react/jsx-runtime");function Gs({project:o,description:r}){let i=(0,Q.useNavigation)(),{projects:s,tags:u,isLoading:c,projectGroups:d,me:R}=At(),[b,m]=(0,vt.useState)(o),[F,p]=(0,vt.useState)([]),[y,g]=(0,vt.useState)(!1);async function _(B){let $=b?.workspace_id||R?.default_workspace_id;if(!$){await(0,Q.showToast)(Q.Toast.Style.Failure,"Failed to start time entry");return}try{await ye.createTimeEntry({projectId:b?.id,workspaceId:$,description:B.description,tags:F,billable:y}),await(0,Q.showToast)(Q.Toast.Style.Animated,"Starting time entry..."),await re.runningTimeEntry.refresh(),await(0,Q.showToast)(Q.Toast.Style.Success,"Started time entry"),i.pop(),await(0,Q.clearSearchBar)()}catch{await(0,Q.showToast)(Q.Toast.Style.Failure,"Failed to start time entry")}}let q=(0,vt.useMemo)(()=>u.filter(B=>B.workspace_id===b?.workspace_id),[u,b]),z=B=>{let $=s.find(S=>S.id===parseInt(B));$&&m($)},M=B=>{p(B)};return(0,Pe.jsxs)(Q.Form,{isLoading:c,actions:(0,Pe.jsx)(Q.ActionPanel,{children:(0,Pe.jsx)(Q.Action.SubmitForm,{title:"Create Time Entry",onSubmit:_})}),children:[(0,Pe.jsx)(Q.Form.TextField,{id:"description",title:"Description",defaultValue:r}),(0,Pe.jsx)(Q.Form.Dropdown,{id:"project",title:"Project",defaultValue:b?.id.toString(),onChange:z,children:d.map(B=>(0,Pe.jsx)(Q.Form.Dropdown.Section,{title:`${B.workspace.name} ${B.client?.name?`(${B.client?.name})`:""}`,children:B.projects.map($=>(0,Pe.jsx)(Q.Form.Dropdown.Item,{value:$.id.toString(),title:$.name,icon:{source:Q.Icon.Circle,tintColor:$.color}},$.id))},B.key))}),(0,Pe.jsx)(Q.Form.TagPicker,{id:"tags",title:"Tags",onChange:M,children:q.map(B=>(0,Pe.jsx)(Q.Form.TagPicker.Item,{value:B.name.toString(),title:B.name},B.id))}),b?.billable&&(0,Pe.jsx)(Q.Form.Checkbox,{id:"billable",label:"",title:"Billable",value:y,onChange:g})]})}var Gr=Gs;var kt=require("react/jsx-runtime");function Yn({project:o,subtitle:r,accessoryTitle:i}){return(0,kt.jsx)(ze.List.Item,{icon:{source:ze.Icon.Circle,tintColor:o?.color},title:o?.name||"No project",subtitle:r,accessoryTitle:i,keywords:r?.split(" ")||[],actions:(0,kt.jsx)(ze.ActionPanel,{children:(0,kt.jsx)(ze.Action.Push,{title:"Create Time Entry",icon:ze.Icon.Clock,target:(0,kt.jsx)(rr,{children:(0,kt.jsx)(Gr,{project:o})})})})})}var X=require("react/jsx-runtime");or.default.extend(Vi.default);function Zs(){let{isLoading:o,isValidToken:r,projectGroups:i,runningTimeEntry:s,timeEntries:u,projects:c}=At(),d=p=>c.find(y=>y.id===p),R=u.sort((p,y)=>new Date(y.at).getTime()-new Date(p.at).getTime()).reduce((p,y)=>p.find(g=>g.description===y.description&&g.project_id===y.project_id)?p:[...p,y],[]),b=u.filter(p=>(0,or.default)(p.start).isSame((0,or.default)(),"day")).reduce((p,y)=>p+y.duration,0)+(s?(0,or.default)().diff(s.start,"second"):0);function m(p){let y=Math.floor(p/3600);p%=3600;let g=Math.floor(p/60),_=p%60;return`${y.toString().padStart(2,"0")}:${g.toString().padStart(2,"0")}:${_.toString().padStart(2,"0")}`}async function F(p){await(0,H.showToast)(H.Toast.Style.Animated,"Starting timer...");try{await ye.createTimeEntry({projectId:p.project_id,workspaceId:p.workspace_id,description:p.description,tags:p.tags,billable:p.billable}),await re.runningTimeEntry.refresh(),await(0,H.showToast)(H.Toast.Style.Success,"Time entry resumed"),await(0,H.clearSearchBar)({forceScrollToTop:!0})}catch{await(0,H.showToast)(H.Toast.Style.Failure,"Failed to resume time entry")}}return(0,X.jsx)(H.List,{isLoading:o,throttle:!0,navigationTitle:o?void 0:`Today: ${m(b)}`,children:r?!o&&(0,X.jsxs)(X.Fragment,{children:[s&&(0,X.jsx)(Yi,{runningTimeEntry:s}),(0,X.jsx)(H.List.Section,{title:"Actions",children:(0,X.jsx)(H.List.Item,{title:"Create a new time entry",icon:"command-icon.png",actions:(0,X.jsxs)(H.ActionPanel,{children:[(0,X.jsx)(H.Action.Push,{title:"Create Time Entry",icon:{source:H.Icon.Clock},target:(0,X.jsx)(rr,{children:(0,X.jsx)(Gr,{})})}),(0,X.jsx)(H.ActionPanel.Section,{children:(0,X.jsx)(H.Action.SubmitForm,{title:"Refresh",icon:{source:H.Icon.RotateClockwise},shortcut:{modifiers:["cmd"],key:"r"},onSubmit:Un})})]})})}),R.length>0&&(0,X.jsx)(H.List.Section,{title:"Resume recent time entry",children:R.map(p=>(0,X.jsx)(H.List.Item,{keywords:[p.description,d(p.project_id)?.name||""],title:p.description||"No description",subtitle:p.billable?"$":"",accessoryTitle:d(p?.project_id)?.name,accessoryIcon:{source:H.Icon.Dot,tintColor:d(p?.project_id)?.color},icon:{source:H.Icon.Circle,tintColor:d(p?.project_id)?.color},actions:(0,X.jsxs)(H.ActionPanel,{children:[(0,X.jsx)(H.Action.SubmitForm,{title:"Resume Time Entry",onSubmit:()=>F(p),icon:{source:H.Icon.Clock}}),(0,X.jsx)(H.Action.SubmitForm,{title:"Refresh",icon:{source:H.Icon.RotateClockwise},onSubmit:Un})]})},p.id))}),(0,X.jsx)(H.List.Section,{title:"Projects",children:i&&i.map(p=>p.projects.map(y=>(0,X.jsx)(Yn,{project:y,subtitle:p.client?.name,accessoryTitle:p.workspace.name},y.id)))})]}):(0,X.jsx)(H.List.Item,{icon:H.Icon.ExclamationMark,title:"Invalid API Key Detected",accessoryTitle:"Go to Extensions \u2192 Toggl Track"})})}function Qi(){return(0,X.jsx)(rr,{children:(0,X.jsx)(Zs,{})})}
/*! Bundled license information:

fetch-blob/index.js:
  (*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

formdata-polyfill/esm.min.js:
  (*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)

node-domexception/index.js:
  (*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> *)
*/
