"use strict";var Tu=Object.create;var Er=Object.defineProperty;var Eu=Object.getOwnPropertyDescriptor;var Cu=Object.getOwnPropertyNames;var Pu=Object.getPrototypeOf,Au=Object.prototype.hasOwnProperty;var It=(n,r)=>()=>(n&&(r=n(n=0)),r);var A=(n,r)=>()=>(r||n((r={exports:{}}).exports,r),r.exports),Ti=(n,r)=>{for(var o in r)Er(n,o,{get:r[o],enumerable:!0})},Ei=(n,r,o,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let a of Cu(r))!Au.call(n,a)&&a!==o&&Er(n,a,{get:()=>r[a],enumerable:!(i=Eu(r,a))||i.enumerable});return n};var ce=(n,r,o)=>(o=n!=null?Tu(Pu(n)):{},Ei(r||!n||!n.__esModule?Er(o,"default",{value:n,enumerable:!0}):o,n)),vu=n=>Ei(Er({},"__esModule",{value:!0}),n);var Ai=A((Cr,Pi)=>{(function(n,r){typeof Cr=="object"&&typeof Pi<"u"?r(Cr):typeof define=="function"&&define.amd?define(["exports"],r):(n=typeof globalThis<"u"?globalThis:n||self,r(n.WebStreamsPolyfill={}))})(Cr,function(n){"use strict";let r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let a=i();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let f=o,p=Promise,m=Promise.prototype.then,b=Promise.resolve.bind(p),w=Promise.reject.bind(p);function T(e){return new p(e)}function S(e){return b(e)}function g(e){return w(e)}function y(e,t,s){return m.call(e,t,s)}function C(e,t,s){y(y(e,t,s),void 0,f)}function P(e,t){C(e,t)}function v(e,t){C(e,void 0,t)}function W(e,t,s){return y(e,t,s)}function U(e){y(e,void 0,f)}let B=(()=>{let e=a&&a.queueMicrotask;if(typeof e=="function")return e;let t=S(void 0);return s=>y(t,s)})();function z(e,t,s){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,t,s)}function x(e,t,s){try{return S(z(e,t,s))}catch(l){return g(l)}}let ne=16384;class K{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(t){let s=this._back,l=s;s._elements.length===ne-1&&(l={_elements:[],_next:void 0}),s._elements.push(t),l!==s&&(this._back=l,s._next=l),++this._size}shift(){let t=this._front,s=t,l=this._cursor,c=l+1,d=t._elements,h=d[l];return c===ne&&(s=t._next,c=0),--this._size,this._cursor=c,t!==s&&(this._front=s),d[l]=void 0,h}forEach(t){let s=this._cursor,l=this._front,c=l._elements;for(;(s!==c.length||l._next!==void 0)&&!(s===c.length&&(l=l._next,c=l._elements,s=0,c.length===0));)t(c[s]),++s}peek(){let t=this._front,s=this._cursor;return t._elements[s]}}function ao(e,t){e._ownerReadableStream=t,t._reader=e,t._state==="readable"?Zr(e):t._state==="closed"?Za(e):lo(e,t._storedError)}function Xr(e,t){let s=e._ownerReadableStream;return se(s,t)}function pe(e){e._ownerReadableStream._state==="readable"?Jr(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):Ja(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function Ve(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function Zr(e){e._closedPromise=T((t,s)=>{e._closedPromise_resolve=t,e._closedPromise_reject=s})}function lo(e,t){Zr(e),Jr(e,t)}function Za(e){Zr(e),uo(e)}function Jr(e,t){e._closedPromise_reject!==void 0&&(U(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function Ja(e,t){lo(e,t)}function uo(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let co=r("[[AbortSteps]]"),fo=r("[[ErrorSteps]]"),en=r("[[CancelSteps]]"),tn=r("[[PullSteps]]"),ho=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},el=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function tl(e){return typeof e=="object"||typeof e=="function"}function be(e,t){if(e!==void 0&&!tl(e))throw new TypeError(`${t} is not an object.`)}function oe(e,t){if(typeof e!="function")throw new TypeError(`${t} is not a function.`)}function rl(e){return typeof e=="object"&&e!==null||typeof e=="function"}function mo(e,t){if(!rl(e))throw new TypeError(`${t} is not an object.`)}function ye(e,t,s){if(e===void 0)throw new TypeError(`Parameter ${t} is required in '${s}'.`)}function rn(e,t,s){if(e===void 0)throw new TypeError(`${t} is required in '${s}'.`)}function nn(e){return Number(e)}function po(e){return e===0?0:e}function nl(e){return po(el(e))}function bo(e,t){let l=Number.MAX_SAFE_INTEGER,c=Number(e);if(c=po(c),!ho(c))throw new TypeError(`${t} is not a finite number`);if(c=nl(c),c<0||c>l)throw new TypeError(`${t} is outside the accepted range of ${0} to ${l}, inclusive`);return!ho(c)||c===0?0:c}function on(e,t){if(!ve(e))throw new TypeError(`${t} is not a ReadableStream.`)}function Ye(e){return new bt(e)}function yo(e,t){e._reader._readRequests.push(t)}function sn(e,t,s){let c=e._reader._readRequests.shift();s?c._closeSteps():c._chunkSteps(t)}function Gt(e){return e._reader._readRequests.length}function go(e){let t=e._reader;return!(t===void 0||!Ee(t))}class bt{constructor(t){if(ye(t,1,"ReadableStreamDefaultReader"),on(t,"First parameter"),ke(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");ao(this,t),this._readRequests=new K}get closed(){return Ee(this)?this._closedPromise:g(Vt("closed"))}cancel(t=void 0){return Ee(this)?this._ownerReadableStream===void 0?g(Ve("cancel")):Xr(this,t):g(Vt("cancel"))}read(){if(!Ee(this))return g(Vt("read"));if(this._ownerReadableStream===void 0)return g(Ve("read from"));let t,s,l=T((d,h)=>{t=d,s=h});return yt(this,{_chunkSteps:d=>t({value:d,done:!1}),_closeSteps:()=>t({value:void 0,done:!0}),_errorSteps:d=>s(d)}),l}releaseLock(){if(!Ee(this))throw Vt("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");pe(this)}}}Object.defineProperties(bt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(bt.prototype,r.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ee(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof bt}function yt(e,t){let s=e._ownerReadableStream;s._disturbed=!0,s._state==="closed"?t._closeSteps():s._state==="errored"?t._errorSteps(s._storedError):s._readableStreamController[tn](t)}function Vt(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let So=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class _o{constructor(t,s){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=t,this._preventCancel=s}next(){let t=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?W(this._ongoingPromise,t,t):t(),this._ongoingPromise}return(t){let s=()=>this._returnSteps(t);return this._ongoingPromise?W(this._ongoingPromise,s,s):s()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let t=this._reader;if(t._ownerReadableStream===void 0)return g(Ve("iterate"));let s,l,c=T((h,_)=>{s=h,l=_});return yt(t,{_chunkSteps:h=>{this._ongoingPromise=void 0,B(()=>s({value:h,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,pe(t),s({value:void 0,done:!0})},_errorSteps:h=>{this._ongoingPromise=void 0,this._isFinished=!0,pe(t),l(h)}}),c}_returnSteps(t){if(this._isFinished)return Promise.resolve({value:t,done:!0});this._isFinished=!0;let s=this._reader;if(s._ownerReadableStream===void 0)return g(Ve("finish iterating"));if(!this._preventCancel){let l=Xr(s,t);return pe(s),W(l,()=>({value:t,done:!0}))}return pe(s),S({value:t,done:!0})}}let wo={next(){return Ro(this)?this._asyncIteratorImpl.next():g(To("next"))},return(e){return Ro(this)?this._asyncIteratorImpl.return(e):g(To("return"))}};So!==void 0&&Object.setPrototypeOf(wo,So);function ol(e,t){let s=Ye(e),l=new _o(s,t),c=Object.create(wo);return c._asyncIteratorImpl=l,c}function Ro(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof _o}catch{return!1}}function To(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let Eo=Number.isNaN||function(e){return e!==e};function gt(e){return e.slice()}function Co(e,t,s,l,c){new Uint8Array(e).set(new Uint8Array(s,l,c),t)}function Zf(e){return e}function Yt(e){return!1}function Po(e,t,s){if(e.slice)return e.slice(t,s);let l=s-t,c=new ArrayBuffer(l);return Co(c,0,e,t,l),c}function il(e){return!(typeof e!="number"||Eo(e)||e<0)}function Ao(e){let t=Po(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(t)}function an(e){let t=e._queue.shift();return e._queueTotalSize-=t.size,e._queueTotalSize<0&&(e._queueTotalSize=0),t.value}function ln(e,t,s){if(!il(s)||s===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:t,size:s}),e._queueTotalSize+=s}function sl(e){return e._queue.peek().value}function Ce(e){e._queue=new K,e._queueTotalSize=0}class St{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!un(this))throw hn("view");return this._view}respond(t){if(!un(this))throw hn("respond");if(ye(t,1,"respond"),t=bo(t,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Yt(this._view.buffer),Jt(this._associatedReadableByteStreamController,t)}respondWithNewView(t){if(!un(this))throw hn("respondWithNewView");if(ye(t,1,"respondWithNewView"),!ArrayBuffer.isView(t))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");Yt(t.buffer),er(this._associatedReadableByteStreamController,t)}}Object.defineProperties(St.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(St.prototype,r.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class Qe{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!qe(this))throw wt("byobRequest");return dn(this)}get desiredSize(){if(!qe(this))throw wt("desiredSize");return Wo(this)}close(){if(!qe(this))throw wt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let t=this._controlledReadableByteStream._state;if(t!=="readable")throw new TypeError(`The stream (in ${t} state) is not in the readable state and cannot be closed`);_t(this)}enqueue(t){if(!qe(this))throw wt("enqueue");if(ye(t,1,"enqueue"),!ArrayBuffer.isView(t))throw new TypeError("chunk must be an array buffer view");if(t.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(t.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let s=this._controlledReadableByteStream._state;if(s!=="readable")throw new TypeError(`The stream (in ${s} state) is not in the readable state and cannot be enqueued to`);Zt(this,t)}error(t=void 0){if(!qe(this))throw wt("error");ie(this,t)}[en](t){vo(this),Ce(this);let s=this._cancelAlgorithm(t);return Xt(this),s}[tn](t){let s=this._controlledReadableByteStream;if(this._queueTotalSize>0){let c=this._queue.shift();this._queueTotalSize-=c.byteLength,xo(this);let d=new Uint8Array(c.buffer,c.byteOffset,c.byteLength);t._chunkSteps(d);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let c;try{c=new ArrayBuffer(l)}catch(h){t._errorSteps(h);return}let d={buffer:c,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}yo(s,t),We(this)}}Object.defineProperties(Qe.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Qe.prototype,r.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function qe(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof Qe}function un(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof St}function We(e){if(!cl(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();C(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,We(e))},l=>{ie(e,l)})}function vo(e){fn(e),e._pendingPullIntos=new K}function cn(e,t){let s=!1;e._state==="closed"&&(s=!0);let l=ko(t);t.readerType==="default"?sn(e,l,s):hl(e,l,s)}function ko(e){let t=e.bytesFilled,s=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,t/s)}function Qt(e,t,s,l){e._queue.push({buffer:t,byteOffset:s,byteLength:l}),e._queueTotalSize+=l}function Bo(e,t){let s=t.elementSize,l=t.bytesFilled-t.bytesFilled%s,c=Math.min(e._queueTotalSize,t.byteLength-t.bytesFilled),d=t.bytesFilled+c,h=d-d%s,_=c,E=!1;h>l&&(_=h-t.bytesFilled,E=!0);let I=e._queue;for(;_>0;){let O=I.peek(),q=Math.min(_,O.byteLength),$=t.byteOffset+t.bytesFilled;Co(t.buffer,$,O.buffer,O.byteOffset,q),O.byteLength===q?I.shift():(O.byteOffset+=q,O.byteLength-=q),e._queueTotalSize-=q,Io(e,q,t),_-=q}return E}function Io(e,t,s){s.bytesFilled+=t}function xo(e){e._queueTotalSize===0&&e._closeRequested?(Xt(e),kt(e._controlledReadableByteStream)):We(e)}function fn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function Oo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let t=e._pendingPullIntos.peek();Bo(e,t)&&(Kt(e),cn(e._controlledReadableByteStream,t))}}function al(e,t,s){let l=e._controlledReadableByteStream,c=1;t.constructor!==DataView&&(c=t.constructor.BYTES_PER_ELEMENT);let d=t.constructor,h=t.buffer,_={buffer:h,bufferByteLength:h.byteLength,byteOffset:t.byteOffset,byteLength:t.byteLength,bytesFilled:0,elementSize:c,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(_),Fo(l,s);return}if(l._state==="closed"){let E=new d(_.buffer,_.byteOffset,0);s._closeSteps(E);return}if(e._queueTotalSize>0){if(Bo(e,_)){let E=ko(_);xo(e),s._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");ie(e,E),s._errorSteps(E);return}}e._pendingPullIntos.push(_),Fo(l,s),We(e)}function ll(e,t){let s=e._controlledReadableByteStream;if(mn(s))for(;zo(s)>0;){let l=Kt(e);cn(s,l)}}function ul(e,t,s){if(Io(e,t,s),s.bytesFilled<s.elementSize)return;Kt(e);let l=s.bytesFilled%s.elementSize;if(l>0){let c=s.byteOffset+s.bytesFilled,d=Po(s.buffer,c-l,c);Qt(e,d,0,d.byteLength)}s.bytesFilled-=l,cn(e._controlledReadableByteStream,s),Oo(e)}function qo(e,t){let s=e._pendingPullIntos.peek();fn(e),e._controlledReadableByteStream._state==="closed"?ll(e):ul(e,t,s),We(e)}function Kt(e){return e._pendingPullIntos.shift()}function cl(e){let t=e._controlledReadableByteStream;return t._state!=="readable"||e._closeRequested||!e._started?!1:!!(go(t)&&Gt(t)>0||mn(t)&&zo(t)>0||Wo(e)>0)}function Xt(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function _t(e){let t=e._controlledReadableByteStream;if(!(e._closeRequested||t._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ie(e,l),l}Xt(e),kt(t)}}function Zt(e,t){let s=e._controlledReadableByteStream;if(e._closeRequested||s._state!=="readable")return;let l=t.buffer,c=t.byteOffset,d=t.byteLength,h=l;if(e._pendingPullIntos.length>0){let _=e._pendingPullIntos.peek();Yt(_.buffer),_.buffer=_.buffer}if(fn(e),go(s))if(Gt(s)===0)Qt(e,h,c,d);else{e._pendingPullIntos.length>0&&Kt(e);let _=new Uint8Array(h,c,d);sn(s,_,!1)}else mn(s)?(Qt(e,h,c,d),Oo(e)):Qt(e,h,c,d);We(e)}function ie(e,t){let s=e._controlledReadableByteStream;s._state==="readable"&&(vo(e),Ce(e),Xt(e),ui(s,t))}function dn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let t=e._pendingPullIntos.peek(),s=new Uint8Array(t.buffer,t.byteOffset+t.bytesFilled,t.byteLength-t.bytesFilled),l=Object.create(St.prototype);dl(l,e,s),e._byobRequest=l}return e._byobRequest}function Wo(e){let t=e._controlledReadableByteStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Jt(e,t){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(t===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(s.bytesFilled+t>s.byteLength)throw new RangeError("bytesWritten out of range")}s.buffer=s.buffer,qo(e,t)}function er(e,t){let s=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(t.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(t.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(s.byteOffset+s.bytesFilled!==t.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(s.bufferByteLength!==t.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(s.bytesFilled+t.byteLength>s.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let c=t.byteLength;s.buffer=t.buffer,qo(e,c)}function Do(e,t,s,l,c,d,h){t._controlledReadableByteStream=e,t._pullAgain=!1,t._pulling=!1,t._byobRequest=null,t._queue=t._queueTotalSize=void 0,Ce(t),t._closeRequested=!1,t._started=!1,t._strategyHWM=d,t._pullAlgorithm=l,t._cancelAlgorithm=c,t._autoAllocateChunkSize=h,t._pendingPullIntos=new K,e._readableStreamController=t;let _=s();C(S(_),()=>{t._started=!0,We(t)},E=>{ie(t,E)})}function fl(e,t,s){let l=Object.create(Qe.prototype),c=()=>{},d=()=>S(void 0),h=()=>S(void 0);t.start!==void 0&&(c=()=>t.start(l)),t.pull!==void 0&&(d=()=>t.pull(l)),t.cancel!==void 0&&(h=E=>t.cancel(E));let _=t.autoAllocateChunkSize;if(_===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Do(e,l,c,d,h,s,_)}function dl(e,t,s){e._associatedReadableByteStreamController=t,e._view=s}function hn(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function wt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Lo(e){return new Rt(e)}function Fo(e,t){e._reader._readIntoRequests.push(t)}function hl(e,t,s){let c=e._reader._readIntoRequests.shift();s?c._closeSteps(t):c._chunkSteps(t)}function zo(e){return e._reader._readIntoRequests.length}function mn(e){let t=e._reader;return!(t===void 0||!De(t))}class Rt{constructor(t){if(ye(t,1,"ReadableStreamBYOBReader"),on(t,"First parameter"),ke(t))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!qe(t._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");ao(this,t),this._readIntoRequests=new K}get closed(){return De(this)?this._closedPromise:g(tr("closed"))}cancel(t=void 0){return De(this)?this._ownerReadableStream===void 0?g(Ve("cancel")):Xr(this,t):g(tr("cancel"))}read(t){if(!De(this))return g(tr("read"));if(!ArrayBuffer.isView(t))return g(new TypeError("view must be an array buffer view"));if(t.byteLength===0)return g(new TypeError("view must have non-zero byteLength"));if(t.buffer.byteLength===0)return g(new TypeError("view's buffer must have non-zero byteLength"));if(Yt(t.buffer),this._ownerReadableStream===void 0)return g(Ve("read from"));let s,l,c=T((h,_)=>{s=h,l=_});return $o(this,t,{_chunkSteps:h=>s({value:h,done:!1}),_closeSteps:h=>s({value:h,done:!0}),_errorSteps:h=>l(h)}),c}releaseLock(){if(!De(this))throw tr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");pe(this)}}}Object.defineProperties(Rt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Rt.prototype,r.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function De(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Rt}function $o(e,t,s){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?s._errorSteps(l._storedError):al(l._readableStreamController,t,s)}function tr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Tt(e,t){let{highWaterMark:s}=e;if(s===void 0)return t;if(Eo(s)||s<0)throw new RangeError("Invalid highWaterMark");return s}function rr(e){let{size:t}=e;return t||(()=>1)}function nr(e,t){be(e,t);let s=e?.highWaterMark,l=e?.size;return{highWaterMark:s===void 0?void 0:nn(s),size:l===void 0?void 0:ml(l,`${t} has member 'size' that`)}}function ml(e,t){return oe(e,t),s=>nn(e(s))}function pl(e,t){be(e,t);let s=e?.abort,l=e?.close,c=e?.start,d=e?.type,h=e?.write;return{abort:s===void 0?void 0:bl(s,e,`${t} has member 'abort' that`),close:l===void 0?void 0:yl(l,e,`${t} has member 'close' that`),start:c===void 0?void 0:gl(c,e,`${t} has member 'start' that`),write:h===void 0?void 0:Sl(h,e,`${t} has member 'write' that`),type:d}}function bl(e,t,s){return oe(e,s),l=>x(e,t,[l])}function yl(e,t,s){return oe(e,s),()=>x(e,t,[])}function gl(e,t,s){return oe(e,s),l=>z(e,t,[l])}function Sl(e,t,s){return oe(e,s),(l,c)=>x(e,t,[l,c])}function Mo(e,t){if(!Ke(e))throw new TypeError(`${t} is not a WritableStream.`)}function _l(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let wl=typeof AbortController=="function";function Rl(){if(wl)return new AbortController}class Et{constructor(t={},s={}){t===void 0?t=null:mo(t,"First parameter");let l=nr(s,"Second parameter"),c=pl(t,"First parameter");if(Uo(this),c.type!==void 0)throw new RangeError("Invalid type is specified");let h=rr(l),_=Tt(l,1);Dl(this,c,_,h)}get locked(){if(!Ke(this))throw lr("locked");return Xe(this)}abort(t=void 0){return Ke(this)?Xe(this)?g(new TypeError("Cannot abort a stream that already has a writer")):or(this,t):g(lr("abort"))}close(){return Ke(this)?Xe(this)?g(new TypeError("Cannot close a stream that already has a writer")):ue(this)?g(new TypeError("Cannot close an already-closing stream")):No(this):g(lr("close"))}getWriter(){if(!Ke(this))throw lr("getWriter");return jo(this)}}Object.defineProperties(Et.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Et.prototype,r.toStringTag,{value:"WritableStream",configurable:!0});function jo(e){return new Ct(e)}function Tl(e,t,s,l,c=1,d=()=>1){let h=Object.create(Et.prototype);Uo(h);let _=Object.create(Ze.prototype);return Ko(h,_,e,t,s,l,c,d),h}function Uo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new K,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function Ke(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof Et}function Xe(e){return e._writer!==void 0}function or(e,t){var s;if(e._state==="closed"||e._state==="errored")return S(void 0);e._writableStreamController._abortReason=t,(s=e._writableStreamController._abortController)===null||s===void 0||s.abort();let l=e._state;if(l==="closed"||l==="errored")return S(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let c=!1;l==="erroring"&&(c=!0,t=void 0);let d=T((h,_)=>{e._pendingAbortRequest={_promise:void 0,_resolve:h,_reject:_,_reason:t,_wasAlreadyErroring:c}});return e._pendingAbortRequest._promise=d,c||bn(e,t),d}function No(e){let t=e._state;if(t==="closed"||t==="errored")return g(new TypeError(`The stream (in ${t} state) is not in the writable state and cannot be closed`));let s=T((c,d)=>{let h={_resolve:c,_reject:d};e._closeRequest=h}),l=e._writer;return l!==void 0&&e._backpressure&&t==="writable"&&Cn(l),Ll(e._writableStreamController),s}function El(e){return T((s,l)=>{let c={_resolve:s,_reject:l};e._writeRequests.push(c)})}function pn(e,t){if(e._state==="writable"){bn(e,t);return}yn(e)}function bn(e,t){let s=e._writableStreamController;e._state="erroring",e._storedError=t;let l=e._writer;l!==void 0&&Go(l,t),!kl(e)&&s._started&&yn(e)}function yn(e){e._state="errored",e._writableStreamController[fo]();let t=e._storedError;if(e._writeRequests.forEach(c=>{c._reject(t)}),e._writeRequests=new K,e._pendingAbortRequest===void 0){ir(e);return}let s=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,s._wasAlreadyErroring){s._reject(t),ir(e);return}let l=e._writableStreamController[co](s._reason);C(l,()=>{s._resolve(),ir(e)},c=>{s._reject(c),ir(e)})}function Cl(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Pl(e,t){e._inFlightWriteRequest._reject(t),e._inFlightWriteRequest=void 0,pn(e,t)}function Al(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let s=e._writer;s!==void 0&&ei(s)}function vl(e,t){e._inFlightCloseRequest._reject(t),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(t),e._pendingAbortRequest=void 0),pn(e,t)}function ue(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function kl(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Bl(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Il(e){e._inFlightWriteRequest=e._writeRequests.shift()}function ir(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let t=e._writer;t!==void 0&&Tn(t,e._storedError)}function gn(e,t){let s=e._writer;s!==void 0&&t!==e._backpressure&&(t?Nl(s):Cn(s)),e._backpressure=t}class Ct{constructor(t){if(ye(t,1,"WritableStreamDefaultWriter"),Mo(t,"First parameter"),Xe(t))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=t,t._writer=this;let s=t._state;if(s==="writable")!ue(t)&&t._backpressure?cr(this):ti(this),ur(this);else if(s==="erroring")En(this,t._storedError),ur(this);else if(s==="closed")ti(this),jl(this);else{let l=t._storedError;En(this,l),Jo(this,l)}}get closed(){return Le(this)?this._closedPromise:g(Fe("closed"))}get desiredSize(){if(!Le(this))throw Fe("desiredSize");if(this._ownerWritableStream===void 0)throw Pt("desiredSize");return Wl(this)}get ready(){return Le(this)?this._readyPromise:g(Fe("ready"))}abort(t=void 0){return Le(this)?this._ownerWritableStream===void 0?g(Pt("abort")):xl(this,t):g(Fe("abort"))}close(){if(!Le(this))return g(Fe("close"));let t=this._ownerWritableStream;return t===void 0?g(Pt("close")):ue(t)?g(new TypeError("Cannot close an already-closing stream")):Ho(this)}releaseLock(){if(!Le(this))throw Fe("releaseLock");this._ownerWritableStream!==void 0&&Vo(this)}write(t=void 0){return Le(this)?this._ownerWritableStream===void 0?g(Pt("write to")):Yo(this,t):g(Fe("write"))}}Object.defineProperties(Ct.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ct.prototype,r.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Le(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Ct}function xl(e,t){let s=e._ownerWritableStream;return or(s,t)}function Ho(e){let t=e._ownerWritableStream;return No(t)}function Ol(e){let t=e._ownerWritableStream,s=t._state;return ue(t)||s==="closed"?S(void 0):s==="errored"?g(t._storedError):Ho(e)}function ql(e,t){e._closedPromiseState==="pending"?Tn(e,t):Ul(e,t)}function Go(e,t){e._readyPromiseState==="pending"?ri(e,t):Hl(e,t)}function Wl(e){let t=e._ownerWritableStream,s=t._state;return s==="errored"||s==="erroring"?null:s==="closed"?0:Xo(t._writableStreamController)}function Vo(e){let t=e._ownerWritableStream,s=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");Go(e,s),ql(e,s),t._writer=void 0,e._ownerWritableStream=void 0}function Yo(e,t){let s=e._ownerWritableStream,l=s._writableStreamController,c=Fl(l,t);if(s!==e._ownerWritableStream)return g(Pt("write to"));let d=s._state;if(d==="errored")return g(s._storedError);if(ue(s)||d==="closed")return g(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return g(s._storedError);let h=El(s);return zl(l,t,c),h}let Qo={};class Ze{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!Sn(this))throw Rn("abortReason");return this._abortReason}get signal(){if(!Sn(this))throw Rn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(t=void 0){if(!Sn(this))throw Rn("error");this._controlledWritableStream._state==="writable"&&Zo(this,t)}[co](t){let s=this._abortAlgorithm(t);return sr(this),s}[fo](){Ce(this)}}Object.defineProperties(Ze.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ze.prototype,r.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function Sn(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof Ze}function Ko(e,t,s,l,c,d,h,_){t._controlledWritableStream=e,e._writableStreamController=t,t._queue=void 0,t._queueTotalSize=void 0,Ce(t),t._abortReason=void 0,t._abortController=Rl(),t._started=!1,t._strategySizeAlgorithm=_,t._strategyHWM=h,t._writeAlgorithm=l,t._closeAlgorithm=c,t._abortAlgorithm=d;let E=wn(t);gn(e,E);let I=s(),O=S(I);C(O,()=>{t._started=!0,ar(t)},q=>{t._started=!0,pn(e,q)})}function Dl(e,t,s,l){let c=Object.create(Ze.prototype),d=()=>{},h=()=>S(void 0),_=()=>S(void 0),E=()=>S(void 0);t.start!==void 0&&(d=()=>t.start(c)),t.write!==void 0&&(h=I=>t.write(I,c)),t.close!==void 0&&(_=()=>t.close()),t.abort!==void 0&&(E=I=>t.abort(I)),Ko(e,c,d,h,_,E,s,l)}function sr(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ll(e){ln(e,Qo,0),ar(e)}function Fl(e,t){try{return e._strategySizeAlgorithm(t)}catch(s){return _n(e,s),1}}function Xo(e){return e._strategyHWM-e._queueTotalSize}function zl(e,t,s){try{ln(e,t,s)}catch(c){_n(e,c);return}let l=e._controlledWritableStream;if(!ue(l)&&l._state==="writable"){let c=wn(e);gn(l,c)}ar(e)}function ar(e){let t=e._controlledWritableStream;if(!e._started||t._inFlightWriteRequest!==void 0)return;if(t._state==="erroring"){yn(t);return}if(e._queue.length===0)return;let l=sl(e);l===Qo?$l(e):Ml(e,l)}function _n(e,t){e._controlledWritableStream._state==="writable"&&Zo(e,t)}function $l(e){let t=e._controlledWritableStream;Bl(t),an(e);let s=e._closeAlgorithm();sr(e),C(s,()=>{Al(t)},l=>{vl(t,l)})}function Ml(e,t){let s=e._controlledWritableStream;Il(s);let l=e._writeAlgorithm(t);C(l,()=>{Cl(s);let c=s._state;if(an(e),!ue(s)&&c==="writable"){let d=wn(e);gn(s,d)}ar(e)},c=>{s._state==="writable"&&sr(e),Pl(s,c)})}function wn(e){return Xo(e)<=0}function Zo(e,t){let s=e._controlledWritableStream;sr(e),bn(s,t)}function lr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Rn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function Fe(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Pt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function ur(e){e._closedPromise=T((t,s)=>{e._closedPromise_resolve=t,e._closedPromise_reject=s,e._closedPromiseState="pending"})}function Jo(e,t){ur(e),Tn(e,t)}function jl(e){ur(e),ei(e)}function Tn(e,t){e._closedPromise_reject!==void 0&&(U(e._closedPromise),e._closedPromise_reject(t),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function Ul(e,t){Jo(e,t)}function ei(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function cr(e){e._readyPromise=T((t,s)=>{e._readyPromise_resolve=t,e._readyPromise_reject=s}),e._readyPromiseState="pending"}function En(e,t){cr(e),ri(e,t)}function ti(e){cr(e),Cn(e)}function ri(e,t){e._readyPromise_reject!==void 0&&(U(e._readyPromise),e._readyPromise_reject(t),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function Nl(e){cr(e)}function Hl(e,t){En(e,t)}function Cn(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let ni=typeof DOMException<"u"?DOMException:void 0;function Gl(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function Vl(){let e=function(s,l){this.message=s||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let Yl=Gl(ni)?ni:Vl();function oi(e,t,s,l,c,d){let h=Ye(e),_=jo(t);e._disturbed=!0;let E=!1,I=S(void 0);return T((O,q)=>{let $;if(d!==void 0){if($=()=>{let R=new Yl("Aborted","AbortError"),k=[];l||k.push(()=>t._state==="writable"?or(t,R):S(void 0)),c||k.push(()=>e._state==="readable"?se(e,R):S(void 0)),G(()=>Promise.all(k.map(D=>D())),!0,R)},d.aborted){$();return}d.addEventListener("abort",$)}function ae(){return T((R,k)=>{function D(X){X?R():y(tt(),D,k)}D(!1)})}function tt(){return E?S(!0):y(_._readyPromise,()=>T((R,k)=>{yt(h,{_chunkSteps:D=>{I=y(Yo(_,D),void 0,o),R(!1)},_closeSteps:()=>R(!0),_errorSteps:k})}))}if(ge(e,h._closedPromise,R=>{l?te(!0,R):G(()=>or(t,R),!0,R)}),ge(t,_._closedPromise,R=>{c?te(!0,R):G(()=>se(e,R),!0,R)}),H(e,h._closedPromise,()=>{s?te():G(()=>Ol(_))}),ue(t)||t._state==="closed"){let R=new TypeError("the destination writable stream closed before all data could be piped to it");c?te(!0,R):G(()=>se(e,R),!0,R)}U(ae());function Be(){let R=I;return y(I,()=>R!==I?Be():void 0)}function ge(R,k,D){R._state==="errored"?D(R._storedError):v(k,D)}function H(R,k,D){R._state==="closed"?D():P(k,D)}function G(R,k,D){if(E)return;E=!0,t._state==="writable"&&!ue(t)?P(Be(),X):X();function X(){C(R(),()=>Se(k,D),rt=>Se(!0,rt))}}function te(R,k){E||(E=!0,t._state==="writable"&&!ue(t)?P(Be(),()=>Se(R,k)):Se(R,k))}function Se(R,k){Vo(_),pe(h),d!==void 0&&d.removeEventListener("abort",$),R?q(k):O(void 0)}})}class Je{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!fr(this))throw mr("desiredSize");return Pn(this)}close(){if(!fr(this))throw mr("close");if(!et(this))throw new TypeError("The stream is not in a state that permits close");vt(this)}enqueue(t=void 0){if(!fr(this))throw mr("enqueue");if(!et(this))throw new TypeError("The stream is not in a state that permits enqueue");return hr(this,t)}error(t=void 0){if(!fr(this))throw mr("error");Pe(this,t)}[en](t){Ce(this);let s=this._cancelAlgorithm(t);return dr(this),s}[tn](t){let s=this._controlledReadableStream;if(this._queue.length>0){let l=an(this);this._closeRequested&&this._queue.length===0?(dr(this),kt(s)):At(this),t._chunkSteps(l)}else yo(s,t),At(this)}}Object.defineProperties(Je.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Je.prototype,r.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function fr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof Je}function At(e){if(!ii(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let s=e._pullAlgorithm();C(s,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,At(e))},l=>{Pe(e,l)})}function ii(e){let t=e._controlledReadableStream;return!et(e)||!e._started?!1:!!(ke(t)&&Gt(t)>0||Pn(e)>0)}function dr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function vt(e){if(!et(e))return;let t=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(dr(e),kt(t))}function hr(e,t){if(!et(e))return;let s=e._controlledReadableStream;if(ke(s)&&Gt(s)>0)sn(s,t,!1);else{let l;try{l=e._strategySizeAlgorithm(t)}catch(c){throw Pe(e,c),c}try{ln(e,t,l)}catch(c){throw Pe(e,c),c}}At(e)}function Pe(e,t){let s=e._controlledReadableStream;s._state==="readable"&&(Ce(e),dr(e),ui(s,t))}function Pn(e){let t=e._controlledReadableStream._state;return t==="errored"?null:t==="closed"?0:e._strategyHWM-e._queueTotalSize}function Ql(e){return!ii(e)}function et(e){let t=e._controlledReadableStream._state;return!e._closeRequested&&t==="readable"}function si(e,t,s,l,c,d,h){t._controlledReadableStream=e,t._queue=void 0,t._queueTotalSize=void 0,Ce(t),t._started=!1,t._closeRequested=!1,t._pullAgain=!1,t._pulling=!1,t._strategySizeAlgorithm=h,t._strategyHWM=d,t._pullAlgorithm=l,t._cancelAlgorithm=c,e._readableStreamController=t;let _=s();C(S(_),()=>{t._started=!0,At(t)},E=>{Pe(t,E)})}function Kl(e,t,s,l){let c=Object.create(Je.prototype),d=()=>{},h=()=>S(void 0),_=()=>S(void 0);t.start!==void 0&&(d=()=>t.start(c)),t.pull!==void 0&&(h=()=>t.pull(c)),t.cancel!==void 0&&(_=E=>t.cancel(E)),si(e,c,d,h,_,s,l)}function mr(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function Xl(e,t){return qe(e._readableStreamController)?Jl(e):Zl(e)}function Zl(e,t){let s=Ye(e),l=!1,c=!1,d=!1,h=!1,_,E,I,O,q,$=T(H=>{q=H});function ae(){return l?(c=!0,S(void 0)):(l=!0,yt(s,{_chunkSteps:G=>{B(()=>{c=!1;let te=G,Se=G;d||hr(I._readableStreamController,te),h||hr(O._readableStreamController,Se),l=!1,c&&ae()})},_closeSteps:()=>{l=!1,d||vt(I._readableStreamController),h||vt(O._readableStreamController),(!d||!h)&&q(void 0)},_errorSteps:()=>{l=!1}}),S(void 0))}function tt(H){if(d=!0,_=H,h){let G=gt([_,E]),te=se(e,G);q(te)}return $}function Be(H){if(h=!0,E=H,d){let G=gt([_,E]),te=se(e,G);q(te)}return $}function ge(){}return I=An(ge,ae,tt),O=An(ge,ae,Be),v(s._closedPromise,H=>{Pe(I._readableStreamController,H),Pe(O._readableStreamController,H),(!d||!h)&&q(void 0)}),[I,O]}function Jl(e){let t=Ye(e),s=!1,l=!1,c=!1,d=!1,h=!1,_,E,I,O,q,$=T(R=>{q=R});function ae(R){v(R._closedPromise,k=>{R===t&&(ie(I._readableStreamController,k),ie(O._readableStreamController,k),(!d||!h)&&q(void 0))})}function tt(){De(t)&&(pe(t),t=Ye(e),ae(t)),yt(t,{_chunkSteps:k=>{B(()=>{l=!1,c=!1;let D=k,X=k;if(!d&&!h)try{X=Ao(k)}catch(rt){ie(I._readableStreamController,rt),ie(O._readableStreamController,rt),q(se(e,rt));return}d||Zt(I._readableStreamController,D),h||Zt(O._readableStreamController,X),s=!1,l?ge():c&&H()})},_closeSteps:()=>{s=!1,d||_t(I._readableStreamController),h||_t(O._readableStreamController),I._readableStreamController._pendingPullIntos.length>0&&Jt(I._readableStreamController,0),O._readableStreamController._pendingPullIntos.length>0&&Jt(O._readableStreamController,0),(!d||!h)&&q(void 0)},_errorSteps:()=>{s=!1}})}function Be(R,k){Ee(t)&&(pe(t),t=Lo(e),ae(t));let D=k?O:I,X=k?I:O;$o(t,R,{_chunkSteps:nt=>{B(()=>{l=!1,c=!1;let ot=k?h:d;if(k?d:h)ot||er(D._readableStreamController,nt);else{let Ri;try{Ri=Ao(nt)}catch(kn){ie(D._readableStreamController,kn),ie(X._readableStreamController,kn),q(se(e,kn));return}ot||er(D._readableStreamController,nt),Zt(X._readableStreamController,Ri)}s=!1,l?ge():c&&H()})},_closeSteps:nt=>{s=!1;let ot=k?h:d,Tr=k?d:h;ot||_t(D._readableStreamController),Tr||_t(X._readableStreamController),nt!==void 0&&(ot||er(D._readableStreamController,nt),!Tr&&X._readableStreamController._pendingPullIntos.length>0&&Jt(X._readableStreamController,0)),(!ot||!Tr)&&q(void 0)},_errorSteps:()=>{s=!1}})}function ge(){if(s)return l=!0,S(void 0);s=!0;let R=dn(I._readableStreamController);return R===null?tt():Be(R._view,!1),S(void 0)}function H(){if(s)return c=!0,S(void 0);s=!0;let R=dn(O._readableStreamController);return R===null?tt():Be(R._view,!0),S(void 0)}function G(R){if(d=!0,_=R,h){let k=gt([_,E]),D=se(e,k);q(D)}return $}function te(R){if(h=!0,E=R,d){let k=gt([_,E]),D=se(e,k);q(D)}return $}function Se(){}return I=li(Se,ge,G),O=li(Se,H,te),ae(t),[I,O]}function eu(e,t){be(e,t);let s=e,l=s?.autoAllocateChunkSize,c=s?.cancel,d=s?.pull,h=s?.start,_=s?.type;return{autoAllocateChunkSize:l===void 0?void 0:bo(l,`${t} has member 'autoAllocateChunkSize' that`),cancel:c===void 0?void 0:tu(c,s,`${t} has member 'cancel' that`),pull:d===void 0?void 0:ru(d,s,`${t} has member 'pull' that`),start:h===void 0?void 0:nu(h,s,`${t} has member 'start' that`),type:_===void 0?void 0:ou(_,`${t} has member 'type' that`)}}function tu(e,t,s){return oe(e,s),l=>x(e,t,[l])}function ru(e,t,s){return oe(e,s),l=>x(e,t,[l])}function nu(e,t,s){return oe(e,s),l=>z(e,t,[l])}function ou(e,t){if(e=`${e}`,e!=="bytes")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function iu(e,t){be(e,t);let s=e?.mode;return{mode:s===void 0?void 0:su(s,`${t} has member 'mode' that`)}}function su(e,t){if(e=`${e}`,e!=="byob")throw new TypeError(`${t} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function au(e,t){be(e,t);let s=e?.preventCancel;return{preventCancel:Boolean(s)}}function ai(e,t){be(e,t);let s=e?.preventAbort,l=e?.preventCancel,c=e?.preventClose,d=e?.signal;return d!==void 0&&lu(d,`${t} has member 'signal' that`),{preventAbort:Boolean(s),preventCancel:Boolean(l),preventClose:Boolean(c),signal:d}}function lu(e,t){if(!_l(e))throw new TypeError(`${t} is not an AbortSignal.`)}function uu(e,t){be(e,t);let s=e?.readable;rn(s,"readable","ReadableWritablePair"),on(s,`${t} has member 'readable' that`);let l=e?.writable;return rn(l,"writable","ReadableWritablePair"),Mo(l,`${t} has member 'writable' that`),{readable:s,writable:l}}class Ae{constructor(t={},s={}){t===void 0?t=null:mo(t,"First parameter");let l=nr(s,"Second parameter"),c=eu(t,"First parameter");if(vn(this),c.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=Tt(l,0);fl(this,c,d)}else{let d=rr(l),h=Tt(l,1);Kl(this,c,h,d)}}get locked(){if(!ve(this))throw ze("locked");return ke(this)}cancel(t=void 0){return ve(this)?ke(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):se(this,t):g(ze("cancel"))}getReader(t=void 0){if(!ve(this))throw ze("getReader");return iu(t,"First parameter").mode===void 0?Ye(this):Lo(this)}pipeThrough(t,s={}){if(!ve(this))throw ze("pipeThrough");ye(t,1,"pipeThrough");let l=uu(t,"First parameter"),c=ai(s,"Second parameter");if(ke(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(Xe(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=oi(this,l.writable,c.preventClose,c.preventAbort,c.preventCancel,c.signal);return U(d),l.readable}pipeTo(t,s={}){if(!ve(this))return g(ze("pipeTo"));if(t===void 0)return g("Parameter 1 is required in 'pipeTo'.");if(!Ke(t))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=ai(s,"Second parameter")}catch(c){return g(c)}return ke(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):Xe(t)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):oi(this,t,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!ve(this))throw ze("tee");let t=Xl(this);return gt(t)}values(t=void 0){if(!ve(this))throw ze("values");let s=au(t,"First parameter");return ol(this,s.preventCancel)}}Object.defineProperties(Ae.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Ae.prototype,r.toStringTag,{value:"ReadableStream",configurable:!0}),typeof r.asyncIterator=="symbol"&&Object.defineProperty(Ae.prototype,r.asyncIterator,{value:Ae.prototype.values,writable:!0,configurable:!0});function An(e,t,s,l=1,c=()=>1){let d=Object.create(Ae.prototype);vn(d);let h=Object.create(Je.prototype);return si(d,h,e,t,s,l,c),d}function li(e,t,s){let l=Object.create(Ae.prototype);vn(l);let c=Object.create(Qe.prototype);return Do(l,c,e,t,s,0,void 0),l}function vn(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function ve(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Ae}function ke(e){return e._reader!==void 0}function se(e,t){if(e._disturbed=!0,e._state==="closed")return S(void 0);if(e._state==="errored")return g(e._storedError);kt(e);let s=e._reader;s!==void 0&&De(s)&&(s._readIntoRequests.forEach(c=>{c._closeSteps(void 0)}),s._readIntoRequests=new K);let l=e._readableStreamController[en](t);return W(l,o)}function kt(e){e._state="closed";let t=e._reader;t!==void 0&&(uo(t),Ee(t)&&(t._readRequests.forEach(s=>{s._closeSteps()}),t._readRequests=new K))}function ui(e,t){e._state="errored",e._storedError=t;let s=e._reader;s!==void 0&&(Jr(s,t),Ee(s)?(s._readRequests.forEach(l=>{l._errorSteps(t)}),s._readRequests=new K):(s._readIntoRequests.forEach(l=>{l._errorSteps(t)}),s._readIntoRequests=new K))}function ze(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function ci(e,t){be(e,t);let s=e?.highWaterMark;return rn(s,"highWaterMark","QueuingStrategyInit"),{highWaterMark:nn(s)}}let fi=e=>e.byteLength;Object.defineProperty(fi,"name",{value:"size",configurable:!0});class pr{constructor(t){ye(t,1,"ByteLengthQueuingStrategy"),t=ci(t,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!hi(this))throw di("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!hi(this))throw di("size");return fi}}Object.defineProperties(pr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(pr.prototype,r.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function di(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function hi(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof pr}let mi=()=>1;Object.defineProperty(mi,"name",{value:"size",configurable:!0});class br{constructor(t){ye(t,1,"CountQueuingStrategy"),t=ci(t,"First parameter"),this._countQueuingStrategyHighWaterMark=t.highWaterMark}get highWaterMark(){if(!bi(this))throw pi("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!bi(this))throw pi("size");return mi}}Object.defineProperties(br.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(br.prototype,r.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function pi(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function bi(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof br}function cu(e,t){be(e,t);let s=e?.flush,l=e?.readableType,c=e?.start,d=e?.transform,h=e?.writableType;return{flush:s===void 0?void 0:fu(s,e,`${t} has member 'flush' that`),readableType:l,start:c===void 0?void 0:du(c,e,`${t} has member 'start' that`),transform:d===void 0?void 0:hu(d,e,`${t} has member 'transform' that`),writableType:h}}function fu(e,t,s){return oe(e,s),l=>x(e,t,[l])}function du(e,t,s){return oe(e,s),l=>z(e,t,[l])}function hu(e,t,s){return oe(e,s),(l,c)=>x(e,t,[l,c])}class yr{constructor(t={},s={},l={}){t===void 0&&(t=null);let c=nr(s,"Second parameter"),d=nr(l,"Third parameter"),h=cu(t,"First parameter");if(h.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(h.writableType!==void 0)throw new RangeError("Invalid writableType specified");let _=Tt(d,0),E=rr(d),I=Tt(c,1),O=rr(c),q,$=T(ae=>{q=ae});mu(this,$,I,O,_,E),bu(this,h),h.start!==void 0?q(h.start(this._transformStreamController)):q(void 0)}get readable(){if(!yi(this))throw wi("readable");return this._readable}get writable(){if(!yi(this))throw wi("writable");return this._writable}}Object.defineProperties(yr.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(yr.prototype,r.toStringTag,{value:"TransformStream",configurable:!0});function mu(e,t,s,l,c,d){function h(){return t}function _($){return Su(e,$)}function E($){return _u(e,$)}function I(){return wu(e)}e._writable=Tl(h,_,I,E,s,l);function O(){return Ru(e)}function q($){return Sr(e,$),S(void 0)}e._readable=An(h,O,q,c,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,_r(e,!0),e._transformStreamController=void 0}function yi(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof yr}function gr(e,t){Pe(e._readable._readableStreamController,t),Sr(e,t)}function Sr(e,t){gi(e._transformStreamController),_n(e._writable._writableStreamController,t),e._backpressure&&_r(e,!1)}function _r(e,t){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=T(s=>{e._backpressureChangePromise_resolve=s}),e._backpressure=t}class Bt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!wr(this))throw Rr("desiredSize");let t=this._controlledTransformStream._readable._readableStreamController;return Pn(t)}enqueue(t=void 0){if(!wr(this))throw Rr("enqueue");Si(this,t)}error(t=void 0){if(!wr(this))throw Rr("error");yu(this,t)}terminate(){if(!wr(this))throw Rr("terminate");gu(this)}}Object.defineProperties(Bt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof r.toStringTag=="symbol"&&Object.defineProperty(Bt.prototype,r.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function wr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof Bt}function pu(e,t,s,l){t._controlledTransformStream=e,e._transformStreamController=t,t._transformAlgorithm=s,t._flushAlgorithm=l}function bu(e,t){let s=Object.create(Bt.prototype),l=d=>{try{return Si(s,d),S(void 0)}catch(h){return g(h)}},c=()=>S(void 0);t.transform!==void 0&&(l=d=>t.transform(d,s)),t.flush!==void 0&&(c=()=>t.flush(s)),pu(e,s,l,c)}function gi(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function Si(e,t){let s=e._controlledTransformStream,l=s._readable._readableStreamController;if(!et(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{hr(l,t)}catch(d){throw Sr(s,d),s._readable._storedError}Ql(l)!==s._backpressure&&_r(s,!0)}function yu(e,t){gr(e._controlledTransformStream,t)}function _i(e,t){let s=e._transformAlgorithm(t);return W(s,void 0,l=>{throw gr(e._controlledTransformStream,l),l})}function gu(e){let t=e._controlledTransformStream,s=t._readable._readableStreamController;vt(s);let l=new TypeError("TransformStream terminated");Sr(t,l)}function Su(e,t){let s=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return W(l,()=>{let c=e._writable;if(c._state==="erroring")throw c._storedError;return _i(s,t)})}return _i(s,t)}function _u(e,t){return gr(e,t),S(void 0)}function wu(e){let t=e._readable,s=e._transformStreamController,l=s._flushAlgorithm();return gi(s),W(l,()=>{if(t._state==="errored")throw t._storedError;vt(t._readableStreamController)},c=>{throw gr(e,c),t._storedError})}function Ru(e){return _r(e,!1),e._backpressureChangePromise}function Rr(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function wi(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}n.ByteLengthQueuingStrategy=pr,n.CountQueuingStrategy=br,n.ReadableByteStreamController=Qe,n.ReadableStream=Ae,n.ReadableStreamBYOBReader=Rt,n.ReadableStreamBYOBRequest=St,n.ReadableStreamDefaultController=Je,n.ReadableStreamDefaultReader=bt,n.TransformStream=yr,n.TransformStreamDefaultController=Bt,n.WritableStream=Et,n.WritableStreamDefaultController=Ze,n.WritableStreamDefaultWriter=Ct,Object.defineProperty(n,"__esModule",{value:!0})})});var vi=A(()=>{if(!globalThis.ReadableStream)try{let n=require("node:process"),{emitWarning:r}=n;try{n.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),n.emitWarning=r}catch(o){throw n.emitWarning=r,o}}catch{Object.assign(globalThis,Ai())}try{let{Blob:n}=require("buffer");n&&!n.prototype.stream&&(n.prototype.stream=function(o){let i=0,a=this;return new ReadableStream({type:"bytes",async pull(u){let p=await a.slice(i,Math.min(a.size,i+65536)).arrayBuffer();i+=p.byteLength,u.enqueue(new Uint8Array(p)),i===a.size&&u.close()}})})}catch{}});async function*Bn(n,r=!0){for(let o of n)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(r){let i=o.byteOffset,a=o.byteOffset+o.byteLength;for(;i!==a;){let u=Math.min(a-i,ki),f=o.buffer.slice(i,i+u);i+=f.byteLength,yield new Uint8Array(f)}}else yield o;else{let i=0,a=o;for(;i!==a.size;){let f=await a.slice(i,Math.min(a.size,i+ki)).arrayBuffer();i+=f.byteLength,yield new Uint8Array(f)}}}var nd,ki,Bi,Bu,_e,xt=It(()=>{nd=ce(vi(),1);ki=65536;Bi=class In{#e=[];#t="";#r=0;#n="transparent";constructor(r=[],o={}){if(typeof r!="object"||r===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof r[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let u of r){let f;ArrayBuffer.isView(u)?f=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?f=new Uint8Array(u.slice(0)):u instanceof In?f=u:f=i.encode(`${u}`),this.#r+=ArrayBuffer.isView(f)?f.byteLength:f.size,this.#e.push(f)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let a=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(a)?a:""}get size(){return this.#r}get type(){return this.#t}async text(){let r=new TextDecoder,o="";for await(let i of Bn(this.#e,!1))o+=r.decode(i,{stream:!0});return o+=r.decode(),o}async arrayBuffer(){let r=new Uint8Array(this.size),o=0;for await(let i of Bn(this.#e,!1))r.set(i,o),o+=i.length;return r.buffer}stream(){let r=Bn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await r.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await r.return()}})}slice(r=0,o=this.size,i=""){let{size:a}=this,u=r<0?Math.max(a+r,0):Math.min(r,a),f=o<0?Math.max(a+o,0):Math.min(o,a),p=Math.max(f-u,0),m=this.#e,b=[],w=0;for(let S of m){if(w>=p)break;let g=ArrayBuffer.isView(S)?S.byteLength:S.size;if(u&&g<=u)u-=g,f-=g;else{let y;ArrayBuffer.isView(S)?(y=S.subarray(u,Math.min(g,f)),w+=y.byteLength):(y=S.slice(u,Math.min(g,f)),w+=y.size),f-=g,b.push(y),u=0}}let T=new In([],{type:String(i).toLowerCase()});return T.#r=p,T.#e=b,T}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](r){return r&&typeof r=="object"&&typeof r.constructor=="function"&&(typeof r.stream=="function"||typeof r.arrayBuffer=="function")&&/^(Blob|File)$/.test(r[Symbol.toStringTag])}};Object.defineProperties(Bi.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Bu=Bi,_e=Bu});var Iu,xu,it,xn=It(()=>{xt();Iu=class extends _e{#e=0;#t="";constructor(r,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(r,i),i===null&&(i={});let a=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(a)||(this.#e=a),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](r){return!!r&&r instanceof _e&&/^(File)$/.test(r[Symbol.toStringTag])}},xu=Iu,it=xu});function Oi(n,r=_e){var o=`${Ii()}${Ii()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],a=`--${o}\r
Content-Disposition: form-data; name="`;return n.forEach((u,f)=>typeof u=="string"?i.push(a+On(f)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(a+On(f)+`"; filename="${On(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),i.push(`--${o}--`),new r(i,{type:"multipart/form-data; boundary="+o})}var Ot,Ou,qu,Ii,Wu,xi,On,$e,Me,Pr=It(()=>{xt();xn();({toStringTag:Ot,iterator:Ou,hasInstance:qu}=Symbol),Ii=Math.random,Wu="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),xi=(n,r,o)=>(n+="",/^(Blob|File)$/.test(r&&r[Ot])?[(o=o!==void 0?o+"":r[Ot]=="File"?r.name:"blob",n),r.name!==o||r[Ot]=="blob"?new it([r],o,r):r]:[n,r+""]),On=(n,r)=>(r?n:n.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),$e=(n,r,o)=>{if(r.length<o)throw new TypeError(`Failed to execute '${n}' on 'FormData': ${o} arguments required, but only ${r.length} present.`)},Me=class{#e=[];constructor(...r){if(r.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[Ot](){return"FormData"}[Ou](){return this.entries()}static[qu](r){return r&&typeof r=="object"&&r[Ot]==="FormData"&&!Wu.some(o=>typeof r[o]!="function")}append(...r){$e("append",arguments,2),this.#e.push(xi(...r))}delete(r){$e("delete",arguments,1),r+="",this.#e=this.#e.filter(([o])=>o!==r)}get(r){$e("get",arguments,1),r+="";for(var o=this.#e,i=o.length,a=0;a<i;a++)if(o[a][0]===r)return o[a][1];return null}getAll(r,o){return $e("getAll",arguments,1),o=[],r+="",this.#e.forEach(i=>i[0]===r&&o.push(i[1])),o}has(r){return $e("has",arguments,1),r+="",this.#e.some(o=>o[0]===r)}forEach(r,o){$e("forEach",arguments,1);for(var[i,a]of this)r.call(o,a,i,this)}set(...r){$e("set",arguments,2);var o=[],i=!0;r=xi(...r),this.#e.forEach(a=>{a[0]===r[0]?i&&(i=!o.push(r)):o.push(a)}),i&&o.push(r),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[r]of this)yield r}*values(){for(var[,r]of this)yield r}}});var Li=A((bd,Di)=>{if(!globalThis.DOMException)try{let{MessageChannel:n}=require("worker_threads"),r=new n().port1,o=new ArrayBuffer;r.postMessage(o,[o,o])}catch(n){n.constructor.name==="DOMException"&&(globalThis.DOMException=n.constructor)}Di.exports=globalThis.DOMException});var Wt,Fi,Du,vr,Wn=It(()=>{Wt=require("node:fs"),Fi=ce(Li(),1);xn();xt();({stat:Du}=Wt.promises),vr=class{#e;#t;constructor(r){this.#e=r.path,this.#t=r.start,this.size=r.size,this.lastModified=r.lastModified}slice(r,o){return new vr({path:this.#e,lastModified:this.lastModified,size:o-r,start:this.#t+r})}async*stream(){let{mtimeMs:r}=await Du(this.#e);if(r>this.lastModified)throw new Fi.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Wt.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var $i={};Ti($i,{toFormData:()=>Uu});function ju(n){let r=n.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!r)return;let o=r[2]||r[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(a,u)=>String.fromCharCode(u)),i}async function Uu(n,r){if(!/multipart/i.test(r))throw new TypeError("Failed to fetch");let o=r.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new Dn(o[1]||o[2]),a,u,f,p,m,b,w=[],T=new Me,S=v=>{f+=P.decode(v,{stream:!0})},g=v=>{w.push(v)},y=()=>{let v=new it(w,b,{type:m});T.append(p,v)},C=()=>{T.append(p,f)},P=new TextDecoder("utf-8");P.decode(),i.onPartBegin=function(){i.onPartData=S,i.onPartEnd=C,a="",u="",f="",p="",m="",b=null,w.length=0},i.onHeaderField=function(v){a+=P.decode(v,{stream:!0})},i.onHeaderValue=function(v){u+=P.decode(v,{stream:!0})},i.onHeaderEnd=function(){if(u+=P.decode(),a=a.toLowerCase(),a==="content-disposition"){let v=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);v&&(p=v[2]||v[3]||""),b=ju(u),b&&(i.onPartData=g,i.onPartEnd=y)}else a==="content-type"&&(m=u);u="",a=""};for await(let v of n)i.write(v);return i.end(),T}var fe,L,zi,Ie,kr,Br,Lu,Dt,Fu,zu,$u,Mu,je,Dn,Mi=It(()=>{Wn();Pr();fe=0,L={START_BOUNDARY:fe++,HEADER_FIELD_START:fe++,HEADER_FIELD:fe++,HEADER_VALUE_START:fe++,HEADER_VALUE:fe++,HEADER_VALUE_ALMOST_DONE:fe++,HEADERS_ALMOST_DONE:fe++,PART_DATA_START:fe++,PART_DATA:fe++,END:fe++},zi=1,Ie={PART_BOUNDARY:zi,LAST_BOUNDARY:zi*=2},kr=10,Br=13,Lu=32,Dt=45,Fu=58,zu=97,$u=122,Mu=n=>n|32,je=()=>{},Dn=class{constructor(r){this.index=0,this.flags=0,this.onHeaderEnd=je,this.onHeaderField=je,this.onHeadersEnd=je,this.onHeaderValue=je,this.onPartBegin=je,this.onPartData=je,this.onPartEnd=je,this.boundaryChars={},r=`\r
--`+r;let o=new Uint8Array(r.length);for(let i=0;i<r.length;i++)o[i]=r.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=L.START_BOUNDARY}write(r){let o=0,i=r.length,a=this.index,{lookbehind:u,boundary:f,boundaryChars:p,index:m,state:b,flags:w}=this,T=this.boundary.length,S=T-1,g=r.length,y,C,P=B=>{this[B+"Mark"]=o},v=B=>{delete this[B+"Mark"]},W=(B,z,x,ne)=>{(z===void 0||z!==x)&&this[B](ne&&ne.subarray(z,x))},U=(B,z)=>{let x=B+"Mark";x in this&&(z?(W(B,this[x],o,r),delete this[x]):(W(B,this[x],r.length,r),this[x]=0))};for(o=0;o<i;o++)switch(y=r[o],b){case L.START_BOUNDARY:if(m===f.length-2){if(y===Dt)w|=Ie.LAST_BOUNDARY;else if(y!==Br)return;m++;break}else if(m-1===f.length-2){if(w&Ie.LAST_BOUNDARY&&y===Dt)b=L.END,w=0;else if(!(w&Ie.LAST_BOUNDARY)&&y===kr)m=0,W("onPartBegin"),b=L.HEADER_FIELD_START;else return;break}y!==f[m+2]&&(m=-2),y===f[m+2]&&m++;break;case L.HEADER_FIELD_START:b=L.HEADER_FIELD,P("onHeaderField"),m=0;case L.HEADER_FIELD:if(y===Br){v("onHeaderField"),b=L.HEADERS_ALMOST_DONE;break}if(m++,y===Dt)break;if(y===Fu){if(m===1)return;U("onHeaderField",!0),b=L.HEADER_VALUE_START;break}if(C=Mu(y),C<zu||C>$u)return;break;case L.HEADER_VALUE_START:if(y===Lu)break;P("onHeaderValue"),b=L.HEADER_VALUE;case L.HEADER_VALUE:y===Br&&(U("onHeaderValue",!0),W("onHeaderEnd"),b=L.HEADER_VALUE_ALMOST_DONE);break;case L.HEADER_VALUE_ALMOST_DONE:if(y!==kr)return;b=L.HEADER_FIELD_START;break;case L.HEADERS_ALMOST_DONE:if(y!==kr)return;W("onHeadersEnd"),b=L.PART_DATA_START;break;case L.PART_DATA_START:b=L.PART_DATA,P("onPartData");case L.PART_DATA:if(a=m,m===0){for(o+=S;o<g&&!(r[o]in p);)o+=T;o-=S,y=r[o]}if(m<f.length)f[m]===y?(m===0&&U("onPartData",!0),m++):m=0;else if(m===f.length)m++,y===Br?w|=Ie.PART_BOUNDARY:y===Dt?w|=Ie.LAST_BOUNDARY:m=0;else if(m-1===f.length)if(w&Ie.PART_BOUNDARY){if(m=0,y===kr){w&=~Ie.PART_BOUNDARY,W("onPartEnd"),W("onPartBegin"),b=L.HEADER_FIELD_START;break}}else w&Ie.LAST_BOUNDARY&&y===Dt?(W("onPartEnd"),b=L.END,w=0):m=0;if(m>0)u[m-1]=y;else if(a>0){let B=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);W("onPartData",0,a,B),a=0,P("onPartData"),o--}break;case L.END:break;default:throw new Error(`Unexpected state entered: ${b}`)}U("onHeaderField"),U("onHeaderValue"),U("onPartData"),this.index=m,this.state=b,this.flags=w}end(){if(this.state===L.HEADER_FIELD_START&&this.index===0||this.state===L.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==L.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var cs=A((hh,us)=>{us.exports=ls;ls.sync=tc;var ss=require("fs");function ec(n,r){var o=r.pathExt!==void 0?r.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var i=0;i<o.length;i++){var a=o[i].toLowerCase();if(a&&n.substr(-a.length).toLowerCase()===a)return!0}return!1}function as(n,r,o){return!n.isSymbolicLink()&&!n.isFile()?!1:ec(r,o)}function ls(n,r,o){ss.stat(n,function(i,a){o(i,i?!1:as(a,n,r))})}function tc(n,r){return as(ss.statSync(n),n,r)}});var ps=A((mh,ms)=>{ms.exports=ds;ds.sync=rc;var fs=require("fs");function ds(n,r,o){fs.stat(n,function(i,a){o(i,i?!1:hs(a,r))})}function rc(n,r){return hs(fs.statSync(n),r)}function hs(n,r){return n.isFile()&&nc(n,r)}function nc(n,r){var o=n.mode,i=n.uid,a=n.gid,u=r.uid!==void 0?r.uid:process.getuid&&process.getuid(),f=r.gid!==void 0?r.gid:process.getgid&&process.getgid(),p=parseInt("100",8),m=parseInt("010",8),b=parseInt("001",8),w=p|m,T=o&b||o&m&&a===f||o&p&&i===u||o&w&&u===0;return T}});var ys=A((bh,bs)=>{var ph=require("fs"),Fr;process.platform==="win32"||global.TESTING_WINDOWS?Fr=cs():Fr=ps();bs.exports=$n;$n.sync=oc;function $n(n,r,o){if(typeof r=="function"&&(o=r,r={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,a){$n(n,r||{},function(u,f){u?a(u):i(f)})})}Fr(n,r||{},function(i,a){i&&(i.code==="EACCES"||r&&r.ignoreErrors)&&(i=null,a=!1),o(i,a)})}function oc(n,r){try{return Fr.sync(n,r||{})}catch(o){if(r&&r.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var Es=A((yh,Ts)=>{var lt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",gs=require("path"),ic=lt?";":":",Ss=ys(),_s=n=>Object.assign(new Error(`not found: ${n}`),{code:"ENOENT"}),ws=(n,r)=>{let o=r.colon||ic,i=n.match(/\//)||lt&&n.match(/\\/)?[""]:[...lt?[process.cwd()]:[],...(r.path||process.env.PATH||"").split(o)],a=lt?r.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",u=lt?a.split(o):[""];return lt&&n.indexOf(".")!==-1&&u[0]!==""&&u.unshift(""),{pathEnv:i,pathExt:u,pathExtExe:a}},Rs=(n,r,o)=>{typeof r=="function"&&(o=r,r={}),r||(r={});let{pathEnv:i,pathExt:a,pathExtExe:u}=ws(n,r),f=[],p=b=>new Promise((w,T)=>{if(b===i.length)return r.all&&f.length?w(f):T(_s(n));let S=i[b],g=/^".*"$/.test(S)?S.slice(1,-1):S,y=gs.join(g,n),C=!g&&/^\.[\\\/]/.test(n)?n.slice(0,2)+y:y;w(m(C,b,0))}),m=(b,w,T)=>new Promise((S,g)=>{if(T===a.length)return S(p(w+1));let y=a[T];Ss(b+y,{pathExt:u},(C,P)=>{if(!C&&P)if(r.all)f.push(b+y);else return S(b+y);return S(m(b,w,T+1))})});return o?p(0).then(b=>o(null,b),o):p(0)},sc=(n,r)=>{r=r||{};let{pathEnv:o,pathExt:i,pathExtExe:a}=ws(n,r),u=[];for(let f=0;f<o.length;f++){let p=o[f],m=/^".*"$/.test(p)?p.slice(1,-1):p,b=gs.join(m,n),w=!m&&/^\.[\\\/]/.test(n)?n.slice(0,2)+b:b;for(let T=0;T<i.length;T++){let S=w+i[T];try{if(Ss.sync(S,{pathExt:a}))if(r.all)u.push(S);else return S}catch{}}}if(r.all&&u.length)return u;if(r.nothrow)return null;throw _s(n)};Ts.exports=Rs;Rs.sync=sc});var jn=A((gh,Mn)=>{"use strict";var Cs=(n={})=>{let r=n.env||process.env;return(n.platform||process.platform)!=="win32"?"PATH":Object.keys(r).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"};Mn.exports=Cs;Mn.exports.default=Cs});var ks=A((Sh,vs)=>{"use strict";var Ps=require("path"),ac=Es(),lc=jn();function As(n,r){let o=n.options.env||process.env,i=process.cwd(),a=n.options.cwd!=null,u=a&&process.chdir!==void 0&&!process.chdir.disabled;if(u)try{process.chdir(n.options.cwd)}catch{}let f;try{f=ac.sync(n.command,{path:o[lc({env:o})],pathExt:r?Ps.delimiter:void 0})}catch{}finally{u&&process.chdir(i)}return f&&(f=Ps.resolve(a?n.options.cwd:"",f)),f}function uc(n){return As(n)||As(n,!0)}vs.exports=uc});var Bs=A((_h,Nn)=>{"use strict";var Un=/([()\][%!^"`<>&|;, *?])/g;function cc(n){return n=n.replace(Un,"^$1"),n}function fc(n,r){return n=`${n}`,n=n.replace(/(\\*)"/g,'$1$1\\"'),n=n.replace(/(\\*)$/,"$1$1"),n=`"${n}"`,n=n.replace(Un,"^$1"),r&&(n=n.replace(Un,"^$1")),n}Nn.exports.command=cc;Nn.exports.argument=fc});var xs=A((wh,Is)=>{"use strict";Is.exports=/^#!(.*)/});var qs=A((Rh,Os)=>{"use strict";var dc=xs();Os.exports=(n="")=>{let r=n.match(dc);if(!r)return null;let[o,i]=r[0].replace(/#! ?/,"").split(" "),a=o.split("/").pop();return a==="env"?i:i?`${a} ${i}`:a}});var Ds=A((Th,Ws)=>{"use strict";var Hn=require("fs"),hc=qs();function mc(n){let o=Buffer.alloc(150),i;try{i=Hn.openSync(n,"r"),Hn.readSync(i,o,0,150,0),Hn.closeSync(i)}catch{}return hc(o.toString())}Ws.exports=mc});var $s=A((Eh,zs)=>{"use strict";var pc=require("path"),Ls=ks(),Fs=Bs(),bc=Ds(),yc=process.platform==="win32",gc=/\.(?:com|exe)$/i,Sc=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function _c(n){n.file=Ls(n);let r=n.file&&bc(n.file);return r?(n.args.unshift(n.file),n.command=r,Ls(n)):n.file}function wc(n){if(!yc)return n;let r=_c(n),o=!gc.test(r);if(n.options.forceShell||o){let i=Sc.test(r);n.command=pc.normalize(n.command),n.command=Fs.command(n.command),n.args=n.args.map(u=>Fs.argument(u,i));let a=[n.command].concat(n.args).join(" ");n.args=["/d","/s","/c",`"${a}"`],n.command=process.env.comspec||"cmd.exe",n.options.windowsVerbatimArguments=!0}return n}function Rc(n,r,o){r&&!Array.isArray(r)&&(o=r,r=null),r=r?r.slice(0):[],o=Object.assign({},o);let i={command:n,args:r,options:o,file:void 0,original:{command:n,args:r}};return o.shell?i:wc(i)}zs.exports=Rc});var Us=A((Ch,js)=>{"use strict";var Gn=process.platform==="win32";function Vn(n,r){return Object.assign(new Error(`${r} ${n.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${r} ${n.command}`,path:n.command,spawnargs:n.args})}function Tc(n,r){if(!Gn)return;let o=n.emit;n.emit=function(i,a){if(i==="exit"){let u=Ms(a,r,"spawn");if(u)return o.call(n,"error",u)}return o.apply(n,arguments)}}function Ms(n,r){return Gn&&n===1&&!r.file?Vn(r.original,"spawn"):null}function Ec(n,r){return Gn&&n===1&&!r.file?Vn(r.original,"spawnSync"):null}js.exports={hookChildProcess:Tc,verifyENOENT:Ms,verifyENOENTSync:Ec,notFoundError:Vn}});var Gs=A((Ph,ut)=>{"use strict";var Ns=require("child_process"),Yn=$s(),Qn=Us();function Hs(n,r,o){let i=Yn(n,r,o),a=Ns.spawn(i.command,i.args,i.options);return Qn.hookChildProcess(a,i),a}function Cc(n,r,o){let i=Yn(n,r,o),a=Ns.spawnSync(i.command,i.args,i.options);return a.error=a.error||Qn.verifyENOENTSync(a.status,i),a}ut.exports=Hs;ut.exports.spawn=Hs;ut.exports.sync=Cc;ut.exports._parse=Yn;ut.exports._enoent=Qn});var Ys=A((Ah,Vs)=>{"use strict";Vs.exports=n=>{let r=typeof n=="string"?`
`:`
`.charCodeAt(),o=typeof n=="string"?"\r":"\r".charCodeAt();return n[n.length-1]===r&&(n=n.slice(0,n.length-1)),n[n.length-1]===o&&(n=n.slice(0,n.length-1)),n}});var Xs=A((vh,Mt)=>{"use strict";var $t=require("path"),Qs=jn(),Ks=n=>{n={cwd:process.cwd(),path:process.env[Qs()],execPath:process.execPath,...n};let r,o=$t.resolve(n.cwd),i=[];for(;r!==o;)i.push($t.join(o,"node_modules/.bin")),r=o,o=$t.resolve(o,"..");let a=$t.resolve(n.cwd,n.execPath,"..");return i.push(a),i.concat(n.path).join($t.delimiter)};Mt.exports=Ks;Mt.exports.default=Ks;Mt.exports.env=n=>{n={env:process.env,...n};let r={...n.env},o=Qs({env:r});return n.path=r[o],r[o]=Mt.exports(n),r}});var Js=A((kh,Kn)=>{"use strict";var Zs=(n,r)=>{for(let o of Reflect.ownKeys(r))Object.defineProperty(n,o,Object.getOwnPropertyDescriptor(r,o));return n};Kn.exports=Zs;Kn.exports.default=Zs});var ta=A((Bh,$r)=>{"use strict";var Pc=Js(),zr=new WeakMap,ea=(n,r={})=>{if(typeof n!="function")throw new TypeError("Expected a function");let o,i=0,a=n.displayName||n.name||"<anonymous>",u=function(...f){if(zr.set(u,++i),i===1)o=n.apply(this,f),n=null;else if(r.throw===!0)throw new Error(`Function \`${a}\` can only be called once`);return o};return Pc(u,n),zr.set(u,i),u};$r.exports=ea;$r.exports.default=ea;$r.exports.callCount=n=>{if(!zr.has(n))throw new Error(`The given function \`${n.name}\` is not wrapped by the \`onetime\` package`);return zr.get(n)}});var ra=A(Mr=>{"use strict";Object.defineProperty(Mr,"__esModule",{value:!0});Mr.SIGNALS=void 0;var Ac=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Mr.SIGNALS=Ac});var Xn=A(ct=>{"use strict";Object.defineProperty(ct,"__esModule",{value:!0});ct.SIGRTMAX=ct.getRealtimeSignals=void 0;var vc=function(){let n=oa-na+1;return Array.from({length:n},kc)};ct.getRealtimeSignals=vc;var kc=function(n,r){return{name:`SIGRT${r+1}`,number:na+r,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},na=34,oa=64;ct.SIGRTMAX=oa});var ia=A(jr=>{"use strict";Object.defineProperty(jr,"__esModule",{value:!0});jr.getSignals=void 0;var Bc=require("os"),Ic=ra(),xc=Xn(),Oc=function(){let n=(0,xc.getRealtimeSignals)();return[...Ic.SIGNALS,...n].map(qc)};jr.getSignals=Oc;var qc=function({name:n,number:r,description:o,action:i,forced:a=!1,standard:u}){let{signals:{[n]:f}}=Bc.constants,p=f!==void 0;return{name:n,number:p?f:r,description:o,supported:p,action:i,forced:a,standard:u}}});var aa=A(ft=>{"use strict";Object.defineProperty(ft,"__esModule",{value:!0});ft.signalsByNumber=ft.signalsByName=void 0;var Wc=require("os"),sa=ia(),Dc=Xn(),Lc=function(){return(0,sa.getSignals)().reduce(Fc,{})},Fc=function(n,{name:r,number:o,description:i,supported:a,action:u,forced:f,standard:p}){return{...n,[r]:{name:r,number:o,description:i,supported:a,action:u,forced:f,standard:p}}},zc=Lc();ft.signalsByName=zc;var $c=function(){let n=(0,sa.getSignals)(),r=Dc.SIGRTMAX+1,o=Array.from({length:r},(i,a)=>Mc(a,n));return Object.assign({},...o)},Mc=function(n,r){let o=jc(n,r);if(o===void 0)return{};let{name:i,description:a,supported:u,action:f,forced:p,standard:m}=o;return{[n]:{name:i,number:n,description:a,supported:u,action:f,forced:p,standard:m}}},jc=function(n,r){let o=r.find(({name:i})=>Wc.constants.signals[i]===n);return o!==void 0?o:r.find(i=>i.number===n)},Uc=$c();ft.signalsByNumber=Uc});var ua=A((Wh,la)=>{"use strict";var{signalsByName:Nc}=aa(),Hc=({timedOut:n,timeout:r,errorCode:o,signal:i,signalDescription:a,exitCode:u,isCanceled:f})=>n?`timed out after ${r} milliseconds`:f?"was canceled":o!==void 0?`failed with ${o}`:i!==void 0?`was killed with ${i} (${a})`:u!==void 0?`failed with exit code ${u}`:"failed",Gc=({stdout:n,stderr:r,all:o,error:i,signal:a,exitCode:u,command:f,escapedCommand:p,timedOut:m,isCanceled:b,killed:w,parsed:{options:{timeout:T}}})=>{u=u===null?void 0:u,a=a===null?void 0:a;let S=a===void 0?void 0:Nc[a].description,g=i&&i.code,C=`Command ${Hc({timedOut:m,timeout:T,errorCode:g,signal:a,signalDescription:S,exitCode:u,isCanceled:b})}: ${f}`,P=Object.prototype.toString.call(i)==="[object Error]",v=P?`${C}
${i.message}`:C,W=[v,r,n].filter(Boolean).join(`
`);return P?(i.originalMessage=i.message,i.message=W):i=new Error(W),i.shortMessage=v,i.command=f,i.escapedCommand=p,i.exitCode=u,i.signal=a,i.signalDescription=S,i.stdout=n,i.stderr=r,o!==void 0&&(i.all=o),"bufferedData"in i&&delete i.bufferedData,i.failed=!0,i.timedOut=Boolean(m),i.isCanceled=b,i.killed=w&&!m,i};la.exports=Gc});var fa=A((Dh,Zn)=>{"use strict";var Ur=["stdin","stdout","stderr"],Vc=n=>Ur.some(r=>n[r]!==void 0),ca=n=>{if(!n)return;let{stdio:r}=n;if(r===void 0)return Ur.map(i=>n[i]);if(Vc(n))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Ur.map(i=>`\`${i}\``).join(", ")}`);if(typeof r=="string")return r;if(!Array.isArray(r))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof r}\``);let o=Math.max(r.length,Ur.length);return Array.from({length:o},(i,a)=>r[a])};Zn.exports=ca;Zn.exports.node=n=>{let r=ca(n);return r==="ipc"?"ipc":r===void 0||typeof r=="string"?[r,r,r,"ipc"]:r.includes("ipc")?r:[...r,"ipc"]}});var da=A((Lh,Nr)=>{Nr.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&Nr.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&Nr.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var ya=A((Fh,mt)=>{var F=global.process,He=function(n){return n&&typeof n=="object"&&typeof n.removeListener=="function"&&typeof n.emit=="function"&&typeof n.reallyExit=="function"&&typeof n.listeners=="function"&&typeof n.kill=="function"&&typeof n.pid=="number"&&typeof n.on=="function"};He(F)?(ha=require("assert"),dt=da(),ma=/^win/i.test(F.platform),jt=require("events"),typeof jt!="function"&&(jt=jt.EventEmitter),F.__signal_exit_emitter__?j=F.__signal_exit_emitter__:(j=F.__signal_exit_emitter__=new jt,j.count=0,j.emitted={}),j.infinite||(j.setMaxListeners(1/0),j.infinite=!0),mt.exports=function(n,r){if(!!He(global.process)){ha.equal(typeof n,"function","a callback must be provided for exit handler"),ht===!1&&Jn();var o="exit";r&&r.alwaysLast&&(o="afterexit");var i=function(){j.removeListener(o,n),j.listeners("exit").length===0&&j.listeners("afterexit").length===0&&Hr()};return j.on(o,n),i}},Hr=function(){!ht||!He(global.process)||(ht=!1,dt.forEach(function(r){try{F.removeListener(r,Gr[r])}catch{}}),F.emit=Vr,F.reallyExit=eo,j.count-=1)},mt.exports.unload=Hr,Ge=function(r,o,i){j.emitted[r]||(j.emitted[r]=!0,j.emit(r,o,i))},Gr={},dt.forEach(function(n){Gr[n]=function(){if(!!He(global.process)){var o=F.listeners(n);o.length===j.count&&(Hr(),Ge("exit",null,n),Ge("afterexit",null,n),ma&&n==="SIGHUP"&&(n="SIGINT"),F.kill(F.pid,n))}}}),mt.exports.signals=function(){return dt},ht=!1,Jn=function(){ht||!He(global.process)||(ht=!0,j.count+=1,dt=dt.filter(function(r){try{return F.on(r,Gr[r]),!0}catch{return!1}}),F.emit=ba,F.reallyExit=pa)},mt.exports.load=Jn,eo=F.reallyExit,pa=function(r){!He(global.process)||(F.exitCode=r||0,Ge("exit",F.exitCode,null),Ge("afterexit",F.exitCode,null),eo.call(F,F.exitCode))},Vr=F.emit,ba=function(r,o){if(r==="exit"&&He(global.process)){o!==void 0&&(F.exitCode=o);var i=Vr.apply(this,arguments);return Ge("exit",F.exitCode,null),Ge("afterexit",F.exitCode,null),i}else return Vr.apply(this,arguments)}):mt.exports=function(){};var ha,dt,ma,jt,j,Hr,Ge,Gr,ht,Jn,eo,pa,Vr,ba});var Sa=A((zh,ga)=>{"use strict";var Yc=require("os"),Qc=ya(),Kc=1e3*5,Xc=(n,r="SIGTERM",o={})=>{let i=n(r);return Zc(n,r,o,i),i},Zc=(n,r,o,i)=>{if(!Jc(r,o,i))return;let a=tf(o),u=setTimeout(()=>{n("SIGKILL")},a);u.unref&&u.unref()},Jc=(n,{forceKillAfterTimeout:r},o)=>ef(n)&&r!==!1&&o,ef=n=>n===Yc.constants.signals.SIGTERM||typeof n=="string"&&n.toUpperCase()==="SIGTERM",tf=({forceKillAfterTimeout:n=!0})=>{if(n===!0)return Kc;if(!Number.isFinite(n)||n<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${n}\` (${typeof n})`);return n},rf=(n,r)=>{n.kill()&&(r.isCanceled=!0)},nf=(n,r,o)=>{n.kill(r),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:r}))},of=(n,{timeout:r,killSignal:o="SIGTERM"},i)=>{if(r===0||r===void 0)return i;let a,u=new Promise((p,m)=>{a=setTimeout(()=>{nf(n,o,m)},r)}),f=i.finally(()=>{clearTimeout(a)});return Promise.race([u,f])},sf=({timeout:n})=>{if(n!==void 0&&(!Number.isFinite(n)||n<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${n}\` (${typeof n})`)},af=async(n,{cleanup:r,detached:o},i)=>{if(!r||o)return i;let a=Qc(()=>{n.kill()});return i.finally(()=>{a()})};ga.exports={spawnedKill:Xc,spawnedCancel:rf,setupTimeout:of,validateTimeout:sf,setExitHandler:af}});var wa=A(($h,_a)=>{"use strict";var he=n=>n!==null&&typeof n=="object"&&typeof n.pipe=="function";he.writable=n=>he(n)&&n.writable!==!1&&typeof n._write=="function"&&typeof n._writableState=="object";he.readable=n=>he(n)&&n.readable!==!1&&typeof n._read=="function"&&typeof n._readableState=="object";he.duplex=n=>he.writable(n)&&he.readable(n);he.transform=n=>he.duplex(n)&&typeof n._transform=="function";_a.exports=he});var Ta=A((Mh,Ra)=>{"use strict";var{PassThrough:lf}=require("stream");Ra.exports=n=>{n={...n};let{array:r}=n,{encoding:o}=n,i=o==="buffer",a=!1;r?a=!(o||i):o=o||"utf8",i&&(o=null);let u=new lf({objectMode:a});o&&u.setEncoding(o);let f=0,p=[];return u.on("data",m=>{p.push(m),a?f=p.length:f+=m.length}),u.getBufferedValue=()=>r?p:i?Buffer.concat(p,f):p.join(""),u.getBufferedLength=()=>f,u}});var Ea=A((jh,Ut)=>{"use strict";var{constants:uf}=require("buffer"),cf=require("stream"),{promisify:ff}=require("util"),df=Ta(),hf=ff(cf.pipeline),Yr=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function to(n,r){if(!n)throw new Error("Expected a stream");r={maxBuffer:1/0,...r};let{maxBuffer:o}=r,i=df(r);return await new Promise((a,u)=>{let f=p=>{p&&i.getBufferedLength()<=uf.MAX_LENGTH&&(p.bufferedData=i.getBufferedValue()),u(p)};(async()=>{try{await hf(n,i),a()}catch(p){f(p)}})(),i.on("data",()=>{i.getBufferedLength()>o&&f(new Yr)})}),i.getBufferedValue()}Ut.exports=to;Ut.exports.buffer=(n,r)=>to(n,{...r,encoding:"buffer"});Ut.exports.array=(n,r)=>to(n,{...r,array:!0});Ut.exports.MaxBufferError=Yr});var Pa=A((Uh,Ca)=>{"use strict";var{PassThrough:mf}=require("stream");Ca.exports=function(){var n=[],r=new mf({objectMode:!0});return r.setMaxListeners(0),r.add=o,r.isEmpty=i,r.on("unpipe",a),Array.prototype.slice.call(arguments).forEach(o),r;function o(u){return Array.isArray(u)?(u.forEach(o),this):(n.push(u),u.once("end",a.bind(null,u)),u.once("error",r.emit.bind(r,"error")),u.pipe(r,{end:!1}),this)}function i(){return n.length==0}function a(u){n=n.filter(function(f){return f!==u}),!n.length&&r.readable&&r.end()}}});var Ba=A((Nh,ka)=>{"use strict";var va=wa(),Aa=Ea(),pf=Pa(),bf=(n,r)=>{r===void 0||n.stdin===void 0||(va(r)?r.pipe(n.stdin):n.stdin.end(r))},yf=(n,{all:r})=>{if(!r||!n.stdout&&!n.stderr)return;let o=pf();return n.stdout&&o.add(n.stdout),n.stderr&&o.add(n.stderr),o},ro=async(n,r)=>{if(!!n){n.destroy();try{return await r}catch(o){return o.bufferedData}}},no=(n,{encoding:r,buffer:o,maxBuffer:i})=>{if(!(!n||!o))return r?Aa(n,{encoding:r,maxBuffer:i}):Aa.buffer(n,{maxBuffer:i})},gf=async({stdout:n,stderr:r,all:o},{encoding:i,buffer:a,maxBuffer:u},f)=>{let p=no(n,{encoding:i,buffer:a,maxBuffer:u}),m=no(r,{encoding:i,buffer:a,maxBuffer:u}),b=no(o,{encoding:i,buffer:a,maxBuffer:u*2});try{return await Promise.all([f,p,m,b])}catch(w){return Promise.all([{error:w,signal:w.signal,timedOut:w.timedOut},ro(n,p),ro(r,m),ro(o,b)])}},Sf=({input:n})=>{if(va(n))throw new TypeError("The `input` option cannot be a stream in sync mode")};ka.exports={handleInput:bf,makeAllStream:yf,getSpawnedResult:gf,validateInputSync:Sf}});var xa=A((Hh,Ia)=>{"use strict";var _f=(async()=>{})().constructor.prototype,wf=["then","catch","finally"].map(n=>[n,Reflect.getOwnPropertyDescriptor(_f,n)]),Rf=(n,r)=>{for(let[o,i]of wf){let a=typeof r=="function"?(...u)=>Reflect.apply(i.value,r(),u):i.value.bind(r);Reflect.defineProperty(n,o,{...i,value:a})}return n},Tf=n=>new Promise((r,o)=>{n.on("exit",(i,a)=>{r({exitCode:i,signal:a})}),n.on("error",i=>{o(i)}),n.stdin&&n.stdin.on("error",i=>{o(i)})});Ia.exports={mergePromise:Rf,getSpawnedPromise:Tf}});var Wa=A((Gh,qa)=>{"use strict";var Oa=(n,r=[])=>Array.isArray(r)?[n,...r]:[n],Ef=/^[\w.-]+$/,Cf=/"/g,Pf=n=>typeof n!="string"||Ef.test(n)?n:`"${n.replace(Cf,'\\"')}"`,Af=(n,r)=>Oa(n,r).join(" "),vf=(n,r)=>Oa(n,r).map(o=>Pf(o)).join(" "),kf=/ +/g,Bf=n=>{let r=[];for(let o of n.trim().split(kf)){let i=r[r.length-1];i&&i.endsWith("\\")?r[r.length-1]=`${i.slice(0,-1)} ${o}`:r.push(o)}return r};qa.exports={joinCommand:Af,getEscapedCommand:vf,parseCommand:Bf}});var ja=A((Vh,pt)=>{"use strict";var If=require("path"),oo=require("child_process"),xf=Gs(),Of=Ys(),qf=Xs(),Wf=ta(),Qr=ua(),La=fa(),{spawnedKill:Df,spawnedCancel:Lf,setupTimeout:Ff,validateTimeout:zf,setExitHandler:$f}=Sa(),{handleInput:Mf,getSpawnedResult:jf,makeAllStream:Uf,validateInputSync:Nf}=Ba(),{mergePromise:Da,getSpawnedPromise:Hf}=xa(),{joinCommand:Fa,parseCommand:za,getEscapedCommand:$a}=Wa(),Gf=1e3*1e3*100,Vf=({env:n,extendEnv:r,preferLocal:o,localDir:i,execPath:a})=>{let u=r?{...process.env,...n}:n;return o?qf.env({env:u,cwd:i,execPath:a}):u},Ma=(n,r,o={})=>{let i=xf._parse(n,r,o);return n=i.command,r=i.args,o=i.options,o={maxBuffer:Gf,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=Vf(o),o.stdio=La(o),process.platform==="win32"&&If.basename(n,".exe")==="cmd"&&r.unshift("/q"),{file:n,args:r,options:o,parsed:i}},Nt=(n,r,o)=>typeof r!="string"&&!Buffer.isBuffer(r)?o===void 0?void 0:"":n.stripFinalNewline?Of(r):r,Kr=(n,r,o)=>{let i=Ma(n,r,o),a=Fa(n,r),u=$a(n,r);zf(i.options);let f;try{f=oo.spawn(i.file,i.args,i.options)}catch(g){let y=new oo.ChildProcess,C=Promise.reject(Qr({error:g,stdout:"",stderr:"",all:"",command:a,escapedCommand:u,parsed:i,timedOut:!1,isCanceled:!1,killed:!1}));return Da(y,C)}let p=Hf(f),m=Ff(f,i.options,p),b=$f(f,i.options,m),w={isCanceled:!1};f.kill=Df.bind(null,f.kill.bind(f)),f.cancel=Lf.bind(null,f,w);let S=Wf(async()=>{let[{error:g,exitCode:y,signal:C,timedOut:P},v,W,U]=await jf(f,i.options,b),B=Nt(i.options,v),z=Nt(i.options,W),x=Nt(i.options,U);if(g||y!==0||C!==null){let ne=Qr({error:g,exitCode:y,signal:C,stdout:B,stderr:z,all:x,command:a,escapedCommand:u,parsed:i,timedOut:P,isCanceled:w.isCanceled,killed:f.killed});if(!i.options.reject)return ne;throw ne}return{command:a,escapedCommand:u,exitCode:0,stdout:B,stderr:z,all:x,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return Mf(f,i.options.input),f.all=Uf(f,i.options),Da(f,S)};pt.exports=Kr;pt.exports.sync=(n,r,o)=>{let i=Ma(n,r,o),a=Fa(n,r),u=$a(n,r);Nf(i.options);let f;try{f=oo.spawnSync(i.file,i.args,i.options)}catch(b){throw Qr({error:b,stdout:"",stderr:"",all:"",command:a,escapedCommand:u,parsed:i,timedOut:!1,isCanceled:!1,killed:!1})}let p=Nt(i.options,f.stdout,f.error),m=Nt(i.options,f.stderr,f.error);if(f.error||f.status!==0||f.signal!==null){let b=Qr({stdout:p,stderr:m,error:f.error,signal:f.signal,exitCode:f.status,command:a,escapedCommand:u,parsed:i,timedOut:f.error&&f.error.code==="ETIMEDOUT",isCanceled:!1,killed:f.signal!==null});if(!i.options.reject)return b;throw b}return{command:a,escapedCommand:u,exitCode:0,stdout:p,stderr:m,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};pt.exports.command=(n,r)=>{let[o,...i]=za(n);return Kr(o,i,r)};pt.exports.commandSync=(n,r)=>{let[o,...i]=za(n);return Kr.sync(o,i,r)};pt.exports.node=(n,r,o={})=>{r&&!Array.isArray(r)&&typeof r=="object"&&(o=r,r=[]);let i=La.node(o),a=process.execArgv.filter(p=>!p.startsWith("--inspect")),{nodePath:u=process.execPath,nodeOptions:f=a}=o;return Kr(u,[...f,n,...Array.isArray(r)?r:[]],{...o,stdin:void 0,stdout:void 0,stderr:void 0,stdio:i,shell:!1})}});var Xf={};Ti(Xf,{default:()=>Kf});module.exports=vu(Xf);var me=require("@raycast/api");var Lr=require("@raycast/api");var rs=ce(require("node:http"),1),ns=ce(require("node:https"),1),Ue=ce(require("node:zlib"),1),J=ce(require("node:stream"),1),Ft=require("node:buffer");function ku(n){if(!/^data:/i.test(n))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');n=n.replace(/\r?\n/g,"");let r=n.indexOf(",");if(r===-1||r<=4)throw new TypeError("malformed data: URI");let o=n.substring(5,r).split(";"),i="",a=!1,u=o[0]||"text/plain",f=u;for(let w=1;w<o.length;w++)o[w]==="base64"?a=!0:(f+=`;${o[w]}`,o[w].indexOf("charset=")===0&&(i=o[w].substring(8)));!o[0]&&!i.length&&(f+=";charset=US-ASCII",i="US-ASCII");let p=a?"base64":"ascii",m=unescape(n.substring(r+1)),b=Buffer.from(m,p);return b.type=u,b.typeFull=f,b.charset=i,b}var Ci=ku;var re=ce(require("node:stream"),1),Re=require("node:util"),Z=require("node:buffer");xt();Pr();var we=class extends Error{constructor(r,o){super(r),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var V=class extends we{constructor(r,o,i){super(r,o),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var Ar=Symbol.toStringTag,qn=n=>typeof n=="object"&&typeof n.append=="function"&&typeof n.delete=="function"&&typeof n.get=="function"&&typeof n.getAll=="function"&&typeof n.has=="function"&&typeof n.set=="function"&&typeof n.sort=="function"&&n[Ar]==="URLSearchParams",qt=n=>n&&typeof n=="object"&&typeof n.arrayBuffer=="function"&&typeof n.type=="string"&&typeof n.stream=="function"&&typeof n.constructor=="function"&&/^(Blob|File)$/.test(n[Ar]),qi=n=>typeof n=="object"&&(n[Ar]==="AbortSignal"||n[Ar]==="EventTarget"),Wi=(n,r)=>{let o=new URL(r).hostname,i=new URL(n).hostname;return o===i||o.endsWith(`.${i}`)};var Nu=(0,Re.promisify)(re.default.pipeline),Y=Symbol("Body internals"),de=class{constructor(r,{size:o=0}={}){let i=null;r===null?r=null:qn(r)?r=Z.Buffer.from(r.toString()):qt(r)||Z.Buffer.isBuffer(r)||(Re.types.isAnyArrayBuffer(r)?r=Z.Buffer.from(r):ArrayBuffer.isView(r)?r=Z.Buffer.from(r.buffer,r.byteOffset,r.byteLength):r instanceof re.default||(r instanceof Me?(r=Oi(r),i=r.type.split("=")[1]):r=Z.Buffer.from(String(r))));let a=r;Z.Buffer.isBuffer(r)?a=re.default.Readable.from(r):qt(r)&&(a=re.default.Readable.from(r.stream())),this[Y]={body:r,stream:a,boundary:i,disturbed:!1,error:null},this.size=o,r instanceof re.default&&r.on("error",u=>{let f=u instanceof we?u:new V(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[Y].error=f})}get body(){return this[Y].stream}get bodyUsed(){return this[Y].disturbed}async arrayBuffer(){let{buffer:r,byteOffset:o,byteLength:i}=await Ir(this);return r.slice(o,o+i)}async formData(){let r=this.headers.get("content-type");if(r.startsWith("application/x-www-form-urlencoded")){let i=new Me,a=new URLSearchParams(await this.text());for(let[u,f]of a)i.append(u,f);return i}let{toFormData:o}=await Promise.resolve().then(()=>(Mi(),$i));return o(this.body,r)}async blob(){let r=this.headers&&this.headers.get("content-type")||this[Y].body&&this[Y].body.type||"",o=await this.arrayBuffer();return new _e([o],{type:r})}async json(){let r=await Ir(this);return JSON.parse(r.toString())}async text(){return(await Ir(this)).toString()}buffer(){return Ir(this)}};de.prototype.buffer=(0,Re.deprecate)(de.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(de.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Re.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Ir(n){if(n[Y].disturbed)throw new TypeError(`body used already for: ${n.url}`);if(n[Y].disturbed=!0,n[Y].error)throw n[Y].error;let{body:r}=n;if(r===null)return Z.Buffer.alloc(0);if(!(r instanceof re.default))return Z.Buffer.alloc(0);let o=[],i=0;try{for await(let a of r){if(n.size>0&&i+a.length>n.size){let u=new V(`content size at ${n.url} over limit: ${n.size}`,"max-size");throw r.destroy(u),u}i+=a.length,o.push(a)}}catch(a){throw a instanceof we?a:new V(`Invalid response body while trying to fetch ${n.url}: ${a.message}`,"system",a)}if(r.readableEnded===!0||r._readableState.ended===!0)try{return o.every(a=>typeof a=="string")?Z.Buffer.from(o.join("")):Z.Buffer.concat(o,i)}catch(a){throw new V(`Could not create Buffer from response body for ${n.url}: ${a.message}`,"system",a)}else throw new V(`Premature close of server response while trying to fetch ${n.url}`)}var st=(n,r)=>{let o,i,{body:a}=n[Y];if(n.bodyUsed)throw new Error("cannot clone body after it is used");return a instanceof re.default&&typeof a.getBoundary!="function"&&(o=new re.PassThrough({highWaterMark:r}),i=new re.PassThrough({highWaterMark:r}),a.pipe(o),a.pipe(i),n[Y].stream=o,a=i),a},Hu=(0,Re.deprecate)(n=>n.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),xr=(n,r)=>n===null?null:typeof n=="string"?"text/plain;charset=UTF-8":qn(n)?"application/x-www-form-urlencoded;charset=UTF-8":qt(n)?n.type||null:Z.Buffer.isBuffer(n)||Re.types.isAnyArrayBuffer(n)||ArrayBuffer.isView(n)?null:n instanceof Me?`multipart/form-data; boundary=${r[Y].boundary}`:n&&typeof n.getBoundary=="function"?`multipart/form-data;boundary=${Hu(n)}`:n instanceof re.default?null:"text/plain;charset=UTF-8",ji=n=>{let{body:r}=n[Y];return r===null?0:qt(r)?r.size:Z.Buffer.isBuffer(r)?r.length:r&&typeof r.getLengthSync=="function"&&r.hasKnownLength&&r.hasKnownLength()?r.getLengthSync():null},Ui=async(n,{body:r})=>{r===null?n.end():await Nu(r,n)};var Ln=require("node:util"),Lt=ce(require("node:http"),1),Or=typeof Lt.default.validateHeaderName=="function"?Lt.default.validateHeaderName:n=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(n)){let r=new TypeError(`Header name must be a valid HTTP token [${n}]`);throw Object.defineProperty(r,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),r}},Fn=typeof Lt.default.validateHeaderValue=="function"?Lt.default.validateHeaderValue:(n,r)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(r)){let o=new TypeError(`Invalid character in header content ["${n}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},Q=class extends URLSearchParams{constructor(r){let o=[];if(r instanceof Q){let i=r.raw();for(let[a,u]of Object.entries(i))o.push(...u.map(f=>[a,f]))}else if(r!=null)if(typeof r=="object"&&!Ln.types.isBoxedPrimitive(r)){let i=r[Symbol.iterator];if(i==null)o.push(...Object.entries(r));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...r].map(a=>{if(typeof a!="object"||Ln.types.isBoxedPrimitive(a))throw new TypeError("Each header pair must be an iterable object");return[...a]}).map(a=>{if(a.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...a]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([i,a])=>(Or(i),Fn(i,String(a)),[String(i).toLowerCase(),String(a)])):void 0,super(o),new Proxy(this,{get(i,a,u){switch(a){case"append":case"set":return(f,p)=>(Or(f),Fn(f,String(p)),URLSearchParams.prototype[a].call(i,String(f).toLowerCase(),String(p)));case"delete":case"has":case"getAll":return f=>(Or(f),URLSearchParams.prototype[a].call(i,String(f).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,a,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(r){let o=this.getAll(r);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(r)&&(i=i.toLowerCase()),i}forEach(r,o=void 0){for(let i of this.keys())Reflect.apply(r,o,[this.get(i),i,this])}*values(){for(let r of this.keys())yield this.get(r)}*entries(){for(let r of this.keys())yield[r,this.get(r)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((r,o)=>(r[o]=this.getAll(o),r),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((r,o)=>{let i=this.getAll(o);return o==="host"?r[o]=i[0]:r[o]=i.length>1?i:i[0],r},{})}};Object.defineProperties(Q.prototype,["get","entries","forEach","values"].reduce((n,r)=>(n[r]={enumerable:!0},n),{}));function Ni(n=[]){return new Q(n.reduce((r,o,i,a)=>(i%2===0&&r.push(a.slice(i,i+2)),r),[]).filter(([r,o])=>{try{return Or(r),Fn(r,String(o)),!0}catch{return!1}}))}var Gu=new Set([301,302,303,307,308]),qr=n=>Gu.has(n);var le=Symbol("Response internals"),N=class extends de{constructor(r=null,o={}){super(r,o);let i=o.status!=null?o.status:200,a=new Q(o.headers);if(r!==null&&!a.has("Content-Type")){let u=xr(r,this);u&&a.append("Content-Type",u)}this[le]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:a,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[le].type}get url(){return this[le].url||""}get status(){return this[le].status}get ok(){return this[le].status>=200&&this[le].status<300}get redirected(){return this[le].counter>0}get statusText(){return this[le].statusText}get headers(){return this[le].headers}get highWaterMark(){return this[le].highWaterMark}clone(){return new N(st(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(r,o=302){if(!qr(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new N(null,{headers:{location:new URL(r).toString()},status:o})}static error(){let r=new N(null,{status:0,statusText:""});return r[le].type="error",r}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(N.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var Ji=require("node:url"),es=require("node:util");var Hi=n=>{if(n.search)return n.search;let r=n.href.length-1,o=n.hash||(n.href[r]==="#"?"#":"");return n.href[r-o.length]==="?"?"?":""};var Vi=require("node:net");function Gi(n,r=!1){return n==null||(n=new URL(n),/^(about|blob|data):$/.test(n.protocol))?"no-referrer":(n.username="",n.password="",n.hash="",r&&(n.pathname="",n.search=""),n)}var Yi=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),Qi="strict-origin-when-cross-origin";function Ki(n){if(!Yi.has(n))throw new TypeError(`Invalid referrerPolicy: ${n}`);return n}function Vu(n){if(/^(http|ws)s:$/.test(n.protocol))return!0;let r=n.host.replace(/(^\[)|(]$)/g,""),o=(0,Vi.isIP)(r);return o===4&&/^127\./.test(r)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(r)?!0:/^(.+\.)*localhost$/.test(n.host)?!1:n.protocol==="file:"}function at(n){return/^about:(blank|srcdoc)$/.test(n)||n.protocol==="data:"||/^(blob|filesystem):$/.test(n.protocol)?!0:Vu(n)}function Xi(n,{referrerURLCallback:r,referrerOriginCallback:o}={}){if(n.referrer==="no-referrer"||n.referrerPolicy==="")return null;let i=n.referrerPolicy;if(n.referrer==="about:client")return"no-referrer";let a=n.referrer,u=Gi(a),f=Gi(a,!0);u.toString().length>4096&&(u=f),r&&(u=r(u)),o&&(f=o(f));let p=new URL(n.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return f;case"unsafe-url":return u;case"strict-origin":return at(u)&&!at(p)?"no-referrer":f.toString();case"strict-origin-when-cross-origin":return u.origin===p.origin?u:at(u)&&!at(p)?"no-referrer":f;case"same-origin":return u.origin===p.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===p.origin?u:f;case"no-referrer-when-downgrade":return at(u)&&!at(p)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function Zi(n){let r=(n.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of r)i&&Yi.has(i)&&(o=i);return o}var M=Symbol("Request internals"),Wr=n=>typeof n=="object"&&typeof n[M]=="object",Yu=(0,es.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),Te=class extends de{constructor(r,o={}){let i;if(Wr(r)?i=new URL(r.url):(i=new URL(r),r={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentails.`);let a=o.method||r.method||"GET";if(a=a.toUpperCase(),"data"in o&&Yu(),(o.body!=null||Wr(r)&&r.body!==null)&&(a==="GET"||a==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=o.body?o.body:Wr(r)&&r.body!==null?st(r):null;super(u,{size:o.size||r.size||0});let f=new Q(o.headers||r.headers||{});if(u!==null&&!f.has("Content-Type")){let b=xr(u,this);b&&f.set("Content-Type",b)}let p=Wr(r)?r.signal:null;if("signal"in o&&(p=o.signal),p!=null&&!qi(p))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let m=o.referrer==null?r.referrer:o.referrer;if(m==="")m="no-referrer";else if(m){let b=new URL(m);m=/^about:(\/\/)?client$/.test(b)?"client":b}else m=void 0;this[M]={method:a,redirect:o.redirect||r.redirect||"follow",headers:f,parsedURL:i,signal:p,referrer:m},this.follow=o.follow===void 0?r.follow===void 0?20:r.follow:o.follow,this.compress=o.compress===void 0?r.compress===void 0?!0:r.compress:o.compress,this.counter=o.counter||r.counter||0,this.agent=o.agent||r.agent,this.highWaterMark=o.highWaterMark||r.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||r.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||r.referrerPolicy||""}get method(){return this[M].method}get url(){return(0,Ji.format)(this[M].parsedURL)}get headers(){return this[M].headers}get redirect(){return this[M].redirect}get signal(){return this[M].signal}get referrer(){if(this[M].referrer==="no-referrer")return"";if(this[M].referrer==="client")return"about:client";if(this[M].referrer)return this[M].referrer.toString()}get referrerPolicy(){return this[M].referrerPolicy}set referrerPolicy(r){this[M].referrerPolicy=Ki(r)}clone(){return new Te(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(Te.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var ts=n=>{let{parsedURL:r}=n[M],o=new Q(n[M].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(n.body===null&&/^(post|put)$/i.test(n.method)&&(i="0"),n.body!==null){let p=ji(n);typeof p=="number"&&!Number.isNaN(p)&&(i=String(p))}i&&o.set("Content-Length",i),n.referrerPolicy===""&&(n.referrerPolicy=Qi),n.referrer&&n.referrer!=="no-referrer"?n[M].referrer=Xi(n):n[M].referrer="no-referrer",n[M].referrer instanceof URL&&o.set("Referer",n.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),n.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip,deflate,br");let{agent:a}=n;typeof a=="function"&&(a=a(r)),!o.has("Connection")&&!a&&o.set("Connection","close");let u=Hi(r),f={path:r.pathname+u,method:n.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:n.insecureHTTPParser,agent:a};return{parsedURL:r,options:f}};var Dr=class extends we{constructor(r,o="aborted"){super(r,o)}};Pr();Wn();var Qu=new Set(["data:","http:","https:"]);async function Ne(n,r){return new Promise((o,i)=>{let a=new Te(n,r),{parsedURL:u,options:f}=ts(a);if(!Qu.has(u.protocol))throw new TypeError(`node-fetch cannot load ${n}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let y=Ci(a.url),C=new N(y,{headers:{"Content-Type":y.typeFull}});o(C);return}let p=(u.protocol==="https:"?ns.default:rs.default).request,{signal:m}=a,b=null,w=()=>{let y=new Dr("The operation was aborted.");i(y),a.body&&a.body instanceof J.default.Readable&&a.body.destroy(y),!(!b||!b.body)&&b.body.emit("error",y)};if(m&&m.aborted){w();return}let T=()=>{w(),g()},S=p(u.toString(),f);m&&m.addEventListener("abort",T);let g=()=>{S.abort(),m&&m.removeEventListener("abort",T)};S.on("error",y=>{i(new V(`request to ${a.url} failed, reason: ${y.message}`,"system",y)),g()}),Ku(S,y=>{b.body.destroy(y)}),process.version<"v14"&&S.on("socket",y=>{let C;y.prependListener("end",()=>{C=y._eventsCount}),y.prependListener("close",P=>{if(b&&C<y._eventsCount&&!P){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",b.body.emit("error",v)}})}),S.on("response",y=>{S.setTimeout(0);let C=Ni(y.rawHeaders);if(qr(y.statusCode)){let B=C.get("Location"),z=null;try{z=B===null?null:new URL(B,a.url)}catch{if(a.redirect!=="manual"){i(new V(`uri requested responds with an invalid redirect URL: ${B}`,"invalid-redirect")),g();return}}switch(a.redirect){case"error":i(new V(`uri requested responds with a redirect, redirect mode is set to error: ${a.url}`,"no-redirect")),g();return;case"manual":break;case"follow":{if(z===null)break;if(a.counter>=a.follow){i(new V(`maximum redirect reached at: ${a.url}`,"max-redirect")),g();return}let x={headers:new Q(a.headers),follow:a.follow,counter:a.counter+1,agent:a.agent,compress:a.compress,method:a.method,body:st(a),signal:a.signal,size:a.size,referrer:a.referrer,referrerPolicy:a.referrerPolicy};if(!Wi(a.url,z))for(let K of["authorization","www-authenticate","cookie","cookie2"])x.headers.delete(K);if(y.statusCode!==303&&a.body&&r.body instanceof J.default.Readable){i(new V("Cannot follow redirect with body being a readable stream","unsupported-redirect")),g();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&a.method==="POST")&&(x.method="GET",x.body=void 0,x.headers.delete("content-length"));let ne=Zi(C);ne&&(x.referrerPolicy=ne),o(Ne(new Te(z,x))),g();return}default:return i(new TypeError(`Redirect option '${a.redirect}' is not a valid value of RequestRedirect`))}}m&&y.once("end",()=>{m.removeEventListener("abort",T)});let P=(0,J.pipeline)(y,new J.PassThrough,B=>{B&&i(B)});process.version<"v12.10"&&y.on("aborted",T);let v={url:a.url,status:y.statusCode,statusText:y.statusMessage,headers:C,size:a.size,counter:a.counter,highWaterMark:a.highWaterMark},W=C.get("Content-Encoding");if(!a.compress||a.method==="HEAD"||W===null||y.statusCode===204||y.statusCode===304){b=new N(P,v),o(b);return}let U={flush:Ue.default.Z_SYNC_FLUSH,finishFlush:Ue.default.Z_SYNC_FLUSH};if(W==="gzip"||W==="x-gzip"){P=(0,J.pipeline)(P,Ue.default.createGunzip(U),B=>{B&&i(B)}),b=new N(P,v),o(b);return}if(W==="deflate"||W==="x-deflate"){let B=(0,J.pipeline)(y,new J.PassThrough,z=>{z&&i(z)});B.once("data",z=>{(z[0]&15)===8?P=(0,J.pipeline)(P,Ue.default.createInflate(),x=>{x&&i(x)}):P=(0,J.pipeline)(P,Ue.default.createInflateRaw(),x=>{x&&i(x)}),b=new N(P,v),o(b)}),B.once("end",()=>{b||(b=new N(P,v),o(b))});return}if(W==="br"){P=(0,J.pipeline)(P,Ue.default.createBrotliDecompress(),B=>{B&&i(B)}),b=new N(P,v),o(b);return}b=new N(P,v),o(b)}),Ui(S,a).catch(i)})}function Ku(n,r){let o=Ft.Buffer.from(`0\r
\r
`),i=!1,a=!1,u;n.on("response",f=>{let{headers:p}=f;i=p["transfer-encoding"]==="chunked"&&!p["content-length"]}),n.on("socket",f=>{let p=()=>{if(i&&!a){let m=new Error("Premature close");m.code="ERR_STREAM_PREMATURE_CLOSE",r(m)}};f.prependListener("close",p),n.on("abort",()=>{f.removeListener("close",p)}),f.on("data",m=>{a=Ft.Buffer.compare(m.slice(-5),o)===0,!a&&u&&(a=Ft.Buffer.compare(u.slice(-3),o.slice(0,3))===0&&Ft.Buffer.compare(m.slice(-2),o.slice(3))===0),u=m})})}var zt=require("@raycast/api"),{accessKey:os,secretKey:Xu}=(0,zt.getPreferenceValues)(),xe=new zt.OAuth.PKCEClient({redirectMethod:zt.OAuth.RedirectMethod.Web,providerName:"Unsplash",providerIcon:"unsplash-logo.png",description:"Login to your Unsplash account."}),is=async()=>{let n=await xe.authorizationRequest({endpoint:"https://unsplash.com/oauth/authorize",clientId:os,scope:"public read_user write_likes"}),{authorizationCode:r}=await xe.authorize(n),o=new URLSearchParams;o.append("client_id",os),o.append("client_secret",Xu),o.append("redirect_uri",n.redirectURI),o.append("code",r),o.append("grant_type","authorization_code");let i=await Ne("https://unsplash.com/oauth/token",{method:"POST",body:o});if(!i.ok)throw console.error("fetch tokens error:",await i.text()),new Error(i.statusText);await xe.setTokens(await i.json())};var{accessKey:Zu}=(0,Lr.getPreferenceValues)(),zn=async(n,r)=>{let o=await xe.getTokens(),i=o?.accessToken;i?o?.refreshToken&&o?.isExpired()&&(await xe.setTokens(await Ju(o.refreshToken)),i=(await xe.getTokens())?.accessToken):(await Lr.LocalStorage.clear(),await is(),i=(await xe.getTokens())?.accessToken);let a=n.startsWith("https://api.unsplash.com/")?n:`https://api.unsplash.com${n}`;return await Ne(a,{...r,headers:{Authorization:`Bearer ${i}`,...r?.headers}}).then(async f=>f.json())};async function Ju(n){let r=new URLSearchParams;r.append("client_id",Zu),r.append("refresh_token",n),r.append("grant_type","refresh_token");let o=await Ne("https://unsplash.com/oauth/token",{method:"POST",body:r});if(!o.ok)throw console.error("refresh tokens error:",await o.text()),new Error(o.statusText);let i=await o.json();return i.refresh_token=i.refresh_token??n,i}var ee=require("@raycast/api");var Ua=ce(require("node:process"),1),Na=ce(ja(),1);async function Ha(n){if(Ua.default.platform!=="darwin")throw new Error("macOS only");let{stdout:r}=await(0,Na.default)("osascript",["-e",n]);return r}var io=require("fs");var Ht=require("@raycast/api"),Ga=require("path"),Va=require("os");var Kh=(0,Ht.getPreferenceValues)();var Ya=n=>n[0]==="~"?(0,Ga.join)((0,Va.homedir)(),n.slice(1)):n;var Qa=async(n,r)=>{if(r==="hud")await(0,ee.showHUD)(n);else return await(0,ee.showToast)(ee.Toast.Style.Animated,n)},Yf=async({url:n,id:r,every:o,useHud:i=!1,isBackground:a=!1})=>{let{downloadSize:u,wallpaperPath:f}=(0,ee.getPreferenceValues)(),p=Ya(f||ee.environment.supportPath),m;a||((0,io.existsSync)(p)?m=await Qa("Downloading and setting wallpaper...",i?"hud":"toast"):m=await Qa("The selected path does not exist. Please select a valid path.",i?"hud":"toast"));let b=p.endsWith("/")?`${p}${r}-${u}.jpg`:`${p}/${r}-${u}.jpg`;try{let w=b,T=(0,io.existsSync)(w)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${n}"
        do shell script cmd`;if(await Ha(`
      set temp_folder to (POSIX path of "${w}")
      set q_temp_folder to quoted form of temp_folder

      ${T}

      set x to alias (POSIX file temp_folder)

      try
        tell application "System Events"
          tell ${o?"every":"current"} desktop
            set picture to (x as text)
            return "ok"
          end tell
        end tell
      on error
        set dialogTitle to "Error Setting Wallpaper"
        set dialogText to "Please make sure you have given Raycast the required permission. To make sure, click the button below and grant Raycast the 'System Events' permission."

        display alert dialogTitle message dialogText buttons {"Cancel", "Open Preferences"} default button 2 as informational
          if button returned of result is "Open Preferences" then
            do shell script "open 'x-apple.systempreferences:com.apple.preference.security?Privacy_Automation'"
          end if

        return "error"
      end try
    `)!=="ok")throw new Error("Error setting wallpaper.");return i?!a&&await(0,ee.showHUD)("Wallpaper set!"):m&&(m.style=ee.Toast.Style.Success,m.title="Wallpaper set!"),!0}catch(w){return console.error(w),m&&(m.style=ee.Toast.Style.Failure,m.title="Something went wrong.",m.message="Try with another image or check your internet connection."),!1}},Ka=Yf;var Xa=["4324303","8647859","298137","2476111","1065976","3430431","1114848","2063295","9389477","932210"],so=async n=>{let{collections:r,includeDefaults:o}=(0,me.getPreferenceValues)(),i=r?.split(", "),a=o==="yes"&&i?[...Xa,...i]:i||Xa,u=await zn(`/photos/random?orientation=landscape&collections=${encodeURIComponent(a.join(","))}`);if(u.errors){(0,me.showHUD)(u.errors[0]);return}let{urls:f,id:p}=u,m=f?.raw||f?.full||f?.regular;await Ka({url:m,id:String(p),useHud:!0,every:!0,isBackground:me.environment.launchType===me.LaunchType.Background})&&await me.LocalStorage.setItem("last-time",n)};var Oe=require("@raycast/api"),Qf=async()=>{let n=new Date,{updateTime:r}=(0,Oe.getPreferenceValues)(),o=await Oe.LocalStorage.getItem("last-time");if(Oe.environment.launchType===Oe.LaunchType.Background){if(r!=="none"&&o!==void 0){let i=new Date(o),a=r.split(" ");switch(a[1]){case"minute":i.setMinutes(i.getMinutes()+Number(a[0]));break;case"hour":i.setHours(i.getHours()+Number(a[0]));break;case"day":i.setDate(i.getDate()+Number(a[0]));break}i.setSeconds(i.getSeconds()-10),i<=n&&await so(n.getTime())}}else await so(n.getTime())},Kf=Qf;0&&(module.exports={});
/*! fetch-blob. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wärting <https://jimmy.warting.se/opensource> */
