"use strict";var Uu=Object.create;var qr=Object.defineProperty;var ju=Object.getOwnPropertyDescriptor;var Nu=Object.getOwnPropertyNames;var Hu=Object.getPrototypeOf,Gu=Object.prototype.hasOwnProperty;var Mt=(r,t)=>()=>(r&&(t=r(r=0)),t);var A=(r,t)=>()=>(t||r((t={exports:{}}).exports,t),t.exports),Bi=(r,t)=>{for(var o in t)qr(r,o,{get:t[o],enumerable:!0})},qi=(r,t,o,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of Nu(t))!Gu.call(r,s)&&s!==o&&qr(r,s,{get:()=>t[s],enumerable:!(i=ju(t,s))||i.enumerable});return r};var pe=(r,t,o)=>(o=r!=null?Uu(Hu(r)):{},qi(t||!r||!r.__esModule?qr(o,"default",{value:r,enumerable:!0}):o,r)),Vu=r=>qi(qr({},"__esModule",{value:!0}),r);var Wi=A((Dr,Li)=>{(function(r,t){typeof Dr=="object"&&typeof Li<"u"?t(Dr):typeof define=="function"&&define.amd?define(["exports"],t):(r=typeof globalThis<"u"?globalThis:r||self,t(r.WebStreamsPolyfill={}))})(Dr,function(r){"use strict";let t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol:e=>`Symbol(${e})`;function o(){}function i(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global}let s=i();function u(e){return typeof e=="object"&&e!==null||typeof e=="function"}let c=o,h=Promise,m=Promise.prototype.then,b=Promise.resolve.bind(h),w=Promise.reject.bind(h);function R(e){return new h(e)}function S(e){return b(e)}function g(e){return w(e)}function y(e,n,a){return m.call(e,n,a)}function C(e,n,a){y(y(e,n,a),void 0,c)}function P(e,n){C(e,n)}function v(e,n){C(e,void 0,n)}function L(e,n,a){return y(e,n,a)}function H(e){y(e,void 0,c)}let I=(()=>{let e=s&&s.queueMicrotask;if(typeof e=="function")return e;let n=S(void 0);return a=>y(n,a)})();function M(e,n,a){if(typeof e!="function")throw new TypeError("Argument is not a function");return Function.prototype.apply.call(e,n,a)}function B(e,n,a){try{return S(M(e,n,a))}catch(l){return g(l)}}let le=16384;class Z{constructor(){this._cursor=0,this._size=0,this._front={_elements:[],_next:void 0},this._back=this._front,this._cursor=0,this._size=0}get length(){return this._size}push(n){let a=this._back,l=a;a._elements.length===le-1&&(l={_elements:[],_next:void 0}),a._elements.push(n),l!==a&&(this._back=l,a._next=l),++this._size}shift(){let n=this._front,a=n,l=this._cursor,f=l+1,d=n._elements,p=d[l];return f===le&&(a=n._next,f=0),--this._size,this._cursor=f,n!==a&&(this._front=a),d[l]=void 0,p}forEach(n){let a=this._cursor,l=this._front,f=l._elements;for(;(a!==f.length||l._next!==void 0)&&!(a===f.length&&(l=l._next,f=l._elements,a=0,f.length===0));)n(f[a]),++a}peek(){let n=this._front,a=this._cursor;return n._elements[a]}}function go(e,n){e._ownerReadableStream=n,n._reader=e,n._state==="readable"?cn(e):n._state==="closed"?yl(e):So(e,n._storedError)}function un(e,n){let a=e._ownerReadableStream;return fe(a,n)}function _e(e){e._ownerReadableStream._state==="readable"?fn(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")):gl(e,new TypeError("Reader was released and can no longer be used to monitor the stream's closedness")),e._ownerReadableStream._reader=void 0,e._ownerReadableStream=void 0}function et(e){return new TypeError("Cannot "+e+" a stream using a released reader")}function cn(e){e._closedPromise=R((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a})}function So(e,n){cn(e),fn(e,n)}function yl(e){cn(e),_o(e)}function fn(e,n){e._closedPromise_reject!==void 0&&(H(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}function gl(e,n){So(e,n)}function _o(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0)}let wo=t("[[AbortSteps]]"),Ro=t("[[ErrorSteps]]"),dn=t("[[CancelSteps]]"),hn=t("[[PullSteps]]"),To=Number.isFinite||function(e){return typeof e=="number"&&isFinite(e)},Sl=Math.trunc||function(e){return e<0?Math.ceil(e):Math.floor(e)};function _l(e){return typeof e=="object"||typeof e=="function"}function we(e,n){if(e!==void 0&&!_l(e))throw new TypeError(`${n} is not an object.`)}function ue(e,n){if(typeof e!="function")throw new TypeError(`${n} is not a function.`)}function wl(e){return typeof e=="object"&&e!==null||typeof e=="function"}function Eo(e,n){if(!wl(e))throw new TypeError(`${n} is not an object.`)}function Re(e,n,a){if(e===void 0)throw new TypeError(`Parameter ${n} is required in '${a}'.`)}function mn(e,n,a){if(e===void 0)throw new TypeError(`${n} is required in '${a}'.`)}function pn(e){return Number(e)}function Co(e){return e===0?0:e}function Rl(e){return Co(Sl(e))}function Po(e,n){let l=Number.MAX_SAFE_INTEGER,f=Number(e);if(f=Co(f),!To(f))throw new TypeError(`${n} is not a finite number`);if(f=Rl(f),f<0||f>l)throw new TypeError(`${n} is outside the accepted range of ${0} to ${l}, inclusive`);return!To(f)||f===0?0:f}function bn(e,n){if(!qe(e))throw new TypeError(`${n} is not a ReadableStream.`)}function tt(e){return new Pt(e)}function Ao(e,n){e._reader._readRequests.push(n)}function yn(e,n,a){let f=e._reader._readRequests.shift();a?f._closeSteps():f._chunkSteps(n)}function rr(e){return e._reader._readRequests.length}function vo(e){let n=e._reader;return!(n===void 0||!Ie(n))}class Pt{constructor(n){if(Re(n,1,"ReadableStreamDefaultReader"),bn(n,"First parameter"),De(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");go(this,n),this._readRequests=new Z}get closed(){return Ie(this)?this._closedPromise:g(nr("closed"))}cancel(n=void 0){return Ie(this)?this._ownerReadableStream===void 0?g(et("cancel")):un(this,n):g(nr("cancel"))}read(){if(!Ie(this))return g(nr("read"));if(this._ownerReadableStream===void 0)return g(et("read from"));let n,a,l=R((d,p)=>{n=d,a=p});return At(this,{_chunkSteps:d=>n({value:d,done:!1}),_closeSteps:()=>n({value:void 0,done:!0}),_errorSteps:d=>a(d)}),l}releaseLock(){if(!Ie(this))throw nr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");_e(this)}}}Object.defineProperties(Pt.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Pt.prototype,t.toStringTag,{value:"ReadableStreamDefaultReader",configurable:!0});function Ie(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readRequests")?!1:e instanceof Pt}function At(e,n){let a=e._ownerReadableStream;a._disturbed=!0,a._state==="closed"?n._closeSteps():a._state==="errored"?n._errorSteps(a._storedError):a._readableStreamController[hn](n)}function nr(e){return new TypeError(`ReadableStreamDefaultReader.prototype.${e} can only be used on a ReadableStreamDefaultReader`)}let ko=Object.getPrototypeOf(Object.getPrototypeOf(async function*(){}).prototype);class Io{constructor(n,a){this._ongoingPromise=void 0,this._isFinished=!1,this._reader=n,this._preventCancel=a}next(){let n=()=>this._nextSteps();return this._ongoingPromise=this._ongoingPromise?L(this._ongoingPromise,n,n):n(),this._ongoingPromise}return(n){let a=()=>this._returnSteps(n);return this._ongoingPromise?L(this._ongoingPromise,a,a):a()}_nextSteps(){if(this._isFinished)return Promise.resolve({value:void 0,done:!0});let n=this._reader;if(n._ownerReadableStream===void 0)return g(et("iterate"));let a,l,f=R((p,_)=>{a=p,l=_});return At(n,{_chunkSteps:p=>{this._ongoingPromise=void 0,I(()=>a({value:p,done:!1}))},_closeSteps:()=>{this._ongoingPromise=void 0,this._isFinished=!0,_e(n),a({value:void 0,done:!0})},_errorSteps:p=>{this._ongoingPromise=void 0,this._isFinished=!0,_e(n),l(p)}}),f}_returnSteps(n){if(this._isFinished)return Promise.resolve({value:n,done:!0});this._isFinished=!0;let a=this._reader;if(a._ownerReadableStream===void 0)return g(et("finish iterating"));if(!this._preventCancel){let l=un(a,n);return _e(a),L(l,()=>({value:n,done:!0}))}return _e(a),S({value:n,done:!0})}}let xo={next(){return Oo(this)?this._asyncIteratorImpl.next():g(Bo("next"))},return(e){return Oo(this)?this._asyncIteratorImpl.return(e):g(Bo("return"))}};ko!==void 0&&Object.setPrototypeOf(xo,ko);function Tl(e,n){let a=tt(e),l=new Io(a,n),f=Object.create(xo);return f._asyncIteratorImpl=l,f}function Oo(e){if(!u(e)||!Object.prototype.hasOwnProperty.call(e,"_asyncIteratorImpl"))return!1;try{return e._asyncIteratorImpl instanceof Io}catch{return!1}}function Bo(e){return new TypeError(`ReadableStreamAsyncIterator.${e} can only be used on a ReadableSteamAsyncIterator`)}let qo=Number.isNaN||function(e){return e!==e};function vt(e){return e.slice()}function Do(e,n,a,l,f){new Uint8Array(e).set(new Uint8Array(a,l,f),n)}function wd(e){return e}function or(e){return!1}function Lo(e,n,a){if(e.slice)return e.slice(n,a);let l=a-n,f=new ArrayBuffer(l);return Do(f,0,e,n,l),f}function El(e){return!(typeof e!="number"||qo(e)||e<0)}function Wo(e){let n=Lo(e.buffer,e.byteOffset,e.byteOffset+e.byteLength);return new Uint8Array(n)}function gn(e){let n=e._queue.shift();return e._queueTotalSize-=n.size,e._queueTotalSize<0&&(e._queueTotalSize=0),n.value}function Sn(e,n,a){if(!El(a)||a===1/0)throw new RangeError("Size must be a finite, non-NaN, non-negative number.");e._queue.push({value:n,size:a}),e._queueTotalSize+=a}function Cl(e){return e._queue.peek().value}function xe(e){e._queue=new Z,e._queueTotalSize=0}class kt{constructor(){throw new TypeError("Illegal constructor")}get view(){if(!_n(this))throw En("view");return this._view}respond(n){if(!_n(this))throw En("respond");if(Re(n,1,"respond"),n=Po(n,"First parameter"),this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");or(this._view.buffer),ur(this._associatedReadableByteStreamController,n)}respondWithNewView(n){if(!_n(this))throw En("respondWithNewView");if(Re(n,1,"respondWithNewView"),!ArrayBuffer.isView(n))throw new TypeError("You can only respond with array buffer views");if(this._associatedReadableByteStreamController===void 0)throw new TypeError("This BYOB request has been invalidated");or(n.buffer),cr(this._associatedReadableByteStreamController,n)}}Object.defineProperties(kt.prototype,{respond:{enumerable:!0},respondWithNewView:{enumerable:!0},view:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(kt.prototype,t.toStringTag,{value:"ReadableStreamBYOBRequest",configurable:!0});class rt{constructor(){throw new TypeError("Illegal constructor")}get byobRequest(){if(!Me(this))throw xt("byobRequest");return Tn(this)}get desiredSize(){if(!Me(this))throw xt("desiredSize");return Ho(this)}close(){if(!Me(this))throw xt("close");if(this._closeRequested)throw new TypeError("The stream has already been closed; do not close it again!");let n=this._controlledReadableByteStream._state;if(n!=="readable")throw new TypeError(`The stream (in ${n} state) is not in the readable state and cannot be closed`);It(this)}enqueue(n){if(!Me(this))throw xt("enqueue");if(Re(n,1,"enqueue"),!ArrayBuffer.isView(n))throw new TypeError("chunk must be an array buffer view");if(n.byteLength===0)throw new TypeError("chunk must have non-zero byteLength");if(n.buffer.byteLength===0)throw new TypeError("chunk's buffer must have non-zero byteLength");if(this._closeRequested)throw new TypeError("stream is closed or draining");let a=this._controlledReadableByteStream._state;if(a!=="readable")throw new TypeError(`The stream (in ${a} state) is not in the readable state and cannot be enqueued to`);lr(this,n)}error(n=void 0){if(!Me(this))throw xt("error");ce(this,n)}[dn](n){Fo(this),xe(this);let a=this._cancelAlgorithm(n);return sr(this),a}[hn](n){let a=this._controlledReadableByteStream;if(this._queueTotalSize>0){let f=this._queue.shift();this._queueTotalSize-=f.byteLength,Uo(this);let d=new Uint8Array(f.buffer,f.byteOffset,f.byteLength);n._chunkSteps(d);return}let l=this._autoAllocateChunkSize;if(l!==void 0){let f;try{f=new ArrayBuffer(l)}catch(p){n._errorSteps(p);return}let d={buffer:f,bufferByteLength:l,byteOffset:0,byteLength:l,bytesFilled:0,elementSize:1,viewConstructor:Uint8Array,readerType:"default"};this._pendingPullIntos.push(d)}Ao(a,n),Ue(this)}}Object.defineProperties(rt.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},byobRequest:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(rt.prototype,t.toStringTag,{value:"ReadableByteStreamController",configurable:!0});function Me(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableByteStream")?!1:e instanceof rt}function _n(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_associatedReadableByteStreamController")?!1:e instanceof kt}function Ue(e){if(!kl(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();C(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Ue(e))},l=>{ce(e,l)})}function Fo(e){Rn(e),e._pendingPullIntos=new Z}function wn(e,n){let a=!1;e._state==="closed"&&(a=!0);let l=$o(n);n.readerType==="default"?yn(e,l,a):Ol(e,l,a)}function $o(e){let n=e.bytesFilled,a=e.elementSize;return new e.viewConstructor(e.buffer,e.byteOffset,n/a)}function ir(e,n,a,l){e._queue.push({buffer:n,byteOffset:a,byteLength:l}),e._queueTotalSize+=l}function zo(e,n){let a=n.elementSize,l=n.bytesFilled-n.bytesFilled%a,f=Math.min(e._queueTotalSize,n.byteLength-n.bytesFilled),d=n.bytesFilled+f,p=d-d%a,_=f,E=!1;p>l&&(_=p-n.bytesFilled,E=!0);let x=e._queue;for(;_>0;){let q=x.peek(),D=Math.min(_,q.byteLength),U=n.byteOffset+n.bytesFilled;Do(n.buffer,U,q.buffer,q.byteOffset,D),q.byteLength===D?x.shift():(q.byteOffset+=D,q.byteLength-=D),e._queueTotalSize-=D,Mo(e,D,n),_-=D}return E}function Mo(e,n,a){a.bytesFilled+=n}function Uo(e){e._queueTotalSize===0&&e._closeRequested?(sr(e),$t(e._controlledReadableByteStream)):Ue(e)}function Rn(e){e._byobRequest!==null&&(e._byobRequest._associatedReadableByteStreamController=void 0,e._byobRequest._view=null,e._byobRequest=null)}function jo(e){for(;e._pendingPullIntos.length>0;){if(e._queueTotalSize===0)return;let n=e._pendingPullIntos.peek();zo(e,n)&&(ar(e),wn(e._controlledReadableByteStream,n))}}function Pl(e,n,a){let l=e._controlledReadableByteStream,f=1;n.constructor!==DataView&&(f=n.constructor.BYTES_PER_ELEMENT);let d=n.constructor,p=n.buffer,_={buffer:p,bufferByteLength:p.byteLength,byteOffset:n.byteOffset,byteLength:n.byteLength,bytesFilled:0,elementSize:f,viewConstructor:d,readerType:"byob"};if(e._pendingPullIntos.length>0){e._pendingPullIntos.push(_),Yo(l,a);return}if(l._state==="closed"){let E=new d(_.buffer,_.byteOffset,0);a._closeSteps(E);return}if(e._queueTotalSize>0){if(zo(e,_)){let E=$o(_);Uo(e),a._chunkSteps(E);return}if(e._closeRequested){let E=new TypeError("Insufficient bytes to fill elements in the given buffer");ce(e,E),a._errorSteps(E);return}}e._pendingPullIntos.push(_),Yo(l,a),Ue(e)}function Al(e,n){let a=e._controlledReadableByteStream;if(Cn(a))for(;Qo(a)>0;){let l=ar(e);wn(a,l)}}function vl(e,n,a){if(Mo(e,n,a),a.bytesFilled<a.elementSize)return;ar(e);let l=a.bytesFilled%a.elementSize;if(l>0){let f=a.byteOffset+a.bytesFilled,d=Lo(a.buffer,f-l,f);ir(e,d,0,d.byteLength)}a.bytesFilled-=l,wn(e._controlledReadableByteStream,a),jo(e)}function No(e,n){let a=e._pendingPullIntos.peek();Rn(e),e._controlledReadableByteStream._state==="closed"?Al(e):vl(e,n,a),Ue(e)}function ar(e){return e._pendingPullIntos.shift()}function kl(e){let n=e._controlledReadableByteStream;return n._state!=="readable"||e._closeRequested||!e._started?!1:!!(vo(n)&&rr(n)>0||Cn(n)&&Qo(n)>0||Ho(e)>0)}function sr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0}function It(e){let n=e._controlledReadableByteStream;if(!(e._closeRequested||n._state!=="readable")){if(e._queueTotalSize>0){e._closeRequested=!0;return}if(e._pendingPullIntos.length>0&&e._pendingPullIntos.peek().bytesFilled>0){let l=new TypeError("Insufficient bytes to fill elements in the given buffer");throw ce(e,l),l}sr(e),$t(n)}}function lr(e,n){let a=e._controlledReadableByteStream;if(e._closeRequested||a._state!=="readable")return;let l=n.buffer,f=n.byteOffset,d=n.byteLength,p=l;if(e._pendingPullIntos.length>0){let _=e._pendingPullIntos.peek();or(_.buffer),_.buffer=_.buffer}if(Rn(e),vo(a))if(rr(a)===0)ir(e,p,f,d);else{e._pendingPullIntos.length>0&&ar(e);let _=new Uint8Array(p,f,d);yn(a,_,!1)}else Cn(a)?(ir(e,p,f,d),jo(e)):ir(e,p,f,d);Ue(e)}function ce(e,n){let a=e._controlledReadableByteStream;a._state==="readable"&&(Fo(e),xe(e),sr(e),Si(a,n))}function Tn(e){if(e._byobRequest===null&&e._pendingPullIntos.length>0){let n=e._pendingPullIntos.peek(),a=new Uint8Array(n.buffer,n.byteOffset+n.bytesFilled,n.byteLength-n.bytesFilled),l=Object.create(kt.prototype);xl(l,e,a),e._byobRequest=l}return e._byobRequest}function Ho(e){let n=e._controlledReadableByteStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function ur(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n!==0)throw new TypeError("bytesWritten must be 0 when calling respond() on a closed stream")}else{if(n===0)throw new TypeError("bytesWritten must be greater than 0 when calling respond() on a readable stream");if(a.bytesFilled+n>a.byteLength)throw new RangeError("bytesWritten out of range")}a.buffer=a.buffer,No(e,n)}function cr(e,n){let a=e._pendingPullIntos.peek();if(e._controlledReadableByteStream._state==="closed"){if(n.byteLength!==0)throw new TypeError("The view's length must be 0 when calling respondWithNewView() on a closed stream")}else if(n.byteLength===0)throw new TypeError("The view's length must be greater than 0 when calling respondWithNewView() on a readable stream");if(a.byteOffset+a.bytesFilled!==n.byteOffset)throw new RangeError("The region specified by view does not match byobRequest");if(a.bufferByteLength!==n.buffer.byteLength)throw new RangeError("The buffer of view has different capacity than byobRequest");if(a.bytesFilled+n.byteLength>a.byteLength)throw new RangeError("The region specified by view is larger than byobRequest");let f=n.byteLength;a.buffer=n.buffer,No(e,f)}function Go(e,n,a,l,f,d,p){n._controlledReadableByteStream=e,n._pullAgain=!1,n._pulling=!1,n._byobRequest=null,n._queue=n._queueTotalSize=void 0,xe(n),n._closeRequested=!1,n._started=!1,n._strategyHWM=d,n._pullAlgorithm=l,n._cancelAlgorithm=f,n._autoAllocateChunkSize=p,n._pendingPullIntos=new Z,e._readableStreamController=n;let _=a();C(S(_),()=>{n._started=!0,Ue(n)},E=>{ce(n,E)})}function Il(e,n,a){let l=Object.create(rt.prototype),f=()=>{},d=()=>S(void 0),p=()=>S(void 0);n.start!==void 0&&(f=()=>n.start(l)),n.pull!==void 0&&(d=()=>n.pull(l)),n.cancel!==void 0&&(p=E=>n.cancel(E));let _=n.autoAllocateChunkSize;if(_===0)throw new TypeError("autoAllocateChunkSize must be greater than 0");Go(e,l,f,d,p,a,_)}function xl(e,n,a){e._associatedReadableByteStreamController=n,e._view=a}function En(e){return new TypeError(`ReadableStreamBYOBRequest.prototype.${e} can only be used on a ReadableStreamBYOBRequest`)}function xt(e){return new TypeError(`ReadableByteStreamController.prototype.${e} can only be used on a ReadableByteStreamController`)}function Vo(e){return new Ot(e)}function Yo(e,n){e._reader._readIntoRequests.push(n)}function Ol(e,n,a){let f=e._reader._readIntoRequests.shift();a?f._closeSteps(n):f._chunkSteps(n)}function Qo(e){return e._reader._readIntoRequests.length}function Cn(e){let n=e._reader;return!(n===void 0||!je(n))}class Ot{constructor(n){if(Re(n,1,"ReadableStreamBYOBReader"),bn(n,"First parameter"),De(n))throw new TypeError("This stream has already been locked for exclusive reading by another reader");if(!Me(n._readableStreamController))throw new TypeError("Cannot construct a ReadableStreamBYOBReader for a stream not constructed with a byte source");go(this,n),this._readIntoRequests=new Z}get closed(){return je(this)?this._closedPromise:g(fr("closed"))}cancel(n=void 0){return je(this)?this._ownerReadableStream===void 0?g(et("cancel")):un(this,n):g(fr("cancel"))}read(n){if(!je(this))return g(fr("read"));if(!ArrayBuffer.isView(n))return g(new TypeError("view must be an array buffer view"));if(n.byteLength===0)return g(new TypeError("view must have non-zero byteLength"));if(n.buffer.byteLength===0)return g(new TypeError("view's buffer must have non-zero byteLength"));if(or(n.buffer),this._ownerReadableStream===void 0)return g(et("read from"));let a,l,f=R((p,_)=>{a=p,l=_});return Xo(this,n,{_chunkSteps:p=>a({value:p,done:!1}),_closeSteps:p=>a({value:p,done:!0}),_errorSteps:p=>l(p)}),f}releaseLock(){if(!je(this))throw fr("releaseLock");if(this._ownerReadableStream!==void 0){if(this._readIntoRequests.length>0)throw new TypeError("Tried to release a reader lock when that reader has pending read() calls un-settled");_e(this)}}}Object.defineProperties(Ot.prototype,{cancel:{enumerable:!0},read:{enumerable:!0},releaseLock:{enumerable:!0},closed:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ot.prototype,t.toStringTag,{value:"ReadableStreamBYOBReader",configurable:!0});function je(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readIntoRequests")?!1:e instanceof Ot}function Xo(e,n,a){let l=e._ownerReadableStream;l._disturbed=!0,l._state==="errored"?a._errorSteps(l._storedError):Pl(l._readableStreamController,n,a)}function fr(e){return new TypeError(`ReadableStreamBYOBReader.prototype.${e} can only be used on a ReadableStreamBYOBReader`)}function Bt(e,n){let{highWaterMark:a}=e;if(a===void 0)return n;if(qo(a)||a<0)throw new RangeError("Invalid highWaterMark");return a}function dr(e){let{size:n}=e;return n||(()=>1)}function hr(e,n){we(e,n);let a=e?.highWaterMark,l=e?.size;return{highWaterMark:a===void 0?void 0:pn(a),size:l===void 0?void 0:Bl(l,`${n} has member 'size' that`)}}function Bl(e,n){return ue(e,n),a=>pn(e(a))}function ql(e,n){we(e,n);let a=e?.abort,l=e?.close,f=e?.start,d=e?.type,p=e?.write;return{abort:a===void 0?void 0:Dl(a,e,`${n} has member 'abort' that`),close:l===void 0?void 0:Ll(l,e,`${n} has member 'close' that`),start:f===void 0?void 0:Wl(f,e,`${n} has member 'start' that`),write:p===void 0?void 0:Fl(p,e,`${n} has member 'write' that`),type:d}}function Dl(e,n,a){return ue(e,a),l=>B(e,n,[l])}function Ll(e,n,a){return ue(e,a),()=>B(e,n,[])}function Wl(e,n,a){return ue(e,a),l=>M(e,n,[l])}function Fl(e,n,a){return ue(e,a),(l,f)=>B(e,n,[l,f])}function Ko(e,n){if(!nt(e))throw new TypeError(`${n} is not a WritableStream.`)}function $l(e){if(typeof e!="object"||e===null)return!1;try{return typeof e.aborted=="boolean"}catch{return!1}}let zl=typeof AbortController=="function";function Ml(){if(zl)return new AbortController}class qt{constructor(n={},a={}){n===void 0?n=null:Eo(n,"First parameter");let l=hr(a,"Second parameter"),f=ql(n,"First parameter");if(Jo(this),f.type!==void 0)throw new RangeError("Invalid type is specified");let p=dr(l),_=Bt(l,1);tu(this,f,_,p)}get locked(){if(!nt(this))throw gr("locked");return ot(this)}abort(n=void 0){return nt(this)?ot(this)?g(new TypeError("Cannot abort a stream that already has a writer")):mr(this,n):g(gr("abort"))}close(){return nt(this)?ot(this)?g(new TypeError("Cannot close a stream that already has a writer")):me(this)?g(new TypeError("Cannot close an already-closing stream")):ei(this):g(gr("close"))}getWriter(){if(!nt(this))throw gr("getWriter");return Zo(this)}}Object.defineProperties(qt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},getWriter:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(qt.prototype,t.toStringTag,{value:"WritableStream",configurable:!0});function Zo(e){return new Dt(e)}function Ul(e,n,a,l,f=1,d=()=>1){let p=Object.create(qt.prototype);Jo(p);let _=Object.create(it.prototype);return ai(p,_,e,n,a,l,f,d),p}function Jo(e){e._state="writable",e._storedError=void 0,e._writer=void 0,e._writableStreamController=void 0,e._writeRequests=new Z,e._inFlightWriteRequest=void 0,e._closeRequest=void 0,e._inFlightCloseRequest=void 0,e._pendingAbortRequest=void 0,e._backpressure=!1}function nt(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_writableStreamController")?!1:e instanceof qt}function ot(e){return e._writer!==void 0}function mr(e,n){var a;if(e._state==="closed"||e._state==="errored")return S(void 0);e._writableStreamController._abortReason=n,(a=e._writableStreamController._abortController)===null||a===void 0||a.abort();let l=e._state;if(l==="closed"||l==="errored")return S(void 0);if(e._pendingAbortRequest!==void 0)return e._pendingAbortRequest._promise;let f=!1;l==="erroring"&&(f=!0,n=void 0);let d=R((p,_)=>{e._pendingAbortRequest={_promise:void 0,_resolve:p,_reject:_,_reason:n,_wasAlreadyErroring:f}});return e._pendingAbortRequest._promise=d,f||An(e,n),d}function ei(e){let n=e._state;if(n==="closed"||n==="errored")return g(new TypeError(`The stream (in ${n} state) is not in the writable state and cannot be closed`));let a=R((f,d)=>{let p={_resolve:f,_reject:d};e._closeRequest=p}),l=e._writer;return l!==void 0&&e._backpressure&&n==="writable"&&Ln(l),ru(e._writableStreamController),a}function jl(e){return R((a,l)=>{let f={_resolve:a,_reject:l};e._writeRequests.push(f)})}function Pn(e,n){if(e._state==="writable"){An(e,n);return}vn(e)}function An(e,n){let a=e._writableStreamController;e._state="erroring",e._storedError=n;let l=e._writer;l!==void 0&&ri(l,n),!Yl(e)&&a._started&&vn(e)}function vn(e){e._state="errored",e._writableStreamController[Ro]();let n=e._storedError;if(e._writeRequests.forEach(f=>{f._reject(n)}),e._writeRequests=new Z,e._pendingAbortRequest===void 0){pr(e);return}let a=e._pendingAbortRequest;if(e._pendingAbortRequest=void 0,a._wasAlreadyErroring){a._reject(n),pr(e);return}let l=e._writableStreamController[wo](a._reason);C(l,()=>{a._resolve(),pr(e)},f=>{a._reject(f),pr(e)})}function Nl(e){e._inFlightWriteRequest._resolve(void 0),e._inFlightWriteRequest=void 0}function Hl(e,n){e._inFlightWriteRequest._reject(n),e._inFlightWriteRequest=void 0,Pn(e,n)}function Gl(e){e._inFlightCloseRequest._resolve(void 0),e._inFlightCloseRequest=void 0,e._state==="erroring"&&(e._storedError=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._resolve(),e._pendingAbortRequest=void 0)),e._state="closed";let a=e._writer;a!==void 0&&ci(a)}function Vl(e,n){e._inFlightCloseRequest._reject(n),e._inFlightCloseRequest=void 0,e._pendingAbortRequest!==void 0&&(e._pendingAbortRequest._reject(n),e._pendingAbortRequest=void 0),Pn(e,n)}function me(e){return!(e._closeRequest===void 0&&e._inFlightCloseRequest===void 0)}function Yl(e){return!(e._inFlightWriteRequest===void 0&&e._inFlightCloseRequest===void 0)}function Ql(e){e._inFlightCloseRequest=e._closeRequest,e._closeRequest=void 0}function Xl(e){e._inFlightWriteRequest=e._writeRequests.shift()}function pr(e){e._closeRequest!==void 0&&(e._closeRequest._reject(e._storedError),e._closeRequest=void 0);let n=e._writer;n!==void 0&&qn(n,e._storedError)}function kn(e,n){let a=e._writer;a!==void 0&&n!==e._backpressure&&(n?uu(a):Ln(a)),e._backpressure=n}class Dt{constructor(n){if(Re(n,1,"WritableStreamDefaultWriter"),Ko(n,"First parameter"),ot(n))throw new TypeError("This stream has already been locked for exclusive writing by another writer");this._ownerWritableStream=n,n._writer=this;let a=n._state;if(a==="writable")!me(n)&&n._backpressure?_r(this):fi(this),Sr(this);else if(a==="erroring")Dn(this,n._storedError),Sr(this);else if(a==="closed")fi(this),su(this);else{let l=n._storedError;Dn(this,l),ui(this,l)}}get closed(){return Ne(this)?this._closedPromise:g(He("closed"))}get desiredSize(){if(!Ne(this))throw He("desiredSize");if(this._ownerWritableStream===void 0)throw Lt("desiredSize");return eu(this)}get ready(){return Ne(this)?this._readyPromise:g(He("ready"))}abort(n=void 0){return Ne(this)?this._ownerWritableStream===void 0?g(Lt("abort")):Kl(this,n):g(He("abort"))}close(){if(!Ne(this))return g(He("close"));let n=this._ownerWritableStream;return n===void 0?g(Lt("close")):me(n)?g(new TypeError("Cannot close an already-closing stream")):ti(this)}releaseLock(){if(!Ne(this))throw He("releaseLock");this._ownerWritableStream!==void 0&&ni(this)}write(n=void 0){return Ne(this)?this._ownerWritableStream===void 0?g(Lt("write to")):oi(this,n):g(He("write"))}}Object.defineProperties(Dt.prototype,{abort:{enumerable:!0},close:{enumerable:!0},releaseLock:{enumerable:!0},write:{enumerable:!0},closed:{enumerable:!0},desiredSize:{enumerable:!0},ready:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Dt.prototype,t.toStringTag,{value:"WritableStreamDefaultWriter",configurable:!0});function Ne(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_ownerWritableStream")?!1:e instanceof Dt}function Kl(e,n){let a=e._ownerWritableStream;return mr(a,n)}function ti(e){let n=e._ownerWritableStream;return ei(n)}function Zl(e){let n=e._ownerWritableStream,a=n._state;return me(n)||a==="closed"?S(void 0):a==="errored"?g(n._storedError):ti(e)}function Jl(e,n){e._closedPromiseState==="pending"?qn(e,n):lu(e,n)}function ri(e,n){e._readyPromiseState==="pending"?di(e,n):cu(e,n)}function eu(e){let n=e._ownerWritableStream,a=n._state;return a==="errored"||a==="erroring"?null:a==="closed"?0:si(n._writableStreamController)}function ni(e){let n=e._ownerWritableStream,a=new TypeError("Writer was released and can no longer be used to monitor the stream's closedness");ri(e,a),Jl(e,a),n._writer=void 0,e._ownerWritableStream=void 0}function oi(e,n){let a=e._ownerWritableStream,l=a._writableStreamController,f=nu(l,n);if(a!==e._ownerWritableStream)return g(Lt("write to"));let d=a._state;if(d==="errored")return g(a._storedError);if(me(a)||d==="closed")return g(new TypeError("The stream is closing or closed and cannot be written to"));if(d==="erroring")return g(a._storedError);let p=jl(a);return ou(l,n,f),p}let ii={};class it{constructor(){throw new TypeError("Illegal constructor")}get abortReason(){if(!In(this))throw Bn("abortReason");return this._abortReason}get signal(){if(!In(this))throw Bn("signal");if(this._abortController===void 0)throw new TypeError("WritableStreamDefaultController.prototype.signal is not supported");return this._abortController.signal}error(n=void 0){if(!In(this))throw Bn("error");this._controlledWritableStream._state==="writable"&&li(this,n)}[wo](n){let a=this._abortAlgorithm(n);return br(this),a}[Ro](){xe(this)}}Object.defineProperties(it.prototype,{abortReason:{enumerable:!0},signal:{enumerable:!0},error:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(it.prototype,t.toStringTag,{value:"WritableStreamDefaultController",configurable:!0});function In(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledWritableStream")?!1:e instanceof it}function ai(e,n,a,l,f,d,p,_){n._controlledWritableStream=e,e._writableStreamController=n,n._queue=void 0,n._queueTotalSize=void 0,xe(n),n._abortReason=void 0,n._abortController=Ml(),n._started=!1,n._strategySizeAlgorithm=_,n._strategyHWM=p,n._writeAlgorithm=l,n._closeAlgorithm=f,n._abortAlgorithm=d;let E=On(n);kn(e,E);let x=a(),q=S(x);C(q,()=>{n._started=!0,yr(n)},D=>{n._started=!0,Pn(e,D)})}function tu(e,n,a,l){let f=Object.create(it.prototype),d=()=>{},p=()=>S(void 0),_=()=>S(void 0),E=()=>S(void 0);n.start!==void 0&&(d=()=>n.start(f)),n.write!==void 0&&(p=x=>n.write(x,f)),n.close!==void 0&&(_=()=>n.close()),n.abort!==void 0&&(E=x=>n.abort(x)),ai(e,f,d,p,_,E,a,l)}function br(e){e._writeAlgorithm=void 0,e._closeAlgorithm=void 0,e._abortAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function ru(e){Sn(e,ii,0),yr(e)}function nu(e,n){try{return e._strategySizeAlgorithm(n)}catch(a){return xn(e,a),1}}function si(e){return e._strategyHWM-e._queueTotalSize}function ou(e,n,a){try{Sn(e,n,a)}catch(f){xn(e,f);return}let l=e._controlledWritableStream;if(!me(l)&&l._state==="writable"){let f=On(e);kn(l,f)}yr(e)}function yr(e){let n=e._controlledWritableStream;if(!e._started||n._inFlightWriteRequest!==void 0)return;if(n._state==="erroring"){vn(n);return}if(e._queue.length===0)return;let l=Cl(e);l===ii?iu(e):au(e,l)}function xn(e,n){e._controlledWritableStream._state==="writable"&&li(e,n)}function iu(e){let n=e._controlledWritableStream;Ql(n),gn(e);let a=e._closeAlgorithm();br(e),C(a,()=>{Gl(n)},l=>{Vl(n,l)})}function au(e,n){let a=e._controlledWritableStream;Xl(a);let l=e._writeAlgorithm(n);C(l,()=>{Nl(a);let f=a._state;if(gn(e),!me(a)&&f==="writable"){let d=On(e);kn(a,d)}yr(e)},f=>{a._state==="writable"&&br(e),Hl(a,f)})}function On(e){return si(e)<=0}function li(e,n){let a=e._controlledWritableStream;br(e),An(a,n)}function gr(e){return new TypeError(`WritableStream.prototype.${e} can only be used on a WritableStream`)}function Bn(e){return new TypeError(`WritableStreamDefaultController.prototype.${e} can only be used on a WritableStreamDefaultController`)}function He(e){return new TypeError(`WritableStreamDefaultWriter.prototype.${e} can only be used on a WritableStreamDefaultWriter`)}function Lt(e){return new TypeError("Cannot "+e+" a stream using a released writer")}function Sr(e){e._closedPromise=R((n,a)=>{e._closedPromise_resolve=n,e._closedPromise_reject=a,e._closedPromiseState="pending"})}function ui(e,n){Sr(e),qn(e,n)}function su(e){Sr(e),ci(e)}function qn(e,n){e._closedPromise_reject!==void 0&&(H(e._closedPromise),e._closedPromise_reject(n),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="rejected")}function lu(e,n){ui(e,n)}function ci(e){e._closedPromise_resolve!==void 0&&(e._closedPromise_resolve(void 0),e._closedPromise_resolve=void 0,e._closedPromise_reject=void 0,e._closedPromiseState="resolved")}function _r(e){e._readyPromise=R((n,a)=>{e._readyPromise_resolve=n,e._readyPromise_reject=a}),e._readyPromiseState="pending"}function Dn(e,n){_r(e),di(e,n)}function fi(e){_r(e),Ln(e)}function di(e,n){e._readyPromise_reject!==void 0&&(H(e._readyPromise),e._readyPromise_reject(n),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="rejected")}function uu(e){_r(e)}function cu(e,n){Dn(e,n)}function Ln(e){e._readyPromise_resolve!==void 0&&(e._readyPromise_resolve(void 0),e._readyPromise_resolve=void 0,e._readyPromise_reject=void 0,e._readyPromiseState="fulfilled")}let hi=typeof DOMException<"u"?DOMException:void 0;function fu(e){if(!(typeof e=="function"||typeof e=="object"))return!1;try{return new e,!0}catch{return!1}}function du(){let e=function(a,l){this.message=a||"",this.name=l||"Error",Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)};return e.prototype=Object.create(Error.prototype),Object.defineProperty(e.prototype,"constructor",{value:e,writable:!0,configurable:!0}),e}let hu=fu(hi)?hi:du();function mi(e,n,a,l,f,d){let p=tt(e),_=Zo(n);e._disturbed=!0;let E=!1,x=S(void 0);return R((q,D)=>{let U;if(d!==void 0){if(U=()=>{let T=new hu("Aborted","AbortError"),k=[];l||k.push(()=>n._state==="writable"?mr(n,T):S(void 0)),f||k.push(()=>e._state==="readable"?fe(e,T):S(void 0)),Y(()=>Promise.all(k.map(W=>W())),!0,T)},d.aborted){U();return}d.addEventListener("abort",U)}function de(){return R((T,k)=>{function W(J){J?T():y(lt(),W,k)}W(!1)})}function lt(){return E?S(!0):y(_._readyPromise,()=>R((T,k)=>{At(p,{_chunkSteps:W=>{x=y(oi(_,W),void 0,o),T(!1)},_closeSteps:()=>T(!0),_errorSteps:k})}))}if(Te(e,p._closedPromise,T=>{l?ne(!0,T):Y(()=>mr(n,T),!0,T)}),Te(n,_._closedPromise,T=>{f?ne(!0,T):Y(()=>fe(e,T),!0,T)}),V(e,p._closedPromise,()=>{a?ne():Y(()=>Zl(_))}),me(n)||n._state==="closed"){let T=new TypeError("the destination writable stream closed before all data could be piped to it");f?ne(!0,T):Y(()=>fe(e,T),!0,T)}H(de());function Le(){let T=x;return y(x,()=>T!==x?Le():void 0)}function Te(T,k,W){T._state==="errored"?W(T._storedError):v(k,W)}function V(T,k,W){T._state==="closed"?W():P(k,W)}function Y(T,k,W){if(E)return;E=!0,n._state==="writable"&&!me(n)?P(Le(),J):J();function J(){C(T(),()=>Ee(k,W),ut=>Ee(!0,ut))}}function ne(T,k){E||(E=!0,n._state==="writable"&&!me(n)?P(Le(),()=>Ee(T,k)):Ee(T,k))}function Ee(T,k){ni(_),_e(p),d!==void 0&&d.removeEventListener("abort",U),T?D(k):q(void 0)}})}class at{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!wr(this))throw Er("desiredSize");return Wn(this)}close(){if(!wr(this))throw Er("close");if(!st(this))throw new TypeError("The stream is not in a state that permits close");Ft(this)}enqueue(n=void 0){if(!wr(this))throw Er("enqueue");if(!st(this))throw new TypeError("The stream is not in a state that permits enqueue");return Tr(this,n)}error(n=void 0){if(!wr(this))throw Er("error");Oe(this,n)}[dn](n){xe(this);let a=this._cancelAlgorithm(n);return Rr(this),a}[hn](n){let a=this._controlledReadableStream;if(this._queue.length>0){let l=gn(this);this._closeRequested&&this._queue.length===0?(Rr(this),$t(a)):Wt(this),n._chunkSteps(l)}else Ao(a,n),Wt(this)}}Object.defineProperties(at.prototype,{close:{enumerable:!0},enqueue:{enumerable:!0},error:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(at.prototype,t.toStringTag,{value:"ReadableStreamDefaultController",configurable:!0});function wr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledReadableStream")?!1:e instanceof at}function Wt(e){if(!pi(e))return;if(e._pulling){e._pullAgain=!0;return}e._pulling=!0;let a=e._pullAlgorithm();C(a,()=>{e._pulling=!1,e._pullAgain&&(e._pullAgain=!1,Wt(e))},l=>{Oe(e,l)})}function pi(e){let n=e._controlledReadableStream;return!st(e)||!e._started?!1:!!(De(n)&&rr(n)>0||Wn(e)>0)}function Rr(e){e._pullAlgorithm=void 0,e._cancelAlgorithm=void 0,e._strategySizeAlgorithm=void 0}function Ft(e){if(!st(e))return;let n=e._controlledReadableStream;e._closeRequested=!0,e._queue.length===0&&(Rr(e),$t(n))}function Tr(e,n){if(!st(e))return;let a=e._controlledReadableStream;if(De(a)&&rr(a)>0)yn(a,n,!1);else{let l;try{l=e._strategySizeAlgorithm(n)}catch(f){throw Oe(e,f),f}try{Sn(e,n,l)}catch(f){throw Oe(e,f),f}}Wt(e)}function Oe(e,n){let a=e._controlledReadableStream;a._state==="readable"&&(xe(e),Rr(e),Si(a,n))}function Wn(e){let n=e._controlledReadableStream._state;return n==="errored"?null:n==="closed"?0:e._strategyHWM-e._queueTotalSize}function mu(e){return!pi(e)}function st(e){let n=e._controlledReadableStream._state;return!e._closeRequested&&n==="readable"}function bi(e,n,a,l,f,d,p){n._controlledReadableStream=e,n._queue=void 0,n._queueTotalSize=void 0,xe(n),n._started=!1,n._closeRequested=!1,n._pullAgain=!1,n._pulling=!1,n._strategySizeAlgorithm=p,n._strategyHWM=d,n._pullAlgorithm=l,n._cancelAlgorithm=f,e._readableStreamController=n;let _=a();C(S(_),()=>{n._started=!0,Wt(n)},E=>{Oe(n,E)})}function pu(e,n,a,l){let f=Object.create(at.prototype),d=()=>{},p=()=>S(void 0),_=()=>S(void 0);n.start!==void 0&&(d=()=>n.start(f)),n.pull!==void 0&&(p=()=>n.pull(f)),n.cancel!==void 0&&(_=E=>n.cancel(E)),bi(e,f,d,p,_,a,l)}function Er(e){return new TypeError(`ReadableStreamDefaultController.prototype.${e} can only be used on a ReadableStreamDefaultController`)}function bu(e,n){return Me(e._readableStreamController)?gu(e):yu(e)}function yu(e,n){let a=tt(e),l=!1,f=!1,d=!1,p=!1,_,E,x,q,D,U=R(V=>{D=V});function de(){return l?(f=!0,S(void 0)):(l=!0,At(a,{_chunkSteps:Y=>{I(()=>{f=!1;let ne=Y,Ee=Y;d||Tr(x._readableStreamController,ne),p||Tr(q._readableStreamController,Ee),l=!1,f&&de()})},_closeSteps:()=>{l=!1,d||Ft(x._readableStreamController),p||Ft(q._readableStreamController),(!d||!p)&&D(void 0)},_errorSteps:()=>{l=!1}}),S(void 0))}function lt(V){if(d=!0,_=V,p){let Y=vt([_,E]),ne=fe(e,Y);D(ne)}return U}function Le(V){if(p=!0,E=V,d){let Y=vt([_,E]),ne=fe(e,Y);D(ne)}return U}function Te(){}return x=Fn(Te,de,lt),q=Fn(Te,de,Le),v(a._closedPromise,V=>{Oe(x._readableStreamController,V),Oe(q._readableStreamController,V),(!d||!p)&&D(void 0)}),[x,q]}function gu(e){let n=tt(e),a=!1,l=!1,f=!1,d=!1,p=!1,_,E,x,q,D,U=R(T=>{D=T});function de(T){v(T._closedPromise,k=>{T===n&&(ce(x._readableStreamController,k),ce(q._readableStreamController,k),(!d||!p)&&D(void 0))})}function lt(){je(n)&&(_e(n),n=tt(e),de(n)),At(n,{_chunkSteps:k=>{I(()=>{l=!1,f=!1;let W=k,J=k;if(!d&&!p)try{J=Wo(k)}catch(ut){ce(x._readableStreamController,ut),ce(q._readableStreamController,ut),D(fe(e,ut));return}d||lr(x._readableStreamController,W),p||lr(q._readableStreamController,J),a=!1,l?Te():f&&V()})},_closeSteps:()=>{a=!1,d||It(x._readableStreamController),p||It(q._readableStreamController),x._readableStreamController._pendingPullIntos.length>0&&ur(x._readableStreamController,0),q._readableStreamController._pendingPullIntos.length>0&&ur(q._readableStreamController,0),(!d||!p)&&D(void 0)},_errorSteps:()=>{a=!1}})}function Le(T,k){Ie(n)&&(_e(n),n=Vo(e),de(n));let W=k?q:x,J=k?x:q;Xo(n,T,{_chunkSteps:ct=>{I(()=>{l=!1,f=!1;let ft=k?p:d;if(k?d:p)ft||cr(W._readableStreamController,ct);else{let Oi;try{Oi=Wo(ct)}catch(zn){ce(W._readableStreamController,zn),ce(J._readableStreamController,zn),D(fe(e,zn));return}ft||cr(W._readableStreamController,ct),lr(J._readableStreamController,Oi)}a=!1,l?Te():f&&V()})},_closeSteps:ct=>{a=!1;let ft=k?p:d,Br=k?d:p;ft||It(W._readableStreamController),Br||It(J._readableStreamController),ct!==void 0&&(ft||cr(W._readableStreamController,ct),!Br&&J._readableStreamController._pendingPullIntos.length>0&&ur(J._readableStreamController,0)),(!ft||!Br)&&D(void 0)},_errorSteps:()=>{a=!1}})}function Te(){if(a)return l=!0,S(void 0);a=!0;let T=Tn(x._readableStreamController);return T===null?lt():Le(T._view,!1),S(void 0)}function V(){if(a)return f=!0,S(void 0);a=!0;let T=Tn(q._readableStreamController);return T===null?lt():Le(T._view,!0),S(void 0)}function Y(T){if(d=!0,_=T,p){let k=vt([_,E]),W=fe(e,k);D(W)}return U}function ne(T){if(p=!0,E=T,d){let k=vt([_,E]),W=fe(e,k);D(W)}return U}function Ee(){}return x=gi(Ee,Te,Y),q=gi(Ee,V,ne),de(n),[x,q]}function Su(e,n){we(e,n);let a=e,l=a?.autoAllocateChunkSize,f=a?.cancel,d=a?.pull,p=a?.start,_=a?.type;return{autoAllocateChunkSize:l===void 0?void 0:Po(l,`${n} has member 'autoAllocateChunkSize' that`),cancel:f===void 0?void 0:_u(f,a,`${n} has member 'cancel' that`),pull:d===void 0?void 0:wu(d,a,`${n} has member 'pull' that`),start:p===void 0?void 0:Ru(p,a,`${n} has member 'start' that`),type:_===void 0?void 0:Tu(_,`${n} has member 'type' that`)}}function _u(e,n,a){return ue(e,a),l=>B(e,n,[l])}function wu(e,n,a){return ue(e,a),l=>B(e,n,[l])}function Ru(e,n,a){return ue(e,a),l=>M(e,n,[l])}function Tu(e,n){if(e=`${e}`,e!=="bytes")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamType`);return e}function Eu(e,n){we(e,n);let a=e?.mode;return{mode:a===void 0?void 0:Cu(a,`${n} has member 'mode' that`)}}function Cu(e,n){if(e=`${e}`,e!=="byob")throw new TypeError(`${n} '${e}' is not a valid enumeration value for ReadableStreamReaderMode`);return e}function Pu(e,n){we(e,n);let a=e?.preventCancel;return{preventCancel:Boolean(a)}}function yi(e,n){we(e,n);let a=e?.preventAbort,l=e?.preventCancel,f=e?.preventClose,d=e?.signal;return d!==void 0&&Au(d,`${n} has member 'signal' that`),{preventAbort:Boolean(a),preventCancel:Boolean(l),preventClose:Boolean(f),signal:d}}function Au(e,n){if(!$l(e))throw new TypeError(`${n} is not an AbortSignal.`)}function vu(e,n){we(e,n);let a=e?.readable;mn(a,"readable","ReadableWritablePair"),bn(a,`${n} has member 'readable' that`);let l=e?.writable;return mn(l,"writable","ReadableWritablePair"),Ko(l,`${n} has member 'writable' that`),{readable:a,writable:l}}class Be{constructor(n={},a={}){n===void 0?n=null:Eo(n,"First parameter");let l=hr(a,"Second parameter"),f=Su(n,"First parameter");if($n(this),f.type==="bytes"){if(l.size!==void 0)throw new RangeError("The strategy for a byte stream cannot have a size function");let d=Bt(l,0);Il(this,f,d)}else{let d=dr(l),p=Bt(l,1);pu(this,f,p,d)}}get locked(){if(!qe(this))throw Ge("locked");return De(this)}cancel(n=void 0){return qe(this)?De(this)?g(new TypeError("Cannot cancel a stream that already has a reader")):fe(this,n):g(Ge("cancel"))}getReader(n=void 0){if(!qe(this))throw Ge("getReader");return Eu(n,"First parameter").mode===void 0?tt(this):Vo(this)}pipeThrough(n,a={}){if(!qe(this))throw Ge("pipeThrough");Re(n,1,"pipeThrough");let l=vu(n,"First parameter"),f=yi(a,"Second parameter");if(De(this))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked ReadableStream");if(ot(l.writable))throw new TypeError("ReadableStream.prototype.pipeThrough cannot be used on a locked WritableStream");let d=mi(this,l.writable,f.preventClose,f.preventAbort,f.preventCancel,f.signal);return H(d),l.readable}pipeTo(n,a={}){if(!qe(this))return g(Ge("pipeTo"));if(n===void 0)return g("Parameter 1 is required in 'pipeTo'.");if(!nt(n))return g(new TypeError("ReadableStream.prototype.pipeTo's first argument must be a WritableStream"));let l;try{l=yi(a,"Second parameter")}catch(f){return g(f)}return De(this)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked ReadableStream")):ot(n)?g(new TypeError("ReadableStream.prototype.pipeTo cannot be used on a locked WritableStream")):mi(this,n,l.preventClose,l.preventAbort,l.preventCancel,l.signal)}tee(){if(!qe(this))throw Ge("tee");let n=bu(this);return vt(n)}values(n=void 0){if(!qe(this))throw Ge("values");let a=Pu(n,"First parameter");return Tl(this,a.preventCancel)}}Object.defineProperties(Be.prototype,{cancel:{enumerable:!0},getReader:{enumerable:!0},pipeThrough:{enumerable:!0},pipeTo:{enumerable:!0},tee:{enumerable:!0},values:{enumerable:!0},locked:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Be.prototype,t.toStringTag,{value:"ReadableStream",configurable:!0}),typeof t.asyncIterator=="symbol"&&Object.defineProperty(Be.prototype,t.asyncIterator,{value:Be.prototype.values,writable:!0,configurable:!0});function Fn(e,n,a,l=1,f=()=>1){let d=Object.create(Be.prototype);$n(d);let p=Object.create(at.prototype);return bi(d,p,e,n,a,l,f),d}function gi(e,n,a){let l=Object.create(Be.prototype);$n(l);let f=Object.create(rt.prototype);return Go(l,f,e,n,a,0,void 0),l}function $n(e){e._state="readable",e._reader=void 0,e._storedError=void 0,e._disturbed=!1}function qe(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_readableStreamController")?!1:e instanceof Be}function De(e){return e._reader!==void 0}function fe(e,n){if(e._disturbed=!0,e._state==="closed")return S(void 0);if(e._state==="errored")return g(e._storedError);$t(e);let a=e._reader;a!==void 0&&je(a)&&(a._readIntoRequests.forEach(f=>{f._closeSteps(void 0)}),a._readIntoRequests=new Z);let l=e._readableStreamController[dn](n);return L(l,o)}function $t(e){e._state="closed";let n=e._reader;n!==void 0&&(_o(n),Ie(n)&&(n._readRequests.forEach(a=>{a._closeSteps()}),n._readRequests=new Z))}function Si(e,n){e._state="errored",e._storedError=n;let a=e._reader;a!==void 0&&(fn(a,n),Ie(a)?(a._readRequests.forEach(l=>{l._errorSteps(n)}),a._readRequests=new Z):(a._readIntoRequests.forEach(l=>{l._errorSteps(n)}),a._readIntoRequests=new Z))}function Ge(e){return new TypeError(`ReadableStream.prototype.${e} can only be used on a ReadableStream`)}function _i(e,n){we(e,n);let a=e?.highWaterMark;return mn(a,"highWaterMark","QueuingStrategyInit"),{highWaterMark:pn(a)}}let wi=e=>e.byteLength;Object.defineProperty(wi,"name",{value:"size",configurable:!0});class Cr{constructor(n){Re(n,1,"ByteLengthQueuingStrategy"),n=_i(n,"First parameter"),this._byteLengthQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Ti(this))throw Ri("highWaterMark");return this._byteLengthQueuingStrategyHighWaterMark}get size(){if(!Ti(this))throw Ri("size");return wi}}Object.defineProperties(Cr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Cr.prototype,t.toStringTag,{value:"ByteLengthQueuingStrategy",configurable:!0});function Ri(e){return new TypeError(`ByteLengthQueuingStrategy.prototype.${e} can only be used on a ByteLengthQueuingStrategy`)}function Ti(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_byteLengthQueuingStrategyHighWaterMark")?!1:e instanceof Cr}let Ei=()=>1;Object.defineProperty(Ei,"name",{value:"size",configurable:!0});class Pr{constructor(n){Re(n,1,"CountQueuingStrategy"),n=_i(n,"First parameter"),this._countQueuingStrategyHighWaterMark=n.highWaterMark}get highWaterMark(){if(!Pi(this))throw Ci("highWaterMark");return this._countQueuingStrategyHighWaterMark}get size(){if(!Pi(this))throw Ci("size");return Ei}}Object.defineProperties(Pr.prototype,{highWaterMark:{enumerable:!0},size:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Pr.prototype,t.toStringTag,{value:"CountQueuingStrategy",configurable:!0});function Ci(e){return new TypeError(`CountQueuingStrategy.prototype.${e} can only be used on a CountQueuingStrategy`)}function Pi(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_countQueuingStrategyHighWaterMark")?!1:e instanceof Pr}function ku(e,n){we(e,n);let a=e?.flush,l=e?.readableType,f=e?.start,d=e?.transform,p=e?.writableType;return{flush:a===void 0?void 0:Iu(a,e,`${n} has member 'flush' that`),readableType:l,start:f===void 0?void 0:xu(f,e,`${n} has member 'start' that`),transform:d===void 0?void 0:Ou(d,e,`${n} has member 'transform' that`),writableType:p}}function Iu(e,n,a){return ue(e,a),l=>B(e,n,[l])}function xu(e,n,a){return ue(e,a),l=>M(e,n,[l])}function Ou(e,n,a){return ue(e,a),(l,f)=>B(e,n,[l,f])}class Ar{constructor(n={},a={},l={}){n===void 0&&(n=null);let f=hr(a,"Second parameter"),d=hr(l,"Third parameter"),p=ku(n,"First parameter");if(p.readableType!==void 0)throw new RangeError("Invalid readableType specified");if(p.writableType!==void 0)throw new RangeError("Invalid writableType specified");let _=Bt(d,0),E=dr(d),x=Bt(f,1),q=dr(f),D,U=R(de=>{D=de});Bu(this,U,x,q,_,E),Du(this,p),p.start!==void 0?D(p.start(this._transformStreamController)):D(void 0)}get readable(){if(!Ai(this))throw xi("readable");return this._readable}get writable(){if(!Ai(this))throw xi("writable");return this._writable}}Object.defineProperties(Ar.prototype,{readable:{enumerable:!0},writable:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(Ar.prototype,t.toStringTag,{value:"TransformStream",configurable:!0});function Bu(e,n,a,l,f,d){function p(){return n}function _(U){return Fu(e,U)}function E(U){return $u(e,U)}function x(){return zu(e)}e._writable=Ul(p,_,x,E,a,l);function q(){return Mu(e)}function D(U){return kr(e,U),S(void 0)}e._readable=Fn(p,q,D,f,d),e._backpressure=void 0,e._backpressureChangePromise=void 0,e._backpressureChangePromise_resolve=void 0,Ir(e,!0),e._transformStreamController=void 0}function Ai(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_transformStreamController")?!1:e instanceof Ar}function vr(e,n){Oe(e._readable._readableStreamController,n),kr(e,n)}function kr(e,n){vi(e._transformStreamController),xn(e._writable._writableStreamController,n),e._backpressure&&Ir(e,!1)}function Ir(e,n){e._backpressureChangePromise!==void 0&&e._backpressureChangePromise_resolve(),e._backpressureChangePromise=R(a=>{e._backpressureChangePromise_resolve=a}),e._backpressure=n}class zt{constructor(){throw new TypeError("Illegal constructor")}get desiredSize(){if(!xr(this))throw Or("desiredSize");let n=this._controlledTransformStream._readable._readableStreamController;return Wn(n)}enqueue(n=void 0){if(!xr(this))throw Or("enqueue");ki(this,n)}error(n=void 0){if(!xr(this))throw Or("error");Lu(this,n)}terminate(){if(!xr(this))throw Or("terminate");Wu(this)}}Object.defineProperties(zt.prototype,{enqueue:{enumerable:!0},error:{enumerable:!0},terminate:{enumerable:!0},desiredSize:{enumerable:!0}}),typeof t.toStringTag=="symbol"&&Object.defineProperty(zt.prototype,t.toStringTag,{value:"TransformStreamDefaultController",configurable:!0});function xr(e){return!u(e)||!Object.prototype.hasOwnProperty.call(e,"_controlledTransformStream")?!1:e instanceof zt}function qu(e,n,a,l){n._controlledTransformStream=e,e._transformStreamController=n,n._transformAlgorithm=a,n._flushAlgorithm=l}function Du(e,n){let a=Object.create(zt.prototype),l=d=>{try{return ki(a,d),S(void 0)}catch(p){return g(p)}},f=()=>S(void 0);n.transform!==void 0&&(l=d=>n.transform(d,a)),n.flush!==void 0&&(f=()=>n.flush(a)),qu(e,a,l,f)}function vi(e){e._transformAlgorithm=void 0,e._flushAlgorithm=void 0}function ki(e,n){let a=e._controlledTransformStream,l=a._readable._readableStreamController;if(!st(l))throw new TypeError("Readable side is not in a state that permits enqueue");try{Tr(l,n)}catch(d){throw kr(a,d),a._readable._storedError}mu(l)!==a._backpressure&&Ir(a,!0)}function Lu(e,n){vr(e._controlledTransformStream,n)}function Ii(e,n){let a=e._transformAlgorithm(n);return L(a,void 0,l=>{throw vr(e._controlledTransformStream,l),l})}function Wu(e){let n=e._controlledTransformStream,a=n._readable._readableStreamController;Ft(a);let l=new TypeError("TransformStream terminated");kr(n,l)}function Fu(e,n){let a=e._transformStreamController;if(e._backpressure){let l=e._backpressureChangePromise;return L(l,()=>{let f=e._writable;if(f._state==="erroring")throw f._storedError;return Ii(a,n)})}return Ii(a,n)}function $u(e,n){return vr(e,n),S(void 0)}function zu(e){let n=e._readable,a=e._transformStreamController,l=a._flushAlgorithm();return vi(a),L(l,()=>{if(n._state==="errored")throw n._storedError;Ft(n._readableStreamController)},f=>{throw vr(e,f),n._storedError})}function Mu(e){return Ir(e,!1),e._backpressureChangePromise}function Or(e){return new TypeError(`TransformStreamDefaultController.prototype.${e} can only be used on a TransformStreamDefaultController`)}function xi(e){return new TypeError(`TransformStream.prototype.${e} can only be used on a TransformStream`)}r.ByteLengthQueuingStrategy=Cr,r.CountQueuingStrategy=Pr,r.ReadableByteStreamController=rt,r.ReadableStream=Be,r.ReadableStreamBYOBReader=Ot,r.ReadableStreamBYOBRequest=kt,r.ReadableStreamDefaultController=at,r.ReadableStreamDefaultReader=Pt,r.TransformStream=Ar,r.TransformStreamDefaultController=zt,r.WritableStream=qt,r.WritableStreamDefaultController=it,r.WritableStreamDefaultWriter=Dt,Object.defineProperty(r,"__esModule",{value:!0})})});var Fi=A(()=>{if(!globalThis.ReadableStream)try{let r=require("node:process"),{emitWarning:t}=r;try{r.emitWarning=()=>{},Object.assign(globalThis,require("node:stream/web")),r.emitWarning=t}catch(o){throw r.emitWarning=t,o}}catch{Object.assign(globalThis,Wi())}try{let{Blob:r}=require("buffer");r&&!r.prototype.stream&&(r.prototype.stream=function(o){let i=0,s=this;return new ReadableStream({type:"bytes",async pull(u){let h=await s.slice(i,Math.min(s.size,i+65536)).arrayBuffer();i+=h.byteLength,u.enqueue(new Uint8Array(h)),i===s.size&&u.close()}})})}catch{}});async function*Mn(r,t=!0){for(let o of r)if("stream"in o)yield*o.stream();else if(ArrayBuffer.isView(o))if(t){let i=o.byteOffset,s=o.byteOffset+o.byteLength;for(;i!==s;){let u=Math.min(s-i,$i),c=o.buffer.slice(i,i+u);i+=c.byteLength,yield new Uint8Array(c)}}else yield o;else{let i=0,s=o;for(;i!==s.size;){let c=await s.slice(i,Math.min(s.size,i+$i)).arrayBuffer();i+=c.byteLength,yield new Uint8Array(c)}}}var Pd,$i,zi,Qu,Ce,Ut=Mt(()=>{Pd=pe(Fi(),1);$i=65536;zi=class Un{#e=[];#t="";#r=0;#n="transparent";constructor(t=[],o={}){if(typeof t!="object"||t===null)throw new TypeError("Failed to construct 'Blob': The provided value cannot be converted to a sequence.");if(typeof t[Symbol.iterator]!="function")throw new TypeError("Failed to construct 'Blob': The object must have a callable @@iterator property.");if(typeof o!="object"&&typeof o!="function")throw new TypeError("Failed to construct 'Blob': parameter 2 cannot convert to dictionary.");o===null&&(o={});let i=new TextEncoder;for(let u of t){let c;ArrayBuffer.isView(u)?c=new Uint8Array(u.buffer.slice(u.byteOffset,u.byteOffset+u.byteLength)):u instanceof ArrayBuffer?c=new Uint8Array(u.slice(0)):u instanceof Un?c=u:c=i.encode(`${u}`),this.#r+=ArrayBuffer.isView(c)?c.byteLength:c.size,this.#e.push(c)}this.#n=`${o.endings===void 0?"transparent":o.endings}`;let s=o.type===void 0?"":String(o.type);this.#t=/^[\x20-\x7E]*$/.test(s)?s:""}get size(){return this.#r}get type(){return this.#t}async text(){let t=new TextDecoder,o="";for await(let i of Mn(this.#e,!1))o+=t.decode(i,{stream:!0});return o+=t.decode(),o}async arrayBuffer(){let t=new Uint8Array(this.size),o=0;for await(let i of Mn(this.#e,!1))t.set(i,o),o+=i.length;return t.buffer}stream(){let t=Mn(this.#e,!0);return new globalThis.ReadableStream({type:"bytes",async pull(o){let i=await t.next();i.done?o.close():o.enqueue(i.value)},async cancel(){await t.return()}})}slice(t=0,o=this.size,i=""){let{size:s}=this,u=t<0?Math.max(s+t,0):Math.min(t,s),c=o<0?Math.max(s+o,0):Math.min(o,s),h=Math.max(c-u,0),m=this.#e,b=[],w=0;for(let S of m){if(w>=h)break;let g=ArrayBuffer.isView(S)?S.byteLength:S.size;if(u&&g<=u)u-=g,c-=g;else{let y;ArrayBuffer.isView(S)?(y=S.subarray(u,Math.min(g,c)),w+=y.byteLength):(y=S.slice(u,Math.min(g,c)),w+=y.size),c-=g,b.push(y),u=0}}let R=new Un([],{type:String(i).toLowerCase()});return R.#r=h,R.#e=b,R}get[Symbol.toStringTag](){return"Blob"}static[Symbol.hasInstance](t){return t&&typeof t=="object"&&typeof t.constructor=="function"&&(typeof t.stream=="function"||typeof t.arrayBuffer=="function")&&/^(Blob|File)$/.test(t[Symbol.toStringTag])}};Object.defineProperties(zi.prototype,{size:{enumerable:!0},type:{enumerable:!0},slice:{enumerable:!0}});Qu=zi,Ce=Qu});var Xu,Ku,dt,jn=Mt(()=>{Ut();Xu=class extends Ce{#e=0;#t="";constructor(t,o,i={}){if(arguments.length<2)throw new TypeError(`Failed to construct 'File': 2 arguments required, but only ${arguments.length} present.`);super(t,i),i===null&&(i={});let s=i.lastModified===void 0?Date.now():Number(i.lastModified);Number.isNaN(s)||(this.#e=s),this.#t=String(o)}get name(){return this.#t}get lastModified(){return this.#e}get[Symbol.toStringTag](){return"File"}static[Symbol.hasInstance](t){return!!t&&t instanceof Ce&&/^(File)$/.test(t[Symbol.toStringTag])}},Ku=Xu,dt=Ku});function ji(r,t=Ce){var o=`${Mi()}${Mi()}`.replace(/\./g,"").slice(-28).padStart(32,"-"),i=[],s=`--${o}\r
Content-Disposition: form-data; name="`;return r.forEach((u,c)=>typeof u=="string"?i.push(s+Nn(c)+`"\r
\r
${u.replace(/\r(?!\n)|(?<!\r)\n/g,`\r
`)}\r
`):i.push(s+Nn(c)+`"; filename="${Nn(u.name,1)}"\r
Content-Type: ${u.type||"application/octet-stream"}\r
\r
`,u,`\r
`)),i.push(`--${o}--`),new t(i,{type:"multipart/form-data; boundary="+o})}var jt,Zu,Ju,Mi,ec,Ui,Nn,Ve,Ye,Lr=Mt(()=>{Ut();jn();({toStringTag:jt,iterator:Zu,hasInstance:Ju}=Symbol),Mi=Math.random,ec="append,set,get,getAll,delete,keys,values,entries,forEach,constructor".split(","),Ui=(r,t,o)=>(r+="",/^(Blob|File)$/.test(t&&t[jt])?[(o=o!==void 0?o+"":t[jt]=="File"?t.name:"blob",r),t.name!==o||t[jt]=="blob"?new dt([t],o,t):t]:[r,t+""]),Nn=(r,t)=>(t?r:r.replace(/\r?\n|\r/g,`\r
`)).replace(/\n/g,"%0A").replace(/\r/g,"%0D").replace(/"/g,"%22"),Ve=(r,t,o)=>{if(t.length<o)throw new TypeError(`Failed to execute '${r}' on 'FormData': ${o} arguments required, but only ${t.length} present.`)},Ye=class{#e=[];constructor(...t){if(t.length)throw new TypeError("Failed to construct 'FormData': parameter 1 is not of type 'HTMLFormElement'.")}get[jt](){return"FormData"}[Zu](){return this.entries()}static[Ju](t){return t&&typeof t=="object"&&t[jt]==="FormData"&&!ec.some(o=>typeof t[o]!="function")}append(...t){Ve("append",arguments,2),this.#e.push(Ui(...t))}delete(t){Ve("delete",arguments,1),t+="",this.#e=this.#e.filter(([o])=>o!==t)}get(t){Ve("get",arguments,1),t+="";for(var o=this.#e,i=o.length,s=0;s<i;s++)if(o[s][0]===t)return o[s][1];return null}getAll(t,o){return Ve("getAll",arguments,1),o=[],t+="",this.#e.forEach(i=>i[0]===t&&o.push(i[1])),o}has(t){return Ve("has",arguments,1),t+="",this.#e.some(o=>o[0]===t)}forEach(t,o){Ve("forEach",arguments,1);for(var[i,s]of this)t.call(o,s,i,this)}set(...t){Ve("set",arguments,2);var o=[],i=!0;t=Ui(...t),this.#e.forEach(s=>{s[0]===t[0]?i&&(i=!o.push(t)):o.push(s)}),i&&o.push(t),this.#e=o}*entries(){yield*this.#e}*keys(){for(var[t]of this)yield t}*values(){for(var[,t]of this)yield t}}});var Vi=A(($d,Gi)=>{if(!globalThis.DOMException)try{let{MessageChannel:r}=require("worker_threads"),t=new r().port1,o=new ArrayBuffer;t.postMessage(o,[o,o])}catch(r){r.constructor.name==="DOMException"&&(globalThis.DOMException=r.constructor)}Gi.exports=globalThis.DOMException});var Ht,Yi,tc,Fr,Gn=Mt(()=>{Ht=require("node:fs"),Yi=pe(Vi(),1);jn();Ut();({stat:tc}=Ht.promises),Fr=class{#e;#t;constructor(t){this.#e=t.path,this.#t=t.start,this.size=t.size,this.lastModified=t.lastModified}slice(t,o){return new Fr({path:this.#e,lastModified:this.lastModified,size:o-t,start:this.#t+t})}async*stream(){let{mtimeMs:t}=await tc(this.#e);if(t>this.lastModified)throw new Yi.default("The requested file could not be read, typically due to permission problems that have occurred after a reference to a file was acquired.","NotReadableError");yield*(0,Ht.createReadStream)(this.#e,{start:this.#t,end:this.#t+this.size-1})}get[Symbol.toStringTag](){return"Blob"}}});var Xi={};Bi(Xi,{toFormData:()=>lc});function sc(r){let t=r.match(/\bfilename=("(.*?)"|([^()<>@,;:\\"/[\]?={}\s\t]+))($|;\s)/i);if(!t)return;let o=t[2]||t[3]||"",i=o.slice(o.lastIndexOf("\\")+1);return i=i.replace(/%22/g,'"'),i=i.replace(/&#(\d{4});/g,(s,u)=>String.fromCharCode(u)),i}async function lc(r,t){if(!/multipart/i.test(t))throw new TypeError("Failed to fetch");let o=t.match(/boundary=(?:"([^"]+)"|([^;]+))/i);if(!o)throw new TypeError("no or bad content-type header, no multipart boundary");let i=new Vn(o[1]||o[2]),s,u,c,h,m,b,w=[],R=new Ye,S=v=>{c+=P.decode(v,{stream:!0})},g=v=>{w.push(v)},y=()=>{let v=new dt(w,b,{type:m});R.append(h,v)},C=()=>{R.append(h,c)},P=new TextDecoder("utf-8");P.decode(),i.onPartBegin=function(){i.onPartData=S,i.onPartEnd=C,s="",u="",c="",h="",m="",b=null,w.length=0},i.onHeaderField=function(v){s+=P.decode(v,{stream:!0})},i.onHeaderValue=function(v){u+=P.decode(v,{stream:!0})},i.onHeaderEnd=function(){if(u+=P.decode(),s=s.toLowerCase(),s==="content-disposition"){let v=u.match(/\bname=("([^"]*)"|([^()<>@,;:\\"/[\]?={}\s\t]+))/i);v&&(h=v[2]||v[3]||""),b=sc(u),b&&(i.onPartData=g,i.onPartEnd=y)}else s==="content-type"&&(m=u);u="",s=""};for await(let v of r)i.write(v);return i.end(),R}var be,F,Qi,We,$r,zr,rc,Gt,nc,oc,ic,ac,Qe,Vn,Ki=Mt(()=>{Gn();Lr();be=0,F={START_BOUNDARY:be++,HEADER_FIELD_START:be++,HEADER_FIELD:be++,HEADER_VALUE_START:be++,HEADER_VALUE:be++,HEADER_VALUE_ALMOST_DONE:be++,HEADERS_ALMOST_DONE:be++,PART_DATA_START:be++,PART_DATA:be++,END:be++},Qi=1,We={PART_BOUNDARY:Qi,LAST_BOUNDARY:Qi*=2},$r=10,zr=13,rc=32,Gt=45,nc=58,oc=97,ic=122,ac=r=>r|32,Qe=()=>{},Vn=class{constructor(t){this.index=0,this.flags=0,this.onHeaderEnd=Qe,this.onHeaderField=Qe,this.onHeadersEnd=Qe,this.onHeaderValue=Qe,this.onPartBegin=Qe,this.onPartData=Qe,this.onPartEnd=Qe,this.boundaryChars={},t=`\r
--`+t;let o=new Uint8Array(t.length);for(let i=0;i<t.length;i++)o[i]=t.charCodeAt(i),this.boundaryChars[o[i]]=!0;this.boundary=o,this.lookbehind=new Uint8Array(this.boundary.length+8),this.state=F.START_BOUNDARY}write(t){let o=0,i=t.length,s=this.index,{lookbehind:u,boundary:c,boundaryChars:h,index:m,state:b,flags:w}=this,R=this.boundary.length,S=R-1,g=t.length,y,C,P=I=>{this[I+"Mark"]=o},v=I=>{delete this[I+"Mark"]},L=(I,M,B,le)=>{(M===void 0||M!==B)&&this[I](le&&le.subarray(M,B))},H=(I,M)=>{let B=I+"Mark";B in this&&(M?(L(I,this[B],o,t),delete this[B]):(L(I,this[B],t.length,t),this[B]=0))};for(o=0;o<i;o++)switch(y=t[o],b){case F.START_BOUNDARY:if(m===c.length-2){if(y===Gt)w|=We.LAST_BOUNDARY;else if(y!==zr)return;m++;break}else if(m-1===c.length-2){if(w&We.LAST_BOUNDARY&&y===Gt)b=F.END,w=0;else if(!(w&We.LAST_BOUNDARY)&&y===$r)m=0,L("onPartBegin"),b=F.HEADER_FIELD_START;else return;break}y!==c[m+2]&&(m=-2),y===c[m+2]&&m++;break;case F.HEADER_FIELD_START:b=F.HEADER_FIELD,P("onHeaderField"),m=0;case F.HEADER_FIELD:if(y===zr){v("onHeaderField"),b=F.HEADERS_ALMOST_DONE;break}if(m++,y===Gt)break;if(y===nc){if(m===1)return;H("onHeaderField",!0),b=F.HEADER_VALUE_START;break}if(C=ac(y),C<oc||C>ic)return;break;case F.HEADER_VALUE_START:if(y===rc)break;P("onHeaderValue"),b=F.HEADER_VALUE;case F.HEADER_VALUE:y===zr&&(H("onHeaderValue",!0),L("onHeaderEnd"),b=F.HEADER_VALUE_ALMOST_DONE);break;case F.HEADER_VALUE_ALMOST_DONE:if(y!==$r)return;b=F.HEADER_FIELD_START;break;case F.HEADERS_ALMOST_DONE:if(y!==$r)return;L("onHeadersEnd"),b=F.PART_DATA_START;break;case F.PART_DATA_START:b=F.PART_DATA,P("onPartData");case F.PART_DATA:if(s=m,m===0){for(o+=S;o<g&&!(t[o]in h);)o+=R;o-=S,y=t[o]}if(m<c.length)c[m]===y?(m===0&&H("onPartData",!0),m++):m=0;else if(m===c.length)m++,y===zr?w|=We.PART_BOUNDARY:y===Gt?w|=We.LAST_BOUNDARY:m=0;else if(m-1===c.length)if(w&We.PART_BOUNDARY){if(m=0,y===$r){w&=~We.PART_BOUNDARY,L("onPartEnd"),L("onPartBegin"),b=F.HEADER_FIELD_START;break}}else w&We.LAST_BOUNDARY&&y===Gt?(L("onPartEnd"),b=F.END,w=0):m=0;if(m>0)u[m-1]=y;else if(s>0){let I=new Uint8Array(u.buffer,u.byteOffset,u.byteLength);L("onPartData",0,s,I),s=0,P("onPartData"),o--}break;case F.END:break;default:throw new Error(`Unexpected state entered: ${b}`)}H("onHeaderField"),H("onHeaderValue"),H("onPartData"),this.index=m,this.state=b,this.flags=w}end(){if(this.state===F.HEADER_FIELD_START&&this.index===0||this.state===F.PART_DATA&&this.index===this.boundary.length)this.onPartEnd();else if(this.state!==F.END)throw new Error("MultipartParser.end(): stream ended unexpectedly")}}});var ka=A((Mh,va)=>{va.exports=Aa;Aa.sync=wc;var Ca=require("fs");function _c(r,t){var o=t.pathExt!==void 0?t.pathExt:process.env.PATHEXT;if(!o||(o=o.split(";"),o.indexOf("")!==-1))return!0;for(var i=0;i<o.length;i++){var s=o[i].toLowerCase();if(s&&r.substr(-s.length).toLowerCase()===s)return!0}return!1}function Pa(r,t,o){return!r.isSymbolicLink()&&!r.isFile()?!1:_c(t,o)}function Aa(r,t,o){Ca.stat(r,function(i,s){o(i,i?!1:Pa(s,r,t))})}function wc(r,t){return Pa(Ca.statSync(r),r,t)}});var qa=A((Uh,Ba)=>{Ba.exports=xa;xa.sync=Rc;var Ia=require("fs");function xa(r,t,o){Ia.stat(r,function(i,s){o(i,i?!1:Oa(s,t))})}function Rc(r,t){return Oa(Ia.statSync(r),t)}function Oa(r,t){return r.isFile()&&Tc(r,t)}function Tc(r,t){var o=r.mode,i=r.uid,s=r.gid,u=t.uid!==void 0?t.uid:process.getuid&&process.getuid(),c=t.gid!==void 0?t.gid:process.getgid&&process.getgid(),h=parseInt("100",8),m=parseInt("010",8),b=parseInt("001",8),w=h|m,R=o&b||o&m&&s===c||o&h&&i===u||o&w&&u===0;return R}});var La=A((Nh,Da)=>{var jh=require("fs"),Yr;process.platform==="win32"||global.TESTING_WINDOWS?Yr=ka():Yr=qa();Da.exports=Xn;Xn.sync=Ec;function Xn(r,t,o){if(typeof t=="function"&&(o=t,t={}),!o){if(typeof Promise!="function")throw new TypeError("callback not provided");return new Promise(function(i,s){Xn(r,t||{},function(u,c){u?s(u):i(c)})})}Yr(r,t||{},function(i,s){i&&(i.code==="EACCES"||t&&t.ignoreErrors)&&(i=null,s=!1),o(i,s)})}function Ec(r,t){try{return Yr.sync(r,t||{})}catch(o){if(t&&t.ignoreErrors||o.code==="EACCES")return!1;throw o}}});var ja=A((Hh,Ua)=>{var yt=process.platform==="win32"||process.env.OSTYPE==="cygwin"||process.env.OSTYPE==="msys",Wa=require("path"),Cc=yt?";":":",Fa=La(),$a=r=>Object.assign(new Error(`not found: ${r}`),{code:"ENOENT"}),za=(r,t)=>{let o=t.colon||Cc,i=r.match(/\//)||yt&&r.match(/\\/)?[""]:[...yt?[process.cwd()]:[],...(t.path||process.env.PATH||"").split(o)],s=yt?t.pathExt||process.env.PATHEXT||".EXE;.CMD;.BAT;.COM":"",u=yt?s.split(o):[""];return yt&&r.indexOf(".")!==-1&&u[0]!==""&&u.unshift(""),{pathEnv:i,pathExt:u,pathExtExe:s}},Ma=(r,t,o)=>{typeof t=="function"&&(o=t,t={}),t||(t={});let{pathEnv:i,pathExt:s,pathExtExe:u}=za(r,t),c=[],h=b=>new Promise((w,R)=>{if(b===i.length)return t.all&&c.length?w(c):R($a(r));let S=i[b],g=/^".*"$/.test(S)?S.slice(1,-1):S,y=Wa.join(g,r),C=!g&&/^\.[\\\/]/.test(r)?r.slice(0,2)+y:y;w(m(C,b,0))}),m=(b,w,R)=>new Promise((S,g)=>{if(R===s.length)return S(h(w+1));let y=s[R];Fa(b+y,{pathExt:u},(C,P)=>{if(!C&&P)if(t.all)c.push(b+y);else return S(b+y);return S(m(b,w,R+1))})});return o?h(0).then(b=>o(null,b),o):h(0)},Pc=(r,t)=>{t=t||{};let{pathEnv:o,pathExt:i,pathExtExe:s}=za(r,t),u=[];for(let c=0;c<o.length;c++){let h=o[c],m=/^".*"$/.test(h)?h.slice(1,-1):h,b=Wa.join(m,r),w=!m&&/^\.[\\\/]/.test(r)?r.slice(0,2)+b:b;for(let R=0;R<i.length;R++){let S=w+i[R];try{if(Fa.sync(S,{pathExt:s}))if(t.all)u.push(S);else return S}catch{}}}if(t.all&&u.length)return u;if(t.nothrow)return null;throw $a(r)};Ua.exports=Ma;Ma.sync=Pc});var Zn=A((Gh,Kn)=>{"use strict";var Na=(r={})=>{let t=r.env||process.env;return(r.platform||process.platform)!=="win32"?"PATH":Object.keys(t).reverse().find(i=>i.toUpperCase()==="PATH")||"Path"};Kn.exports=Na;Kn.exports.default=Na});var Ya=A((Vh,Va)=>{"use strict";var Ha=require("path"),Ac=ja(),vc=Zn();function Ga(r,t){let o=r.options.env||process.env,i=process.cwd(),s=r.options.cwd!=null,u=s&&process.chdir!==void 0&&!process.chdir.disabled;if(u)try{process.chdir(r.options.cwd)}catch{}let c;try{c=Ac.sync(r.command,{path:o[vc({env:o})],pathExt:t?Ha.delimiter:void 0})}catch{}finally{u&&process.chdir(i)}return c&&(c=Ha.resolve(s?r.options.cwd:"",c)),c}function kc(r){return Ga(r)||Ga(r,!0)}Va.exports=kc});var Qa=A((Yh,eo)=>{"use strict";var Jn=/([()\][%!^"`<>&|;, *?])/g;function Ic(r){return r=r.replace(Jn,"^$1"),r}function xc(r,t){return r=`${r}`,r=r.replace(/(\\*)"/g,'$1$1\\"'),r=r.replace(/(\\*)$/,"$1$1"),r=`"${r}"`,r=r.replace(Jn,"^$1"),t&&(r=r.replace(Jn,"^$1")),r}eo.exports.command=Ic;eo.exports.argument=xc});var Ka=A((Qh,Xa)=>{"use strict";Xa.exports=/^#!(.*)/});var Ja=A((Xh,Za)=>{"use strict";var Oc=Ka();Za.exports=(r="")=>{let t=r.match(Oc);if(!t)return null;let[o,i]=t[0].replace(/#! ?/,"").split(" "),s=o.split("/").pop();return s==="env"?i:i?`${s} ${i}`:s}});var ts=A((Kh,es)=>{"use strict";var to=require("fs"),Bc=Ja();function qc(r){let o=Buffer.alloc(150),i;try{i=to.openSync(r,"r"),to.readSync(i,o,0,150,0),to.closeSync(i)}catch{}return Bc(o.toString())}es.exports=qc});var is=A((Zh,os)=>{"use strict";var Dc=require("path"),rs=Ya(),ns=Qa(),Lc=ts(),Wc=process.platform==="win32",Fc=/\.(?:com|exe)$/i,$c=/node_modules[\\/].bin[\\/][^\\/]+\.cmd$/i;function zc(r){r.file=rs(r);let t=r.file&&Lc(r.file);return t?(r.args.unshift(r.file),r.command=t,rs(r)):r.file}function Mc(r){if(!Wc)return r;let t=zc(r),o=!Fc.test(t);if(r.options.forceShell||o){let i=$c.test(t);r.command=Dc.normalize(r.command),r.command=ns.command(r.command),r.args=r.args.map(u=>ns.argument(u,i));let s=[r.command].concat(r.args).join(" ");r.args=["/d","/s","/c",`"${s}"`],r.command=process.env.comspec||"cmd.exe",r.options.windowsVerbatimArguments=!0}return r}function Uc(r,t,o){t&&!Array.isArray(t)&&(o=t,t=null),t=t?t.slice(0):[],o=Object.assign({},o);let i={command:r,args:t,options:o,file:void 0,original:{command:r,args:t}};return o.shell?i:Mc(i)}os.exports=Uc});var ls=A((Jh,ss)=>{"use strict";var ro=process.platform==="win32";function no(r,t){return Object.assign(new Error(`${t} ${r.command} ENOENT`),{code:"ENOENT",errno:"ENOENT",syscall:`${t} ${r.command}`,path:r.command,spawnargs:r.args})}function jc(r,t){if(!ro)return;let o=r.emit;r.emit=function(i,s){if(i==="exit"){let u=as(s,t,"spawn");if(u)return o.call(r,"error",u)}return o.apply(r,arguments)}}function as(r,t){return ro&&r===1&&!t.file?no(t.original,"spawn"):null}function Nc(r,t){return ro&&r===1&&!t.file?no(t.original,"spawnSync"):null}ss.exports={hookChildProcess:jc,verifyENOENT:as,verifyENOENTSync:Nc,notFoundError:no}});var fs=A((em,gt)=>{"use strict";var us=require("child_process"),oo=is(),io=ls();function cs(r,t,o){let i=oo(r,t,o),s=us.spawn(i.command,i.args,i.options);return io.hookChildProcess(s,i),s}function Hc(r,t,o){let i=oo(r,t,o),s=us.spawnSync(i.command,i.args,i.options);return s.error=s.error||io.verifyENOENTSync(s.status,i),s}gt.exports=cs;gt.exports.spawn=cs;gt.exports.sync=Hc;gt.exports._parse=oo;gt.exports._enoent=io});var hs=A((tm,ds)=>{"use strict";ds.exports=r=>{let t=typeof r=="string"?`
`:`
`.charCodeAt(),o=typeof r=="string"?"\r":"\r".charCodeAt();return r[r.length-1]===t&&(r=r.slice(0,r.length-1)),r[r.length-1]===o&&(r=r.slice(0,r.length-1)),r}});var bs=A((rm,Kt)=>{"use strict";var Xt=require("path"),ms=Zn(),ps=r=>{r={cwd:process.cwd(),path:process.env[ms()],execPath:process.execPath,...r};let t,o=Xt.resolve(r.cwd),i=[];for(;t!==o;)i.push(Xt.join(o,"node_modules/.bin")),t=o,o=Xt.resolve(o,"..");let s=Xt.resolve(r.cwd,r.execPath,"..");return i.push(s),i.concat(r.path).join(Xt.delimiter)};Kt.exports=ps;Kt.exports.default=ps;Kt.exports.env=r=>{r={env:process.env,...r};let t={...r.env},o=ms({env:t});return r.path=t[o],t[o]=Kt.exports(r),t}});var gs=A((nm,ao)=>{"use strict";var ys=(r,t)=>{for(let o of Reflect.ownKeys(t))Object.defineProperty(r,o,Object.getOwnPropertyDescriptor(t,o));return r};ao.exports=ys;ao.exports.default=ys});var _s=A((om,Xr)=>{"use strict";var Gc=gs(),Qr=new WeakMap,Ss=(r,t={})=>{if(typeof r!="function")throw new TypeError("Expected a function");let o,i=0,s=r.displayName||r.name||"<anonymous>",u=function(...c){if(Qr.set(u,++i),i===1)o=r.apply(this,c),r=null;else if(t.throw===!0)throw new Error(`Function \`${s}\` can only be called once`);return o};return Gc(u,r),Qr.set(u,i),u};Xr.exports=Ss;Xr.exports.default=Ss;Xr.exports.callCount=r=>{if(!Qr.has(r))throw new Error(`The given function \`${r.name}\` is not wrapped by the \`onetime\` package`);return Qr.get(r)}});var ws=A(Kr=>{"use strict";Object.defineProperty(Kr,"__esModule",{value:!0});Kr.SIGNALS=void 0;var Vc=[{name:"SIGHUP",number:1,action:"terminate",description:"Terminal closed",standard:"posix"},{name:"SIGINT",number:2,action:"terminate",description:"User interruption with CTRL-C",standard:"ansi"},{name:"SIGQUIT",number:3,action:"core",description:"User interruption with CTRL-\\",standard:"posix"},{name:"SIGILL",number:4,action:"core",description:"Invalid machine instruction",standard:"ansi"},{name:"SIGTRAP",number:5,action:"core",description:"Debugger breakpoint",standard:"posix"},{name:"SIGABRT",number:6,action:"core",description:"Aborted",standard:"ansi"},{name:"SIGIOT",number:6,action:"core",description:"Aborted",standard:"bsd"},{name:"SIGBUS",number:7,action:"core",description:"Bus error due to misaligned, non-existing address or paging error",standard:"bsd"},{name:"SIGEMT",number:7,action:"terminate",description:"Command should be emulated but is not implemented",standard:"other"},{name:"SIGFPE",number:8,action:"core",description:"Floating point arithmetic error",standard:"ansi"},{name:"SIGKILL",number:9,action:"terminate",description:"Forced termination",standard:"posix",forced:!0},{name:"SIGUSR1",number:10,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGSEGV",number:11,action:"core",description:"Segmentation fault",standard:"ansi"},{name:"SIGUSR2",number:12,action:"terminate",description:"Application-specific signal",standard:"posix"},{name:"SIGPIPE",number:13,action:"terminate",description:"Broken pipe or socket",standard:"posix"},{name:"SIGALRM",number:14,action:"terminate",description:"Timeout or timer",standard:"posix"},{name:"SIGTERM",number:15,action:"terminate",description:"Termination",standard:"ansi"},{name:"SIGSTKFLT",number:16,action:"terminate",description:"Stack is empty or overflowed",standard:"other"},{name:"SIGCHLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"posix"},{name:"SIGCLD",number:17,action:"ignore",description:"Child process terminated, paused or unpaused",standard:"other"},{name:"SIGCONT",number:18,action:"unpause",description:"Unpaused",standard:"posix",forced:!0},{name:"SIGSTOP",number:19,action:"pause",description:"Paused",standard:"posix",forced:!0},{name:"SIGTSTP",number:20,action:"pause",description:'Paused using CTRL-Z or "suspend"',standard:"posix"},{name:"SIGTTIN",number:21,action:"pause",description:"Background process cannot read terminal input",standard:"posix"},{name:"SIGBREAK",number:21,action:"terminate",description:"User interruption with CTRL-BREAK",standard:"other"},{name:"SIGTTOU",number:22,action:"pause",description:"Background process cannot write to terminal output",standard:"posix"},{name:"SIGURG",number:23,action:"ignore",description:"Socket received out-of-band data",standard:"bsd"},{name:"SIGXCPU",number:24,action:"core",description:"Process timed out",standard:"bsd"},{name:"SIGXFSZ",number:25,action:"core",description:"File too big",standard:"bsd"},{name:"SIGVTALRM",number:26,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGPROF",number:27,action:"terminate",description:"Timeout or timer",standard:"bsd"},{name:"SIGWINCH",number:28,action:"ignore",description:"Terminal window size changed",standard:"bsd"},{name:"SIGIO",number:29,action:"terminate",description:"I/O is available",standard:"other"},{name:"SIGPOLL",number:29,action:"terminate",description:"Watched event",standard:"other"},{name:"SIGINFO",number:29,action:"ignore",description:"Request for process information",standard:"other"},{name:"SIGPWR",number:30,action:"terminate",description:"Device running out of power",standard:"systemv"},{name:"SIGSYS",number:31,action:"core",description:"Invalid system call",standard:"other"},{name:"SIGUNUSED",number:31,action:"terminate",description:"Invalid system call",standard:"other"}];Kr.SIGNALS=Vc});var so=A(St=>{"use strict";Object.defineProperty(St,"__esModule",{value:!0});St.SIGRTMAX=St.getRealtimeSignals=void 0;var Yc=function(){let r=Ts-Rs+1;return Array.from({length:r},Qc)};St.getRealtimeSignals=Yc;var Qc=function(r,t){return{name:`SIGRT${t+1}`,number:Rs+t,action:"terminate",description:"Application-specific signal (realtime)",standard:"posix"}},Rs=34,Ts=64;St.SIGRTMAX=Ts});var Es=A(Zr=>{"use strict";Object.defineProperty(Zr,"__esModule",{value:!0});Zr.getSignals=void 0;var Xc=require("os"),Kc=ws(),Zc=so(),Jc=function(){let r=(0,Zc.getRealtimeSignals)();return[...Kc.SIGNALS,...r].map(ef)};Zr.getSignals=Jc;var ef=function({name:r,number:t,description:o,action:i,forced:s=!1,standard:u}){let{signals:{[r]:c}}=Xc.constants,h=c!==void 0;return{name:r,number:h?c:t,description:o,supported:h,action:i,forced:s,standard:u}}});var Ps=A(_t=>{"use strict";Object.defineProperty(_t,"__esModule",{value:!0});_t.signalsByNumber=_t.signalsByName=void 0;var tf=require("os"),Cs=Es(),rf=so(),nf=function(){return(0,Cs.getSignals)().reduce(of,{})},of=function(r,{name:t,number:o,description:i,supported:s,action:u,forced:c,standard:h}){return{...r,[t]:{name:t,number:o,description:i,supported:s,action:u,forced:c,standard:h}}},af=nf();_t.signalsByName=af;var sf=function(){let r=(0,Cs.getSignals)(),t=rf.SIGRTMAX+1,o=Array.from({length:t},(i,s)=>lf(s,r));return Object.assign({},...o)},lf=function(r,t){let o=uf(r,t);if(o===void 0)return{};let{name:i,description:s,supported:u,action:c,forced:h,standard:m}=o;return{[r]:{name:i,number:r,description:s,supported:u,action:c,forced:h,standard:m}}},uf=function(r,t){let o=t.find(({name:i})=>tf.constants.signals[i]===r);return o!==void 0?o:t.find(i=>i.number===r)},cf=sf();_t.signalsByNumber=cf});var vs=A((um,As)=>{"use strict";var{signalsByName:ff}=Ps(),df=({timedOut:r,timeout:t,errorCode:o,signal:i,signalDescription:s,exitCode:u,isCanceled:c})=>r?`timed out after ${t} milliseconds`:c?"was canceled":o!==void 0?`failed with ${o}`:i!==void 0?`was killed with ${i} (${s})`:u!==void 0?`failed with exit code ${u}`:"failed",hf=({stdout:r,stderr:t,all:o,error:i,signal:s,exitCode:u,command:c,escapedCommand:h,timedOut:m,isCanceled:b,killed:w,parsed:{options:{timeout:R}}})=>{u=u===null?void 0:u,s=s===null?void 0:s;let S=s===void 0?void 0:ff[s].description,g=i&&i.code,C=`Command ${df({timedOut:m,timeout:R,errorCode:g,signal:s,signalDescription:S,exitCode:u,isCanceled:b})}: ${c}`,P=Object.prototype.toString.call(i)==="[object Error]",v=P?`${C}
${i.message}`:C,L=[v,t,r].filter(Boolean).join(`
`);return P?(i.originalMessage=i.message,i.message=L):i=new Error(L),i.shortMessage=v,i.command=c,i.escapedCommand=h,i.exitCode=u,i.signal=s,i.signalDescription=S,i.stdout=r,i.stderr=t,o!==void 0&&(i.all=o),"bufferedData"in i&&delete i.bufferedData,i.failed=!0,i.timedOut=Boolean(m),i.isCanceled=b,i.killed=w&&!m,i};As.exports=hf});var Is=A((cm,lo)=>{"use strict";var Jr=["stdin","stdout","stderr"],mf=r=>Jr.some(t=>r[t]!==void 0),ks=r=>{if(!r)return;let{stdio:t}=r;if(t===void 0)return Jr.map(i=>r[i]);if(mf(r))throw new Error(`It's not possible to provide \`stdio\` in combination with one of ${Jr.map(i=>`\`${i}\``).join(", ")}`);if(typeof t=="string")return t;if(!Array.isArray(t))throw new TypeError(`Expected \`stdio\` to be of type \`string\` or \`Array\`, got \`${typeof t}\``);let o=Math.max(t.length,Jr.length);return Array.from({length:o},(i,s)=>t[s])};lo.exports=ks;lo.exports.node=r=>{let t=ks(r);return t==="ipc"?"ipc":t===void 0||typeof t=="string"?[t,t,t,"ipc"]:t.includes("ipc")?t:[...t,"ipc"]}});var xs=A((fm,en)=>{en.exports=["SIGABRT","SIGALRM","SIGHUP","SIGINT","SIGTERM"];process.platform!=="win32"&&en.exports.push("SIGVTALRM","SIGXCPU","SIGXFSZ","SIGUSR2","SIGTRAP","SIGSYS","SIGQUIT","SIGIOT");process.platform==="linux"&&en.exports.push("SIGIO","SIGPOLL","SIGPWR","SIGSTKFLT","SIGUNUSED")});var Ls=A((dm,Tt)=>{var $=global.process,Ze=function(r){return r&&typeof r=="object"&&typeof r.removeListener=="function"&&typeof r.emit=="function"&&typeof r.reallyExit=="function"&&typeof r.listeners=="function"&&typeof r.kill=="function"&&typeof r.pid=="number"&&typeof r.on=="function"};Ze($)?(Os=require("assert"),wt=xs(),Bs=/^win/i.test($.platform),Zt=require("events"),typeof Zt!="function"&&(Zt=Zt.EventEmitter),$.__signal_exit_emitter__?N=$.__signal_exit_emitter__:(N=$.__signal_exit_emitter__=new Zt,N.count=0,N.emitted={}),N.infinite||(N.setMaxListeners(1/0),N.infinite=!0),Tt.exports=function(r,t){if(!!Ze(global.process)){Os.equal(typeof r,"function","a callback must be provided for exit handler"),Rt===!1&&uo();var o="exit";t&&t.alwaysLast&&(o="afterexit");var i=function(){N.removeListener(o,r),N.listeners("exit").length===0&&N.listeners("afterexit").length===0&&tn()};return N.on(o,r),i}},tn=function(){!Rt||!Ze(global.process)||(Rt=!1,wt.forEach(function(t){try{$.removeListener(t,rn[t])}catch{}}),$.emit=nn,$.reallyExit=co,N.count-=1)},Tt.exports.unload=tn,Je=function(t,o,i){N.emitted[t]||(N.emitted[t]=!0,N.emit(t,o,i))},rn={},wt.forEach(function(r){rn[r]=function(){if(!!Ze(global.process)){var o=$.listeners(r);o.length===N.count&&(tn(),Je("exit",null,r),Je("afterexit",null,r),Bs&&r==="SIGHUP"&&(r="SIGINT"),$.kill($.pid,r))}}}),Tt.exports.signals=function(){return wt},Rt=!1,uo=function(){Rt||!Ze(global.process)||(Rt=!0,N.count+=1,wt=wt.filter(function(t){try{return $.on(t,rn[t]),!0}catch{return!1}}),$.emit=Ds,$.reallyExit=qs)},Tt.exports.load=uo,co=$.reallyExit,qs=function(t){!Ze(global.process)||($.exitCode=t||0,Je("exit",$.exitCode,null),Je("afterexit",$.exitCode,null),co.call($,$.exitCode))},nn=$.emit,Ds=function(t,o){if(t==="exit"&&Ze(global.process)){o!==void 0&&($.exitCode=o);var i=nn.apply(this,arguments);return Je("exit",$.exitCode,null),Je("afterexit",$.exitCode,null),i}else return nn.apply(this,arguments)}):Tt.exports=function(){};var Os,wt,Bs,Zt,N,tn,Je,rn,Rt,uo,co,qs,nn,Ds});var Fs=A((hm,Ws)=>{"use strict";var pf=require("os"),bf=Ls(),yf=1e3*5,gf=(r,t="SIGTERM",o={})=>{let i=r(t);return Sf(r,t,o,i),i},Sf=(r,t,o,i)=>{if(!_f(t,o,i))return;let s=Rf(o),u=setTimeout(()=>{r("SIGKILL")},s);u.unref&&u.unref()},_f=(r,{forceKillAfterTimeout:t},o)=>wf(r)&&t!==!1&&o,wf=r=>r===pf.constants.signals.SIGTERM||typeof r=="string"&&r.toUpperCase()==="SIGTERM",Rf=({forceKillAfterTimeout:r=!0})=>{if(r===!0)return yf;if(!Number.isFinite(r)||r<0)throw new TypeError(`Expected the \`forceKillAfterTimeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`);return r},Tf=(r,t)=>{r.kill()&&(t.isCanceled=!0)},Ef=(r,t,o)=>{r.kill(t),o(Object.assign(new Error("Timed out"),{timedOut:!0,signal:t}))},Cf=(r,{timeout:t,killSignal:o="SIGTERM"},i)=>{if(t===0||t===void 0)return i;let s,u=new Promise((h,m)=>{s=setTimeout(()=>{Ef(r,o,m)},t)}),c=i.finally(()=>{clearTimeout(s)});return Promise.race([u,c])},Pf=({timeout:r})=>{if(r!==void 0&&(!Number.isFinite(r)||r<0))throw new TypeError(`Expected the \`timeout\` option to be a non-negative integer, got \`${r}\` (${typeof r})`)},Af=async(r,{cleanup:t,detached:o},i)=>{if(!t||o)return i;let s=bf(()=>{r.kill()});return i.finally(()=>{s()})};Ws.exports={spawnedKill:gf,spawnedCancel:Tf,setupTimeout:Cf,validateTimeout:Pf,setExitHandler:Af}});var zs=A((mm,$s)=>{"use strict";var ge=r=>r!==null&&typeof r=="object"&&typeof r.pipe=="function";ge.writable=r=>ge(r)&&r.writable!==!1&&typeof r._write=="function"&&typeof r._writableState=="object";ge.readable=r=>ge(r)&&r.readable!==!1&&typeof r._read=="function"&&typeof r._readableState=="object";ge.duplex=r=>ge.writable(r)&&ge.readable(r);ge.transform=r=>ge.duplex(r)&&typeof r._transform=="function";$s.exports=ge});var Us=A((pm,Ms)=>{"use strict";var{PassThrough:vf}=require("stream");Ms.exports=r=>{r={...r};let{array:t}=r,{encoding:o}=r,i=o==="buffer",s=!1;t?s=!(o||i):o=o||"utf8",i&&(o=null);let u=new vf({objectMode:s});o&&u.setEncoding(o);let c=0,h=[];return u.on("data",m=>{h.push(m),s?c=h.length:c+=m.length}),u.getBufferedValue=()=>t?h:i?Buffer.concat(h,c):h.join(""),u.getBufferedLength=()=>c,u}});var js=A((bm,Jt)=>{"use strict";var{constants:kf}=require("buffer"),If=require("stream"),{promisify:xf}=require("util"),Of=Us(),Bf=xf(If.pipeline),on=class extends Error{constructor(){super("maxBuffer exceeded"),this.name="MaxBufferError"}};async function fo(r,t){if(!r)throw new Error("Expected a stream");t={maxBuffer:1/0,...t};let{maxBuffer:o}=t,i=Of(t);return await new Promise((s,u)=>{let c=h=>{h&&i.getBufferedLength()<=kf.MAX_LENGTH&&(h.bufferedData=i.getBufferedValue()),u(h)};(async()=>{try{await Bf(r,i),s()}catch(h){c(h)}})(),i.on("data",()=>{i.getBufferedLength()>o&&c(new on)})}),i.getBufferedValue()}Jt.exports=fo;Jt.exports.buffer=(r,t)=>fo(r,{...t,encoding:"buffer"});Jt.exports.array=(r,t)=>fo(r,{...t,array:!0});Jt.exports.MaxBufferError=on});var Hs=A((ym,Ns)=>{"use strict";var{PassThrough:qf}=require("stream");Ns.exports=function(){var r=[],t=new qf({objectMode:!0});return t.setMaxListeners(0),t.add=o,t.isEmpty=i,t.on("unpipe",s),Array.prototype.slice.call(arguments).forEach(o),t;function o(u){return Array.isArray(u)?(u.forEach(o),this):(r.push(u),u.once("end",s.bind(null,u)),u.once("error",t.emit.bind(t,"error")),u.pipe(t,{end:!1}),this)}function i(){return r.length==0}function s(u){r=r.filter(function(c){return c!==u}),!r.length&&t.readable&&t.end()}}});var Qs=A((gm,Ys)=>{"use strict";var Vs=zs(),Gs=js(),Df=Hs(),Lf=(r,t)=>{t===void 0||r.stdin===void 0||(Vs(t)?t.pipe(r.stdin):r.stdin.end(t))},Wf=(r,{all:t})=>{if(!t||!r.stdout&&!r.stderr)return;let o=Df();return r.stdout&&o.add(r.stdout),r.stderr&&o.add(r.stderr),o},ho=async(r,t)=>{if(!!r){r.destroy();try{return await t}catch(o){return o.bufferedData}}},mo=(r,{encoding:t,buffer:o,maxBuffer:i})=>{if(!(!r||!o))return t?Gs(r,{encoding:t,maxBuffer:i}):Gs.buffer(r,{maxBuffer:i})},Ff=async({stdout:r,stderr:t,all:o},{encoding:i,buffer:s,maxBuffer:u},c)=>{let h=mo(r,{encoding:i,buffer:s,maxBuffer:u}),m=mo(t,{encoding:i,buffer:s,maxBuffer:u}),b=mo(o,{encoding:i,buffer:s,maxBuffer:u*2});try{return await Promise.all([c,h,m,b])}catch(w){return Promise.all([{error:w,signal:w.signal,timedOut:w.timedOut},ho(r,h),ho(t,m),ho(o,b)])}},$f=({input:r})=>{if(Vs(r))throw new TypeError("The `input` option cannot be a stream in sync mode")};Ys.exports={handleInput:Lf,makeAllStream:Wf,getSpawnedResult:Ff,validateInputSync:$f}});var Ks=A((Sm,Xs)=>{"use strict";var zf=(async()=>{})().constructor.prototype,Mf=["then","catch","finally"].map(r=>[r,Reflect.getOwnPropertyDescriptor(zf,r)]),Uf=(r,t)=>{for(let[o,i]of Mf){let s=typeof t=="function"?(...u)=>Reflect.apply(i.value,t(),u):i.value.bind(t);Reflect.defineProperty(r,o,{...i,value:s})}return r},jf=r=>new Promise((t,o)=>{r.on("exit",(i,s)=>{t({exitCode:i,signal:s})}),r.on("error",i=>{o(i)}),r.stdin&&r.stdin.on("error",i=>{o(i)})});Xs.exports={mergePromise:Uf,getSpawnedPromise:jf}});var el=A((_m,Js)=>{"use strict";var Zs=(r,t=[])=>Array.isArray(t)?[r,...t]:[r],Nf=/^[\w.-]+$/,Hf=/"/g,Gf=r=>typeof r!="string"||Nf.test(r)?r:`"${r.replace(Hf,'\\"')}"`,Vf=(r,t)=>Zs(r,t).join(" "),Yf=(r,t)=>Zs(r,t).map(o=>Gf(o)).join(" "),Qf=/ +/g,Xf=r=>{let t=[];for(let o of r.trim().split(Qf)){let i=t[t.length-1];i&&i.endsWith("\\")?t[t.length-1]=`${i.slice(0,-1)} ${o}`:t.push(o)}return t};Js.exports={joinCommand:Vf,getEscapedCommand:Yf,parseCommand:Xf}});var sl=A((wm,Et)=>{"use strict";var Kf=require("path"),po=require("child_process"),Zf=fs(),Jf=hs(),ed=bs(),td=_s(),an=vs(),rl=Is(),{spawnedKill:rd,spawnedCancel:nd,setupTimeout:od,validateTimeout:id,setExitHandler:ad}=Fs(),{handleInput:sd,getSpawnedResult:ld,makeAllStream:ud,validateInputSync:cd}=Qs(),{mergePromise:tl,getSpawnedPromise:fd}=Ks(),{joinCommand:nl,parseCommand:ol,getEscapedCommand:il}=el(),dd=1e3*1e3*100,hd=({env:r,extendEnv:t,preferLocal:o,localDir:i,execPath:s})=>{let u=t?{...process.env,...r}:r;return o?ed.env({env:u,cwd:i,execPath:s}):u},al=(r,t,o={})=>{let i=Zf._parse(r,t,o);return r=i.command,t=i.args,o=i.options,o={maxBuffer:dd,buffer:!0,stripFinalNewline:!0,extendEnv:!0,preferLocal:!1,localDir:o.cwd||process.cwd(),execPath:process.execPath,encoding:"utf8",reject:!0,cleanup:!0,all:!1,windowsHide:!0,...o},o.env=hd(o),o.stdio=rl(o),process.platform==="win32"&&Kf.basename(r,".exe")==="cmd"&&t.unshift("/q"),{file:r,args:t,options:o,parsed:i}},er=(r,t,o)=>typeof t!="string"&&!Buffer.isBuffer(t)?o===void 0?void 0:"":r.stripFinalNewline?Jf(t):t,sn=(r,t,o)=>{let i=al(r,t,o),s=nl(r,t),u=il(r,t);id(i.options);let c;try{c=po.spawn(i.file,i.args,i.options)}catch(g){let y=new po.ChildProcess,C=Promise.reject(an({error:g,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:i,timedOut:!1,isCanceled:!1,killed:!1}));return tl(y,C)}let h=fd(c),m=od(c,i.options,h),b=ad(c,i.options,m),w={isCanceled:!1};c.kill=rd.bind(null,c.kill.bind(c)),c.cancel=nd.bind(null,c,w);let S=td(async()=>{let[{error:g,exitCode:y,signal:C,timedOut:P},v,L,H]=await ld(c,i.options,b),I=er(i.options,v),M=er(i.options,L),B=er(i.options,H);if(g||y!==0||C!==null){let le=an({error:g,exitCode:y,signal:C,stdout:I,stderr:M,all:B,command:s,escapedCommand:u,parsed:i,timedOut:P,isCanceled:w.isCanceled,killed:c.killed});if(!i.options.reject)return le;throw le}return{command:s,escapedCommand:u,exitCode:0,stdout:I,stderr:M,all:B,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}});return sd(c,i.options.input),c.all=ud(c,i.options),tl(c,S)};Et.exports=sn;Et.exports.sync=(r,t,o)=>{let i=al(r,t,o),s=nl(r,t),u=il(r,t);cd(i.options);let c;try{c=po.spawnSync(i.file,i.args,i.options)}catch(b){throw an({error:b,stdout:"",stderr:"",all:"",command:s,escapedCommand:u,parsed:i,timedOut:!1,isCanceled:!1,killed:!1})}let h=er(i.options,c.stdout,c.error),m=er(i.options,c.stderr,c.error);if(c.error||c.status!==0||c.signal!==null){let b=an({stdout:h,stderr:m,error:c.error,signal:c.signal,exitCode:c.status,command:s,escapedCommand:u,parsed:i,timedOut:c.error&&c.error.code==="ETIMEDOUT",isCanceled:!1,killed:c.signal!==null});if(!i.options.reject)return b;throw b}return{command:s,escapedCommand:u,exitCode:0,stdout:h,stderr:m,failed:!1,timedOut:!1,isCanceled:!1,killed:!1}};Et.exports.command=(r,t)=>{let[o,...i]=ol(r);return sn(o,i,t)};Et.exports.commandSync=(r,t)=>{let[o,...i]=ol(r);return sn.sync(o,i,t)};Et.exports.node=(r,t,o={})=>{t&&!Array.isArray(t)&&typeof t=="object"&&(o=t,t=[]);let i=rl.node(o),s=process.execArgv.filter(h=>!h.startsWith("--inspect")),{nodePath:u=process.execPath,nodeOptions:c=s}=o;return sn(u,[...c,r,...Array.isArray(t)?t:[]],{...o,stdin:void 0,stdout:void 0,stderr:void 0,stdio:i,shell:!1})}});var _d={};Bi(_d,{default:()=>Sd});module.exports=Vu(_d);var bl=require("react"),Se=require("@raycast/api");var ie=require("@raycast/api"),ba=require("path"),ya=require("os");var Gr=require("@raycast/api");var da=pe(require("node:http"),1),ha=pe(require("node:https"),1),Xe=pe(require("node:zlib"),1),te=pe(require("node:stream"),1),Yt=require("node:buffer");function Yu(r){if(!/^data:/i.test(r))throw new TypeError('`uri` does not appear to be a Data URI (must begin with "data:")');r=r.replace(/\r?\n/g,"");let t=r.indexOf(",");if(t===-1||t<=4)throw new TypeError("malformed data: URI");let o=r.substring(5,t).split(";"),i="",s=!1,u=o[0]||"text/plain",c=u;for(let w=1;w<o.length;w++)o[w]==="base64"?s=!0:(c+=`;${o[w]}`,o[w].indexOf("charset=")===0&&(i=o[w].substring(8)));!o[0]&&!i.length&&(c+=";charset=US-ASCII",i="US-ASCII");let h=s?"base64":"ascii",m=unescape(r.substring(t+1)),b=Buffer.from(m,h);return b.type=u,b.typeFull=c,b.charset=i,b}var Di=Yu;var oe=pe(require("node:stream"),1),Ae=require("node:util"),ee=require("node:buffer");Ut();Lr();var Pe=class extends Error{constructor(t,o){super(t),Error.captureStackTrace(this,this.constructor),this.type=o}get name(){return this.constructor.name}get[Symbol.toStringTag](){return this.constructor.name}};var Q=class extends Pe{constructor(t,o,i){super(t,o),i&&(this.code=this.errno=i.code,this.erroredSysCall=i.syscall)}};var Wr=Symbol.toStringTag,Hn=r=>typeof r=="object"&&typeof r.append=="function"&&typeof r.delete=="function"&&typeof r.get=="function"&&typeof r.getAll=="function"&&typeof r.has=="function"&&typeof r.set=="function"&&typeof r.sort=="function"&&r[Wr]==="URLSearchParams",Nt=r=>r&&typeof r=="object"&&typeof r.arrayBuffer=="function"&&typeof r.type=="string"&&typeof r.stream=="function"&&typeof r.constructor=="function"&&/^(Blob|File)$/.test(r[Wr]),Ni=r=>typeof r=="object"&&(r[Wr]==="AbortSignal"||r[Wr]==="EventTarget"),Hi=(r,t)=>{let o=new URL(t).hostname,i=new URL(r).hostname;return o===i||o.endsWith(`.${i}`)};var uc=(0,Ae.promisify)(oe.default.pipeline),X=Symbol("Body internals"),ye=class{constructor(t,{size:o=0}={}){let i=null;t===null?t=null:Hn(t)?t=ee.Buffer.from(t.toString()):Nt(t)||ee.Buffer.isBuffer(t)||(Ae.types.isAnyArrayBuffer(t)?t=ee.Buffer.from(t):ArrayBuffer.isView(t)?t=ee.Buffer.from(t.buffer,t.byteOffset,t.byteLength):t instanceof oe.default||(t instanceof Ye?(t=ji(t),i=t.type.split("=")[1]):t=ee.Buffer.from(String(t))));let s=t;ee.Buffer.isBuffer(t)?s=oe.default.Readable.from(t):Nt(t)&&(s=oe.default.Readable.from(t.stream())),this[X]={body:t,stream:s,boundary:i,disturbed:!1,error:null},this.size=o,t instanceof oe.default&&t.on("error",u=>{let c=u instanceof Pe?u:new Q(`Invalid response body while trying to fetch ${this.url}: ${u.message}`,"system",u);this[X].error=c})}get body(){return this[X].stream}get bodyUsed(){return this[X].disturbed}async arrayBuffer(){let{buffer:t,byteOffset:o,byteLength:i}=await Mr(this);return t.slice(o,o+i)}async formData(){let t=this.headers.get("content-type");if(t.startsWith("application/x-www-form-urlencoded")){let i=new Ye,s=new URLSearchParams(await this.text());for(let[u,c]of s)i.append(u,c);return i}let{toFormData:o}=await Promise.resolve().then(()=>(Ki(),Xi));return o(this.body,t)}async blob(){let t=this.headers&&this.headers.get("content-type")||this[X].body&&this[X].body.type||"",o=await this.arrayBuffer();return new Ce([o],{type:t})}async json(){let t=await Mr(this);return JSON.parse(t.toString())}async text(){return(await Mr(this)).toString()}buffer(){return Mr(this)}};ye.prototype.buffer=(0,Ae.deprecate)(ye.prototype.buffer,"Please use 'response.arrayBuffer()' instead of 'response.buffer()'","node-fetch#buffer");Object.defineProperties(ye.prototype,{body:{enumerable:!0},bodyUsed:{enumerable:!0},arrayBuffer:{enumerable:!0},blob:{enumerable:!0},json:{enumerable:!0},text:{enumerable:!0},data:{get:(0,Ae.deprecate)(()=>{},"data doesn't exist, use json(), text(), arrayBuffer(), or body instead","https://github.com/node-fetch/node-fetch/issues/1000 (response)")}});async function Mr(r){if(r[X].disturbed)throw new TypeError(`body used already for: ${r.url}`);if(r[X].disturbed=!0,r[X].error)throw r[X].error;let{body:t}=r;if(t===null)return ee.Buffer.alloc(0);if(!(t instanceof oe.default))return ee.Buffer.alloc(0);let o=[],i=0;try{for await(let s of t){if(r.size>0&&i+s.length>r.size){let u=new Q(`content size at ${r.url} over limit: ${r.size}`,"max-size");throw t.destroy(u),u}i+=s.length,o.push(s)}}catch(s){throw s instanceof Pe?s:new Q(`Invalid response body while trying to fetch ${r.url}: ${s.message}`,"system",s)}if(t.readableEnded===!0||t._readableState.ended===!0)try{return o.every(s=>typeof s=="string")?ee.Buffer.from(o.join("")):ee.Buffer.concat(o,i)}catch(s){throw new Q(`Could not create Buffer from response body for ${r.url}: ${s.message}`,"system",s)}else throw new Q(`Premature close of server response while trying to fetch ${r.url}`)}var ht=(r,t)=>{let o,i,{body:s}=r[X];if(r.bodyUsed)throw new Error("cannot clone body after it is used");return s instanceof oe.default&&typeof s.getBoundary!="function"&&(o=new oe.PassThrough({highWaterMark:t}),i=new oe.PassThrough({highWaterMark:t}),s.pipe(o),s.pipe(i),r[X].stream=o,s=i),s},cc=(0,Ae.deprecate)(r=>r.getBoundary(),"form-data doesn't follow the spec and requires special treatment. Use alternative package","https://github.com/node-fetch/node-fetch/issues/1167"),Ur=(r,t)=>r===null?null:typeof r=="string"?"text/plain;charset=UTF-8":Hn(r)?"application/x-www-form-urlencoded;charset=UTF-8":Nt(r)?r.type||null:ee.Buffer.isBuffer(r)||Ae.types.isAnyArrayBuffer(r)||ArrayBuffer.isView(r)?null:r instanceof Ye?`multipart/form-data; boundary=${t[X].boundary}`:r&&typeof r.getBoundary=="function"?`multipart/form-data;boundary=${cc(r)}`:r instanceof oe.default?null:"text/plain;charset=UTF-8",Zi=r=>{let{body:t}=r[X];return t===null?0:Nt(t)?t.size:ee.Buffer.isBuffer(t)?t.length:t&&typeof t.getLengthSync=="function"&&t.hasKnownLength&&t.hasKnownLength()?t.getLengthSync():null},Ji=async(r,{body:t})=>{t===null?r.end():await uc(t,r)};var Yn=require("node:util"),Vt=pe(require("node:http"),1),jr=typeof Vt.default.validateHeaderName=="function"?Vt.default.validateHeaderName:r=>{if(!/^[\^`\-\w!#$%&'*+.|~]+$/.test(r)){let t=new TypeError(`Header name must be a valid HTTP token [${r}]`);throw Object.defineProperty(t,"code",{value:"ERR_INVALID_HTTP_TOKEN"}),t}},Qn=typeof Vt.default.validateHeaderValue=="function"?Vt.default.validateHeaderValue:(r,t)=>{if(/[^\t\u0020-\u007E\u0080-\u00FF]/.test(t)){let o=new TypeError(`Invalid character in header content ["${r}"]`);throw Object.defineProperty(o,"code",{value:"ERR_INVALID_CHAR"}),o}},K=class extends URLSearchParams{constructor(t){let o=[];if(t instanceof K){let i=t.raw();for(let[s,u]of Object.entries(i))o.push(...u.map(c=>[s,c]))}else if(t!=null)if(typeof t=="object"&&!Yn.types.isBoxedPrimitive(t)){let i=t[Symbol.iterator];if(i==null)o.push(...Object.entries(t));else{if(typeof i!="function")throw new TypeError("Header pairs must be iterable");o=[...t].map(s=>{if(typeof s!="object"||Yn.types.isBoxedPrimitive(s))throw new TypeError("Each header pair must be an iterable object");return[...s]}).map(s=>{if(s.length!==2)throw new TypeError("Each header pair must be a name/value tuple");return[...s]})}}else throw new TypeError("Failed to construct 'Headers': The provided value is not of type '(sequence<sequence<ByteString>> or record<ByteString, ByteString>)");return o=o.length>0?o.map(([i,s])=>(jr(i),Qn(i,String(s)),[String(i).toLowerCase(),String(s)])):void 0,super(o),new Proxy(this,{get(i,s,u){switch(s){case"append":case"set":return(c,h)=>(jr(c),Qn(c,String(h)),URLSearchParams.prototype[s].call(i,String(c).toLowerCase(),String(h)));case"delete":case"has":case"getAll":return c=>(jr(c),URLSearchParams.prototype[s].call(i,String(c).toLowerCase()));case"keys":return()=>(i.sort(),new Set(URLSearchParams.prototype.keys.call(i)).keys());default:return Reflect.get(i,s,u)}}})}get[Symbol.toStringTag](){return this.constructor.name}toString(){return Object.prototype.toString.call(this)}get(t){let o=this.getAll(t);if(o.length===0)return null;let i=o.join(", ");return/^content-encoding$/i.test(t)&&(i=i.toLowerCase()),i}forEach(t,o=void 0){for(let i of this.keys())Reflect.apply(t,o,[this.get(i),i,this])}*values(){for(let t of this.keys())yield this.get(t)}*entries(){for(let t of this.keys())yield[t,this.get(t)]}[Symbol.iterator](){return this.entries()}raw(){return[...this.keys()].reduce((t,o)=>(t[o]=this.getAll(o),t),{})}[Symbol.for("nodejs.util.inspect.custom")](){return[...this.keys()].reduce((t,o)=>{let i=this.getAll(o);return o==="host"?t[o]=i[0]:t[o]=i.length>1?i:i[0],t},{})}};Object.defineProperties(K.prototype,["get","entries","forEach","values"].reduce((r,t)=>(r[t]={enumerable:!0},r),{}));function ea(r=[]){return new K(r.reduce((t,o,i,s)=>(i%2===0&&t.push(s.slice(i,i+2)),t),[]).filter(([t,o])=>{try{return jr(t),Qn(t,String(o)),!0}catch{return!1}}))}var fc=new Set([301,302,303,307,308]),Nr=r=>fc.has(r);var he=Symbol("Response internals"),G=class extends ye{constructor(t=null,o={}){super(t,o);let i=o.status!=null?o.status:200,s=new K(o.headers);if(t!==null&&!s.has("Content-Type")){let u=Ur(t,this);u&&s.append("Content-Type",u)}this[he]={type:"default",url:o.url,status:i,statusText:o.statusText||"",headers:s,counter:o.counter,highWaterMark:o.highWaterMark}}get type(){return this[he].type}get url(){return this[he].url||""}get status(){return this[he].status}get ok(){return this[he].status>=200&&this[he].status<300}get redirected(){return this[he].counter>0}get statusText(){return this[he].statusText}get headers(){return this[he].headers}get highWaterMark(){return this[he].highWaterMark}clone(){return new G(ht(this,this.highWaterMark),{type:this.type,url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok,redirected:this.redirected,size:this.size,highWaterMark:this.highWaterMark})}static redirect(t,o=302){if(!Nr(o))throw new RangeError('Failed to execute "redirect" on "response": Invalid status code');return new G(null,{headers:{location:new URL(t).toString()},status:o})}static error(){let t=new G(null,{status:0,statusText:""});return t[he].type="error",t}get[Symbol.toStringTag](){return"Response"}};Object.defineProperties(G.prototype,{type:{enumerable:!0},url:{enumerable:!0},status:{enumerable:!0},ok:{enumerable:!0},redirected:{enumerable:!0},statusText:{enumerable:!0},headers:{enumerable:!0},clone:{enumerable:!0}});var ua=require("node:url"),ca=require("node:util");var ta=r=>{if(r.search)return r.search;let t=r.href.length-1,o=r.hash||(r.href[t]==="#"?"#":"");return r.href[t-o.length]==="?"?"?":""};var na=require("node:net");function ra(r,t=!1){return r==null||(r=new URL(r),/^(about|blob|data):$/.test(r.protocol))?"no-referrer":(r.username="",r.password="",r.hash="",t&&(r.pathname="",r.search=""),r)}var oa=new Set(["","no-referrer","no-referrer-when-downgrade","same-origin","origin","strict-origin","origin-when-cross-origin","strict-origin-when-cross-origin","unsafe-url"]),ia="strict-origin-when-cross-origin";function aa(r){if(!oa.has(r))throw new TypeError(`Invalid referrerPolicy: ${r}`);return r}function dc(r){if(/^(http|ws)s:$/.test(r.protocol))return!0;let t=r.host.replace(/(^\[)|(]$)/g,""),o=(0,na.isIP)(t);return o===4&&/^127\./.test(t)||o===6&&/^(((0+:){7})|(::(0+:){0,6}))0*1$/.test(t)?!0:/^(.+\.)*localhost$/.test(r.host)?!1:r.protocol==="file:"}function mt(r){return/^about:(blank|srcdoc)$/.test(r)||r.protocol==="data:"||/^(blob|filesystem):$/.test(r.protocol)?!0:dc(r)}function sa(r,{referrerURLCallback:t,referrerOriginCallback:o}={}){if(r.referrer==="no-referrer"||r.referrerPolicy==="")return null;let i=r.referrerPolicy;if(r.referrer==="about:client")return"no-referrer";let s=r.referrer,u=ra(s),c=ra(s,!0);u.toString().length>4096&&(u=c),t&&(u=t(u)),o&&(c=o(c));let h=new URL(r.url);switch(i){case"no-referrer":return"no-referrer";case"origin":return c;case"unsafe-url":return u;case"strict-origin":return mt(u)&&!mt(h)?"no-referrer":c.toString();case"strict-origin-when-cross-origin":return u.origin===h.origin?u:mt(u)&&!mt(h)?"no-referrer":c;case"same-origin":return u.origin===h.origin?u:"no-referrer";case"origin-when-cross-origin":return u.origin===h.origin?u:c;case"no-referrer-when-downgrade":return mt(u)&&!mt(h)?"no-referrer":u;default:throw new TypeError(`Invalid referrerPolicy: ${i}`)}}function la(r){let t=(r.get("referrer-policy")||"").split(/[,\s]+/),o="";for(let i of t)i&&oa.has(i)&&(o=i);return o}var j=Symbol("Request internals"),Hr=r=>typeof r=="object"&&typeof r[j]=="object",hc=(0,ca.deprecate)(()=>{},".data is not a valid RequestInit property, use .body instead","https://github.com/node-fetch/node-fetch/issues/1000 (request)"),ve=class extends ye{constructor(t,o={}){let i;if(Hr(t)?i=new URL(t.url):(i=new URL(t),t={}),i.username!==""||i.password!=="")throw new TypeError(`${i} is an url with embedded credentails.`);let s=o.method||t.method||"GET";if(s=s.toUpperCase(),"data"in o&&hc(),(o.body!=null||Hr(t)&&t.body!==null)&&(s==="GET"||s==="HEAD"))throw new TypeError("Request with GET/HEAD method cannot have body");let u=o.body?o.body:Hr(t)&&t.body!==null?ht(t):null;super(u,{size:o.size||t.size||0});let c=new K(o.headers||t.headers||{});if(u!==null&&!c.has("Content-Type")){let b=Ur(u,this);b&&c.set("Content-Type",b)}let h=Hr(t)?t.signal:null;if("signal"in o&&(h=o.signal),h!=null&&!Ni(h))throw new TypeError("Expected signal to be an instanceof AbortSignal or EventTarget");let m=o.referrer==null?t.referrer:o.referrer;if(m==="")m="no-referrer";else if(m){let b=new URL(m);m=/^about:(\/\/)?client$/.test(b)?"client":b}else m=void 0;this[j]={method:s,redirect:o.redirect||t.redirect||"follow",headers:c,parsedURL:i,signal:h,referrer:m},this.follow=o.follow===void 0?t.follow===void 0?20:t.follow:o.follow,this.compress=o.compress===void 0?t.compress===void 0?!0:t.compress:o.compress,this.counter=o.counter||t.counter||0,this.agent=o.agent||t.agent,this.highWaterMark=o.highWaterMark||t.highWaterMark||16384,this.insecureHTTPParser=o.insecureHTTPParser||t.insecureHTTPParser||!1,this.referrerPolicy=o.referrerPolicy||t.referrerPolicy||""}get method(){return this[j].method}get url(){return(0,ua.format)(this[j].parsedURL)}get headers(){return this[j].headers}get redirect(){return this[j].redirect}get signal(){return this[j].signal}get referrer(){if(this[j].referrer==="no-referrer")return"";if(this[j].referrer==="client")return"about:client";if(this[j].referrer)return this[j].referrer.toString()}get referrerPolicy(){return this[j].referrerPolicy}set referrerPolicy(t){this[j].referrerPolicy=aa(t)}clone(){return new ve(this)}get[Symbol.toStringTag](){return"Request"}};Object.defineProperties(ve.prototype,{method:{enumerable:!0},url:{enumerable:!0},headers:{enumerable:!0},redirect:{enumerable:!0},clone:{enumerable:!0},signal:{enumerable:!0},referrer:{enumerable:!0},referrerPolicy:{enumerable:!0}});var fa=r=>{let{parsedURL:t}=r[j],o=new K(r[j].headers);o.has("Accept")||o.set("Accept","*/*");let i=null;if(r.body===null&&/^(post|put)$/i.test(r.method)&&(i="0"),r.body!==null){let h=Zi(r);typeof h=="number"&&!Number.isNaN(h)&&(i=String(h))}i&&o.set("Content-Length",i),r.referrerPolicy===""&&(r.referrerPolicy=ia),r.referrer&&r.referrer!=="no-referrer"?r[j].referrer=sa(r):r[j].referrer="no-referrer",r[j].referrer instanceof URL&&o.set("Referer",r.referrer),o.has("User-Agent")||o.set("User-Agent","node-fetch"),r.compress&&!o.has("Accept-Encoding")&&o.set("Accept-Encoding","gzip,deflate,br");let{agent:s}=r;typeof s=="function"&&(s=s(t)),!o.has("Connection")&&!s&&o.set("Connection","close");let u=ta(t),c={path:t.pathname+u,method:r.method,headers:o[Symbol.for("nodejs.util.inspect.custom")](),insecureHTTPParser:r.insecureHTTPParser,agent:s};return{parsedURL:t,options:c}};var pt=class extends Pe{constructor(t,o="aborted"){super(t,o)}};Lr();Gn();var mc=new Set(["data:","http:","https:"]);async function Ke(r,t){return new Promise((o,i)=>{let s=new ve(r,t),{parsedURL:u,options:c}=fa(s);if(!mc.has(u.protocol))throw new TypeError(`node-fetch cannot load ${r}. URL scheme "${u.protocol.replace(/:$/,"")}" is not supported.`);if(u.protocol==="data:"){let y=Di(s.url),C=new G(y,{headers:{"Content-Type":y.typeFull}});o(C);return}let h=(u.protocol==="https:"?ha.default:da.default).request,{signal:m}=s,b=null,w=()=>{let y=new pt("The operation was aborted.");i(y),s.body&&s.body instanceof te.default.Readable&&s.body.destroy(y),!(!b||!b.body)&&b.body.emit("error",y)};if(m&&m.aborted){w();return}let R=()=>{w(),g()},S=h(u.toString(),c);m&&m.addEventListener("abort",R);let g=()=>{S.abort(),m&&m.removeEventListener("abort",R)};S.on("error",y=>{i(new Q(`request to ${s.url} failed, reason: ${y.message}`,"system",y)),g()}),pc(S,y=>{b.body.destroy(y)}),process.version<"v14"&&S.on("socket",y=>{let C;y.prependListener("end",()=>{C=y._eventsCount}),y.prependListener("close",P=>{if(b&&C<y._eventsCount&&!P){let v=new Error("Premature close");v.code="ERR_STREAM_PREMATURE_CLOSE",b.body.emit("error",v)}})}),S.on("response",y=>{S.setTimeout(0);let C=ea(y.rawHeaders);if(Nr(y.statusCode)){let I=C.get("Location"),M=null;try{M=I===null?null:new URL(I,s.url)}catch{if(s.redirect!=="manual"){i(new Q(`uri requested responds with an invalid redirect URL: ${I}`,"invalid-redirect")),g();return}}switch(s.redirect){case"error":i(new Q(`uri requested responds with a redirect, redirect mode is set to error: ${s.url}`,"no-redirect")),g();return;case"manual":break;case"follow":{if(M===null)break;if(s.counter>=s.follow){i(new Q(`maximum redirect reached at: ${s.url}`,"max-redirect")),g();return}let B={headers:new K(s.headers),follow:s.follow,counter:s.counter+1,agent:s.agent,compress:s.compress,method:s.method,body:ht(s),signal:s.signal,size:s.size,referrer:s.referrer,referrerPolicy:s.referrerPolicy};if(!Hi(s.url,M))for(let Z of["authorization","www-authenticate","cookie","cookie2"])B.headers.delete(Z);if(y.statusCode!==303&&s.body&&t.body instanceof te.default.Readable){i(new Q("Cannot follow redirect with body being a readable stream","unsupported-redirect")),g();return}(y.statusCode===303||(y.statusCode===301||y.statusCode===302)&&s.method==="POST")&&(B.method="GET",B.body=void 0,B.headers.delete("content-length"));let le=la(C);le&&(B.referrerPolicy=le),o(Ke(new ve(M,B))),g();return}default:return i(new TypeError(`Redirect option '${s.redirect}' is not a valid value of RequestRedirect`))}}m&&y.once("end",()=>{m.removeEventListener("abort",R)});let P=(0,te.pipeline)(y,new te.PassThrough,I=>{I&&i(I)});process.version<"v12.10"&&y.on("aborted",R);let v={url:s.url,status:y.statusCode,statusText:y.statusMessage,headers:C,size:s.size,counter:s.counter,highWaterMark:s.highWaterMark},L=C.get("Content-Encoding");if(!s.compress||s.method==="HEAD"||L===null||y.statusCode===204||y.statusCode===304){b=new G(P,v),o(b);return}let H={flush:Xe.default.Z_SYNC_FLUSH,finishFlush:Xe.default.Z_SYNC_FLUSH};if(L==="gzip"||L==="x-gzip"){P=(0,te.pipeline)(P,Xe.default.createGunzip(H),I=>{I&&i(I)}),b=new G(P,v),o(b);return}if(L==="deflate"||L==="x-deflate"){let I=(0,te.pipeline)(y,new te.PassThrough,M=>{M&&i(M)});I.once("data",M=>{(M[0]&15)===8?P=(0,te.pipeline)(P,Xe.default.createInflate(),B=>{B&&i(B)}):P=(0,te.pipeline)(P,Xe.default.createInflateRaw(),B=>{B&&i(B)}),b=new G(P,v),o(b)}),I.once("end",()=>{b||(b=new G(P,v),o(b))});return}if(L==="br"){P=(0,te.pipeline)(P,Xe.default.createBrotliDecompress(),I=>{I&&i(I)}),b=new G(P,v),o(b);return}b=new G(P,v),o(b)}),Ji(S,s).catch(i)})}function pc(r,t){let o=Yt.Buffer.from(`0\r
\r
`),i=!1,s=!1,u;r.on("response",c=>{let{headers:h}=c;i=h["transfer-encoding"]==="chunked"&&!h["content-length"]}),r.on("socket",c=>{let h=()=>{if(i&&!s){let m=new Error("Premature close");m.code="ERR_STREAM_PREMATURE_CLOSE",t(m)}};c.prependListener("close",h),r.on("abort",()=>{c.removeListener("close",h)}),c.on("data",m=>{s=Yt.Buffer.compare(m.slice(-5),o)===0,!s&&u&&(s=Yt.Buffer.compare(u.slice(-3),o.slice(0,3))===0&&Yt.Buffer.compare(m.slice(-2),o.slice(3))===0),u=m})})}var Qt=require("@raycast/api"),{accessKey:ma,secretKey:bc}=(0,Qt.getPreferenceValues)(),Fe=new Qt.OAuth.PKCEClient({redirectMethod:Qt.OAuth.RedirectMethod.Web,providerName:"Unsplash",providerIcon:"unsplash-logo.png",description:"Login to your Unsplash account."}),pa=async()=>{let r=await Fe.authorizationRequest({endpoint:"https://unsplash.com/oauth/authorize",clientId:ma,scope:"public read_user write_likes"}),{authorizationCode:t}=await Fe.authorize(r),o=new URLSearchParams;o.append("client_id",ma),o.append("client_secret",bc),o.append("redirect_uri",r.redirectURI),o.append("code",t),o.append("grant_type","authorization_code");let i=await Ke("https://unsplash.com/oauth/token",{method:"POST",body:o});if(!i.ok)throw console.error("fetch tokens error:",await i.text()),new Error(i.statusText);await Fe.setTokens(await i.json())};var{accessKey:yc}=(0,Gr.getPreferenceValues)(),Vr=async(r,t)=>{let o=await Fe.getTokens(),i=o?.accessToken;i?o?.refreshToken&&o?.isExpired()&&(await Fe.setTokens(await gc(o.refreshToken)),i=(await Fe.getTokens())?.accessToken):(await Gr.LocalStorage.clear(),await pa(),i=(await Fe.getTokens())?.accessToken);let s=r.startsWith("https://api.unsplash.com/")?r:`https://api.unsplash.com${r}`;return await Ke(s,{...t,headers:{Authorization:`Bearer ${i}`,...t?.headers}}).then(async c=>c.json())};async function gc(r){let t=new URLSearchParams;t.append("client_id",yc),t.append("refresh_token",r),t.append("grant_type","refresh_token");let o=await Ke("https://unsplash.com/oauth/token",{method:"POST",body:t});if(!o.ok)throw console.error("refresh tokens error:",await o.text()),new Error(o.statusText);let i=await o.json();return i.refresh_token=i.refresh_token??r,i}var ga=(0,ie.getPreferenceValues)(),Sa=()=>{let{gridItemSize:r}=ga;return r=="small"?ie.Grid.ItemSize.Small:r=="large"?ie.Grid.ItemSize.Large:ie.Grid.ItemSize.Medium},_a=()=>ga.showImageTitle,wa=r=>r.replace(/\w\S*/g,t=>t.charAt(0).toUpperCase()+t.substring(1).toLowerCase()),Ra=r=>r[0]==="~"?(0,ba.join)((0,ya.homedir)(),r.slice(1)):r,Ta=async(r,t)=>{let o=await(0,ie.showToast)(ie.Toast.Style.Animated,"Liking photo...");try{await Vr(`/photos/${r}/like`,{method:t?"DELETE":"POST"}),o.style=ie.Toast.Style.Success,o.title=`Photo ${t?"unliked":"liked"}!`}catch{o.style=ie.Toast.Style.Failure,o.title="An error occured"}};var bt=require("@raycast/api"),$e=require("react");var Ea=(r,t)=>{let[o,i]=(0,$e.useState)({results:[],isLoading:!0}),[s,u]=(0,$e.useState)(""),c=(0,$e.useRef)(null);(0,$e.useEffect)(()=>(h(""),()=>{c.current?.abort()}),[]),(0,$e.useEffect)(()=>{s!==""&&h(s)},[t]);let h=async m=>{c.current?.abort(),c.current=new AbortController;try{if(m===""){i(R=>({...R,isLoading:!1}));return}i(R=>({...R,isLoading:!0}));let{errors:b,results:w}=await Sc({signal:c.current?.signal,searchText:m,options:{orientation:t,type:r||"photos"}});b?.length&&(0,bt.showToast)(bt.Toast.Style.Failure,`Failed to fetch ${r}.`,b?.join(`
`)),u(m),i(R=>({...R,isLoading:!1,results:w||[]}))}catch(b){if(b instanceof pt)return;(0,bt.showToast)(bt.Toast.Style.Failure,"Could not perform search",String(b))}};return{state:o,search:h}},Sc=async({searchText:r,options:t,signal:o})=>{let i=new URLSearchParams({page:"1",query:r,per_page:"30"});t.orientation!=="all"&&i.append("orientation",t.orientation);let{errors:s,results:u}=await Vr(`/search/${t.type}?${i.toString()}`,{signal:o});return{results:u,errors:s}};var O=require("@raycast/api");var pl=require("react");var tr=require("@raycast/api");var ll=pe(require("node:process"),1),ul=pe(sl(),1);async function Ct(r){if(ll.default.platform!=="darwin")throw new Error("macOS only");let{stdout:t}=await(0,ul.default)("osascript",["-e",r]);return t}var cl=async({url:r,id:t})=>{let{downloadSize:o}=(0,tr.getPreferenceValues)();try{await(0,tr.showHUD)("Please select a location to save the image..."),await Ct(`
      set outputFolder to choose folder with prompt "Please select an output folder:"
      set temp_folder to (POSIX path of outputFolder) & "${t}-${o}.jpg"
      set q_temp_folder to quoted form of temp_folder

      set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd
    `)}catch(i){console.error(i),await(0,tr.showHUD)("Couldn't save the image...")}};var re=require("@raycast/api");var bo=require("fs");var fl=async(r,t)=>{if(t==="hud")await(0,re.showHUD)(r);else return await(0,re.showToast)(re.Toast.Style.Animated,r)},yo=async({url:r,id:t,every:o,useHud:i=!1,isBackground:s=!1})=>{let{downloadSize:u,wallpaperPath:c}=(0,re.getPreferenceValues)(),h=Ra(c||re.environment.supportPath),m;s||((0,bo.existsSync)(h)?m=await fl("Downloading and setting wallpaper...",i?"hud":"toast"):m=await fl("The selected path does not exist. Please select a valid path.",i?"hud":"toast"));let b=h.endsWith("/")?`${h}${t}-${u}.jpg`:`${h}/${t}-${u}.jpg`;try{let w=b,R=(0,bo.existsSync)(w)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd`;if(await Ct(`
      set temp_folder to (POSIX path of "${w}")
      set q_temp_folder to quoted form of temp_folder

      ${R}

      set x to alias (POSIX file temp_folder)

      try
        tell application "System Events"
          tell ${o?"every":"current"} desktop
            set picture to (x as text)
            return "ok"
          end tell
        end tell
      on error
        set dialogTitle to "Error Setting Wallpaper"
        set dialogText to "Please make sure you have given Raycast the required permission. To make sure, click the button below and grant Raycast the 'System Events' permission."

        display alert dialogTitle message dialogText buttons {"Cancel", "Open Preferences"} default button 2 as informational
          if button returned of result is "Open Preferences" then
            do shell script "open 'x-apple.systempreferences:com.apple.preference.security?Privacy_Automation'"
          end if

        return "error"
      end try
    `)!=="ok")throw new Error("Error setting wallpaper.");return i?!s&&await(0,re.showHUD)("Wallpaper set!"):m&&(m.style=re.Toast.Style.Success,m.title="Wallpaper set!"),!0}catch(w){return console.error(w),m&&(m.style=re.Toast.Style.Failure,m.title="Something went wrong.",m.message="Try with another image or check your internet connection."),!1}};var ze=require("@raycast/api");var dl=require("fs"),hl=async({url:r,id:t})=>{let o=await(0,ze.showToast)(ze.Toast.Style.Animated,"Downloading and copying image..."),i=ze.environment.supportPath,s=i.endsWith("/")?`${i}${t}.jpg`:`${i}/${t}.jpg`;try{let u=s,c=(0,dl.existsSync)(u)?"":`set cmd to "curl -o " & q_temp_folder & " " & "${r}"
        do shell script cmd`;await Ct(`
      set temp_folder to (POSIX path of "${u}")
      set q_temp_folder to quoted form of temp_folder

      ${c}

      set x to alias (POSIX file temp_folder)
      set the clipboard to (read (contents of x) as JPEG picture)
    `),o.style=ze.Toast.Style.Success,o.title="Image copied to the clipboard!"}catch(u){console.error(u),o.style=ze.Toast.Style.Failure,o.title="Something went wrong.",o.message="Try with another image or check your internet connection."}};var ae=require("@raycast/api");var ke=require("react/jsx-runtime"),md=({result:r})=>{let t=r.urls?.regular||r.urls?.small||r.urls?.thumb,o=r.created_at?new Date(r.created_at).toLocaleString():"Unknown";return(0,ke.jsx)(ae.Detail,{markdown:`![${r.alt_description}](${t})`,metadata:(0,ke.jsxs)(ae.Detail.Metadata,{children:[r.description&&(0,ke.jsx)(ae.Detail.Metadata.Label,{title:"Description",text:r.description}),(0,ke.jsx)(ae.Detail.Metadata.Link,{title:"Author",text:r.user.username,target:r.user.links.html}),(0,ke.jsx)(ae.Detail.Metadata.Label,{title:"Uploaded On",text:o,icon:ae.Icon.Calendar}),(0,ke.jsx)(ae.Detail.Metadata.Label,{title:"Likes",text:String(r.likes),icon:ae.Icon.Heart}),(0,ke.jsx)(ae.Detail.Metadata.Label,{title:"Dimensions",text:`${r.width}x${r.height}`,icon:ae.Icon.AppWindow})]}),navigationTitle:r.user?.name,actions:(0,ke.jsx)(ln,{item:r})})},ml=md;var z=require("react/jsx-runtime"),pd=({details:r,item:t,unlike:o})=>(0,z.jsx)(O.ActionPanel,{children:(0,z.jsx)(bd,{details:r,item:t,unlike:o})}),bd=({details:r=!1,item:t,unlike:o})=>{let{push:i}=(0,O.useNavigation)(),{downloadSize:s}=(0,O.getPreferenceValues)(),[u,c]=(0,pl.useState)(t.liked_by_user),h=t.urls?.raw||t.urls?.full||t.urls?.regular||t.urls?.small,m=async()=>{await Ta(t.id,u),u&&o&&o(w=>[...w,String(t.id)]),c(!u)},b={url:t.urls?.[s]||h,id:`${t.id}-${s}`};return(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(O.ActionPanel.Section,{children:[r&&(0,z.jsx)(O.Action,{title:"Show Details",icon:O.Icon.List,onAction:()=>i((0,z.jsx)(ml,{result:t}))}),(0,z.jsx)(O.Action,{title:`${u?"Unlike":"Like"} Photo`,icon:O.Icon.Heart,style:u?O.Action.Style.Destructive:O.Action.Style.Regular,shortcut:{modifiers:["cmd"],key:"l"},onAction:m}),t.links?.html&&(0,z.jsx)(O.Action.OpenInBrowser,{url:t.links.html,title:"Open Original"}),t.user?.links?.html&&(0,z.jsx)(O.Action.OpenInBrowser,{url:t.user.links.html,icon:O.Icon.Person,shortcut:{modifiers:["cmd"],key:"o"},title:"Open Author"})]}),h&&(0,z.jsxs)(z.Fragment,{children:[(0,z.jsxs)(O.ActionPanel.Section,{title:"Image",children:[(0,z.jsx)(O.Action,{title:"Copy to Clipboard",icon:O.Icon.Clipboard,shortcut:{modifiers:["cmd","shift"],key:"c"},onAction:()=>hl(b)}),(0,z.jsx)(O.Action,{title:"Download Image",icon:O.Icon.Desktop,shortcut:{modifiers:["cmd","shift"],key:"d"},onAction:()=>cl({url:h,id:String(t.id)})})]}),(0,z.jsxs)(O.ActionPanel.Section,{title:"Set as Wallpaper On",children:[(0,z.jsx)(O.Action,{title:"Current Monitor",icon:O.Icon.Desktop,shortcut:{modifiers:["cmd","shift"],key:"w"},onAction:()=>yo({url:h,id:String(t.id)})}),(0,z.jsx)(O.Action,{title:"Every Monitor",icon:O.Icon.Desktop,shortcut:{modifiers:["shift","opt"],key:"w"},onAction:()=>yo({url:h,id:String(t.id),every:!0})})]})]}),(0,z.jsxs)(O.ActionPanel.Section,{title:"Links",children:[t.links?.html&&(0,z.jsx)(O.Action.CopyToClipboard,{content:t.links.html,title:"Copy URL to Clipboard",icon:O.Icon.Clipboard}),h&&(0,z.jsx)(O.Action.CopyToClipboard,{content:h,title:"Copy Image URL to Clipboard",icon:O.Icon.Clipboard}),t.user?.links?.html&&(0,z.jsx)(O.Action.CopyToClipboard,{content:t.user.links.html,title:"Copy Author URL to Clipboard",icon:O.Icon.Clipboard})]})]})},ln=pd;var se=require("react/jsx-runtime"),yd=()=>{let[r,t]=(0,bl.useState)("landscape"),{state:o,search:i}=Ea("photos",r),s=Sa(),u=c=>{t(c)};return(0,se.jsx)(Se.Grid,{isLoading:o.isLoading,itemSize:s,onSearchTextChange:i,searchBarPlaceholder:"Search wallpapers...",searchBarAccessory:(0,se.jsx)(Se.Grid.Dropdown,{tooltip:"Orientation",storeValue:!0,defaultValue:r,onChange:u,children:(0,se.jsxs)(Se.Grid.Dropdown.Section,{title:"Orientation",children:[(0,se.jsx)(Se.Grid.Dropdown.Item,{title:"All",value:"all"}),(0,se.jsx)(Se.Grid.Dropdown.Item,{title:"Landscape",value:"landscape"}),(0,se.jsx)(Se.Grid.Dropdown.Item,{title:"Portrait",value:"portrait"}),(0,se.jsx)(Se.Grid.Dropdown.Item,{title:"Squarish",value:"squarish"})]})}),throttle:!0,children:(0,se.jsx)(Se.Grid.Section,{title:"Results",subtitle:String(o?.results?.length),children:o.results.map(c=>(0,se.jsx)(gd,{searchResult:c},c.id))})})},gd=({searchResult:r})=>{let[t,o]=[r.description||r.alt_description||r.user.name||"No Name",r.urls?.thumb||r.urls?.small||r.urls?.regular],i=_a()?wa(t):"";return(0,se.jsx)(Se.Grid.Item,{content:o,title:i,actions:(0,se.jsx)(ln,{item:r,details:!0})})},Sd=yd;0&&(module.exports={});
/*! fetch-blob. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! formdata-polyfill. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
/*! node-domexception. MIT License. Jimmy Wrting <https://jimmy.warting.se/opensource> */
